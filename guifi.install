<?php
/**
 * @file
 * Install, update and uninstall functions for the guifi module.
 */

/**
* Perform an SQL query and return success or failure.
*
* @see http://api.drupal.org/api/function/update_sql/6
*
* @param $sql
*   A string containing a complete SQL query.
* @return
*   An array containing the keys:
*      success: a boolean indicating whether the query succeeded
*      query: the SQL query executed, passed through check_plain()
*      rows: number of rows effected
*/
function my_update_sql($sql) {
  $args = func_get_args();
  array_shift($args);
  $result = db_query($sql, $args);
  $sql = my_return_query_string($sql, $args);
  return array('success' => $result !== FALSE, 'query' => check_plain($sql), 'rows' => db_affected_rows());
}

/**
* Builds a basic query, returns string.
*
* @see http://api.drupal.org/api/function/db_query/6
*
* @param $query
*   A string containing an SQL query.
* @param ...
*   A variable number of arguments which are substituted into the query
*   using printf() syntax. Instead of a variable number of query arguments,
*   you may also pass a single array containing the query arguments.
*
*   Valid %-modifiers are: %s, %d, %f, %b (binary data, do not enclose
*   in '') and %%.
*
*   NOTE: using this syntax will cast NULL and FALSE values to decimal 0,
*   and TRUE values to decimal 1.
*
* @return
*   String of query that would have been run
*/
function my_return_query_string($query) {
  $args = func_get_args();
  array_shift($args);
  //$query = db_prefix_tables($query);
  if (isset($args[0]) and is_array($args[0])) { // 'All arguments in one array' syntax
    $args = $args[0];
  }
  _db_query_callback($args, TRUE);
  $query = preg_replace_callback(DB_QUERY_REGEXP, '_db_query_callback', $query);
  return $query;
}


function guifi_uninstall() {

  drupal_uninstall_schema('guifi');

  variable_del('guifi_license');
  variable_del('guifi_title');
  variable_del('guifi_root');
  variable_del('guifi_forums');
  variable_del('guifi_contact');
  variable_del('hotspot_ssid');
  variable_del('guifi_loglevel');
  variable_del('guifi_maps');
  variable_del('guifi_decimal');
  variable_del('guifi_thousand');
}

function guifi_schema() {
  $schema['guifi_notify'] = array(
    'fields' => array(
         'id' => array('type' => 'int', 'size' => 'small', 'unsigned' => TRUE, 'not null' => TRUE),
         'timestamp' => array('type' => 'int', 'unsigned' => TRUE, 'not null' => TRUE),
         'who_id' => array('type' => 'int', 'size' => 'medium', 'unsigned' => TRUE, 'not null' => TRUE),
         'who_name' => array('type' => 'varchar', 'length' => '255', 'not null' => TRUE),
         'to_array' => array('type' => 'varchar', 'length' => '1024', 'not null' => TRUE),
         'subject' => array('type' => 'varchar', 'length' => '255', 'not null' => TRUE),
         'body' => array('type' => 'text', 'size' => 'big', 'not null' => TRUE)
         ),
    'primary key' => array('id'),
  );

  $schema['guifi_location'] = array(
    'fields' => array(
         'id' => array('type' => 'serial',  'size' => 'medium', 'not null' => TRUE),
         'nick' => array('type' => 'varchar', 'length' => '40', 'not null' => TRUE, 'default' => ''),
         'zone_id' => array('type' => 'int',  'size' => 'medium', 'not null' => FALSE, 'comment' => 'foreign key to guifi_zone(id)'),
         'zone_description' => array('type' => 'varchar', 'length' => '255', 'not null' => FALSE),
         'lat' => array('type' => 'numeric', 'precision' => '10', 'scale' => '6', 'not null' => FALSE),
         'lon' => array('type' => 'numeric', 'precision' => '10', 'scale' => '6', 'not null' => FALSE),
         'elevation' => array('type' => 'int', 'size' => 'tiny', 'not null' => FALSE),
         'notification' => array('type' => 'varchar', 'length' => '1024', 'not null' => TRUE),
         'status_flag' => array('type' => 'varchar', 'length' => '40', 'not null' => TRUE, 'default' => 'Planned'),
         'stable' => array('type' => 'varchar', 'length' => '25', 'not null' => TRUE, 'default' => 'Yes', 'comment' => 'Yes,No'),
         'graph_server' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE, 'default' => 0, 'comment' => 'FK to guifi_services (SNPGraphs)'),
         'user_created' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE, 'default' => 0),
         'user_changed' => array('type' => 'int', 'size' => 'medium',' not null' => FALSE),
         'timestamp_created' => array('type' => 'int', 'not null' => TRUE, 'default' => 0),
         'timestamp_changed' => array('type' => 'int', 'not null' => FALSE)),
    'primary key' => array('id'),
  );

  $schema['guifi_networks'] = array(
    'comment' => 'allocates ipv4 address ranges to zones',
    'fields' => array(
         'id' => array('type' => 'serial', 'size' => 'small', 'unsigned' => TRUE, 'not null' => TRUE),
         'base' => array('type' => 'varchar', 'length' => '255', 'not null' => TRUE, 'default' => ''),
         'mask' => array('type' => 'varchar', 'length' => '255', 'not null' => TRUE, 'default' => '255.255.255.0'),
         'zone' => array('type' => 'int',  'size' => 'medium', 'unsigned' => TRUE, 'not null' => TRUE),
         'network_type' => array('type' => 'varchar', 'length' => '10', 'not null' => TRUE, 'default' => 'public', 'comment' => 'public, backbone'),
         'user_created' => array('type' => 'int',  'size' => 'medium', 'not null' => TRUE, 'default' => 0),
         'user_changed' => array('type' => 'int',  'size' => 'medium', 'not null' => TRUE, 'default' => 0),
         'timestamp_created' => array('type' => 'int', 'not null' => TRUE, 'default' => 0),
         'timestamp_changed' => array('type' => 'int', 'not null' => TRUE, 'default' => 0)),
    'primary key' => array('id'),
    'unique keys' => array(
         'networks' => array(array('base', 16), array('mask', 16))),
    'indexes' => array(
         'net_zone' => array('zone')),
  );

  $schema['guifi_zone'] = array(
    'comment' => 'zone information, zones have a self hierarchy and group node locations',
    'fields' => array(
         'id' => array('type' => 'serial',  'size' => 'medium', 'unsigned' => TRUE, 'not null' => TRUE),
         'title' => array('type' => 'varchar', 'length' => '255', 'not null' => TRUE, 'default' => ''),
         'nick' => array('type' => 'varchar', 'length' => '10', 'not null' => FALSE),
         'body' => array('type' => 'text', 'size' => 'big', 'not null' => TRUE),
         'master' => array('type' => 'int', 'size' => 'medium', 'unsigned' => TRUE, 'not null' => TRUE, 'comment' => 'references parent zone guifi_zone(id)'),
         'zone_mode' => array('type' => 'varchar', 'length' => 25, 'not null' => TRUE, 'default' => 'infrastructure', 'comment' => 'infrastructure/ad-hoc'),
         'graph_server' => array('type' => 'int',  'size' => 'medium', 'not null' => TRUE, 'default' => '0', 'comment' => 'FK to guifi_services (SNPGraphs)'),
         'proxy_id' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE, 'default' => 0, 'comment' => 'FK to guifi_services (proxy)'),
         'voip_id' => array('type' => 'int',  'size' => 'medium', 'not null' => TRUE, 'default' => 0, 'comment' => 'FK to guifi_services (VoIP)'),
         'time_zone' => array('type' => 'varchar', 'length' => '15', 'not null' => TRUE),
         'dns_servers' => array('type' => 'varchar', 'length' => '255', 'not null' => FALSE),
         'ntp_servers' => array('type' => 'varchar', 'length' => '255', 'not null' => FALSE),
         'graph_server' => array('type' => 'varchar', 'length' => '40', 'not null' => FALSE),
         'homepage' => array('type' => 'varchar', 'length' => '255', 'not null' => FALSE),
         'notification' => array('type' => 'varchar', 'length' => '1024', 'not null' => TRUE),
         'ospf_zone' => array('type' => 'varchar', 'length' => '255', 'not null' => FALSE),
         'minx' => array('type' => 'numeric', 'precision' => '10', 'scale' => '6', 'not null' => FALSE),
         'miny' => array('type' => 'numeric', 'precision' => '10', 'scale' => '6', 'not null' => FALSE),
         'maxx' => array('type' => 'numeric', 'precision' => '10', 'scale' => '6', 'not null' => FALSE),
         'maxy' => array('type' => 'numeric', 'precision' => '10', 'scale' => '6', 'not null' => FALSE),
         'local' => array('comment' => 'Yes, No', 'type' => 'varchar', 'length' => '5', 'not null' => TRUE, 'default' => 'Yes'),
         'nodexchange_url' => array('type' => 'varchar', 'length' => '255', 'not null' => FALSE),
         'refresh' => array('type' => 'int', 'not null' => FALSE),
         'remote_server_id' => array('type' => 'int',  'size' => 'medium', 'not null' => FALSE),
         'weight' => array('type' => 'int', 'size' => 'tiny', 'not null' => TRUE, 'default' => 0),
         'user_created' => array('type' => 'int',  'size' => 'medium', 'not null' => TRUE, 'default' => 0),
         'user_changed' => array('type' => 'int',  'size' => 'medium', 'not null' => TRUE, 'default' => 0),
         'timestamp_created' => array('type' => 'int', 'not null' => TRUE, 'default' => 0),
         'timestamp_changed' => array('type' => 'int', 'not null' => TRUE, 'default' => 0)),
    'primary key' => array('id'),
    'indexes' => array(
         'name' => array(array('title', 10))),
  );

  $schema['guifi_devices'] = array(
    'fields' => array(
         'id' => array('type' => 'serial', 'size' => 'medium', 'not null' => TRUE),
         'nid' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE, 'comment' => 'foreign key to guifi_location(id)'),
         'nick' => array('type' => 'varchar', 'length' => '40', 'not null' => TRUE),
         'type' => array('type' => 'varchar', 'length' => '40', 'not null' => TRUE),
         'notification' => array('type' => 'varchar', 'length' => '1024', 'not null' => TRUE),
         'mac' => array('type' => 'varchar', 'length' => '20', 'not null' => TRUE, 'default' => '00:00:00:00:00:00'),
         'comment' => array('type' => 'text', 'size' => 'big', 'not null' => FALSE),
         'flag' => array('type' => 'varchar', 'length' => '40', 'not null' => TRUE, 'default' => 'Planned'),
         'extra' => array('type' => 'text', 'size' => 'big', 'not null' => FALSE, 'comment' => 'store variable data depending on guifi_devices(type)'),
         '' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE, 'comment' => 'Ip Server Logs'),
         'mid' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE, 'comment' => 'Model Id'),
         'fid' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE, '' => 'Firmware Id'),
         'graph_server' => array('type' => 'int',  'size' => 'medium' , 'not null' => TRUE, 'default' => 0, 'comment' => 'FK to guifi_services (SNPGraphs)'),
	 'logserver' => array('type' => 'varchar','length' => '60', 'not null' => TRUE, 'comment' => 'Ip Server Logs'), 
	 'last_online' => array('type' => 'int', 'not null' => TRUE, 'default' => 0, 'comment' => 'Last time that this device has been seen online'),
         'last_flag' => array('type' => 'varchar', 'length' => '40', 'not null' => TRUE, 'default' => 'N/A', 'comment' => 'N/A, Online, Offline...'),
         'ly_availability' => array('type' => 'numeric', 'precision' => '11', 'scale' => '2', 'not null' => FALSE, 'default' => NULL),
         'last_stats' => array('type' => 'int', 'not null' => TRUE, 'default' => 0, 'comment' => 'Last time that this device has been loaded with statistics'),
         'latency_avg' => array('type' => 'int',  'size' => 'small', 'not null' => TRUE, 'default' => 0, 'comment' => 'Average latency'),
         'latency_max' => array('type' => 'int',  'size' => 'small', 'not null' => TRUE, 'default' => 0, 'comment' => 'Maximum latency'),
         'user_created' => array('type' => 'int', 'not null' => TRUE, 'default' => 0),
         'user_changed' => array('type' => 'int', 'not null' => TRUE, 'default' => 0),
         'timestamp_created' => array('type' => 'int', 'not null' => TRUE, 'default' => 0),
         'timestamp_changed' => array('type' => 'int', 'not null' => TRUE, 'default' => 0)),
    'primary key' => array('id'),
    'unique keys' => array(
         'nick' => array('nick')),
  );

  $schema['guifi_links'] = array(
    'comment' => 'devices/interfaces linked, one row per peer joined by guifi_links(id)',
    'fields' => array(
         'id' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE),
         'nid' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE),
         'device_id' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE),
         'interface_id' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE),
         'ipv4_id' => array('type' => 'int', 'size' => 'tiny', 'not null' => TRUE),
         'link_type' => array('type' => 'varchar', 'length' => '40', 'not null' => TRUE),
         'routing' => array('type' => 'varchar', 'length' => '40', 'not null' => FALSE),
         'flag' => array('type' => 'varchar', 'length' => '40', 'not null' => TRUE, 'default' => 'Planned')),
    'primary key' => array('device_id', 'id'),
    'indexes' => array(
         'id' => array('id')),
  );

  $schema['guifi_interfaces'] = array(
    'comment' => 'describes interfaces (network connectors) at the devices',
    'fields' => array(
         'id' => array('type' => 'serial', 'size' => 'medium', 'not null' => TRUE),
         'device_id' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE, 'comment' => 'foreign key to guifi_devices(id)'),
         'radiodev_counter' => array('type' => 'int', 'size' => 'tiny', 'not null' => FALSE, 'comment' => 'if not NULL, foreign key to guifi_radios(radiodev_counter)'),
         'etherdev_counter' => array('type' => 'int', 'size' => 'tiny', 'not null' => FALSE, 'comment' => 'if not NULL, foreign key to guifi_radios(etherdev_counter)'),
         'interface_type' => array('type' => 'varchar', 'length' => '40', 'not null' => TRUE),
         'mac' => array('type' => 'varchar', 'length' => '20', 'not null' => TRUE, 'default' => '00:00:00:00:00:00')),
    'primary key' => array('device_id', 'id'),
    'indexes' =>  array('id' => array('id'))
  );

  $schema['guifi_radios'] = array(
    'comment' => 'describes wireless radios available on the guifi_devices',
    'fields' => array(
         'id' => array('type' => 'serial', 'size' => 'medium', 'not null' => TRUE,'comment' => 'primary key 1st column and foreign key to guifi_devices(id)'),
         'radiodev_counter' => array('type' => 'int', 'size' => 'tiny', 'not null' => TRUE, 'default' => 0, 'comment' => 'primary key 2nd column'),
         'etherdev_counter' => array('type' => 'int', 'size' => 'tiny', 'not null' => FALSE, 'comment' => ''),
         'nid' => array('comment' => 'foreign key to guifi_location(id)', 'type' => 'int', 'not null' => TRUE),
         'model_id' => array('type' => 'int', 'size' => 'small', 'not null' => TRUE),
         'ssid' => array('type' => 'varchar', 'length' => '128', 'not null' => TRUE, 'default' => ''),
         'mode' => array('type' => 'varchar', 'length' => '40', 'not null' => TRUE),
         'protocol' => array('type' => 'varchar', 'length' => '40', 'not null' => TRUE, 'default' => '802.11bg'),
         'channel' => array('type' => 'int',  'size' => 'small',  'not null' => FALSE),
         'antenna_angle' => array('type' => 'int', 'size' => 'small', 'not null' => FALSE, 'default' => 0),
         'antenna_gain' => array('type' => 'int', 'size' => 'tiny', 'not null' => FALSE),
         'antenna_azimuth' => array('type' => 'int', 'size' => 'small', 'not null' => FALSE, 'default' => 360),
         'antenna_mode' => array('type' => 'varchar', 'length' => '5', 'not null' => TRUE),
         'ly_mb_in' => array('type' => 'numeric', 'precision' => '10', 'scale' => '6', 'not null' => FALSE, 'default' => NULL),
         'ly_mb_out' => array('type' => 'numeric', 'precision' => '10', 'scale' => '6', 'not null' => FALSE, 'default' => NULL),
         'clients_accepted' => array('comment' => 'Yes, No', 'type' => 'varchar', 'length' => '5', 'not null' => TRUE, 'default' => 'Yes'),
        ),
    'primary key' => array('id', 'radiodev_counter'),
    'indexes' => array(
         'nid' => array('nid')),
  );

  $schema['guifi_types'] = array(
    'comment' => 'used on web dialogs to decode values or validate values',
    'fields' => array(
         'id' => array('type' => 'serial',  'size' => 'small', 'not null' => TRUE),
         'type' => array('type' => 'varchar', 'length' => '15', 'not null' => TRUE),
         'text' => array('type' => 'varchar', 'length' => '24', 'not null' => TRUE),
         'description' => array('type' => 'text', 'size' => 'big', 'not null' => TRUE),
         'relations' => array('type' => 'text', 'size' => 'big', 'not null' => FALSE)),
    'primary key' => array('type', 'id'),
    'indexes' => array(
         'text' => array('text')),
  );

  $schema['guifi_services'] = array(
    'comment' => 'store guifi services',
    'fields' => array(
         'id' => array('type' => 'serial', 'size' => 'medium', 'not null' => TRUE),
         'nick' => array('type' => 'varchar', 'length' => '40', 'not null' => TRUE, 'default' => ''),
         'service_type' => array('type' => 'varchar', 'length' => '40', 'not null' => TRUE, 'default' => ''),
         'zone_id' => array('type' => 'int', 'size' => 'medium', 'not null' => FALSE, 'comment' => 'foreign key to guifi_zone(id)'),
         'device_id' => array('type' => 'int', 'size' => 'medium', 'not null' => FALSE, 'comment' => 'foreign key to guifi_device(id)'),
         'notification' => array('type' => 'varchar', 'length' => '1024', 'not null' => FALSE),
         'status_flag' => array('type' => 'varchar', 'length' => '40', 'not null' => TRUE, 'default' => 'Planned'),
         'extra' => array('type' => 'text', 'size' => 'big', 'not null' => FALSE),
         'user_created' => array('type' => 'int', 'not null' => TRUE, 'default' => 0),
         'user_changed' => array('type' => 'int', 'not null' => FALSE),
         'timestamp_created' => array('type' => 'int', 'not null' => TRUE, 'default' => 0),
         'timestamp_changed' => array('type' => 'int', 'not null' => FALSE)),
    'primary key' => array('id'),
  );

  $schema['guifi_users'] = array(
    'comment' => 'stores user credentials assigned to nodes for proxy servers, or any other service',
    'fields' => array(
         'id' => array('type' => 'serial', 'size' => 'medium', 'unsigned' => TRUE, 'not null' => TRUE),
         'nid' => array('type' => 'int', 'size' => 'medium', 'unsigned' => TRUE, 'not null' => TRUE, 'default' => 0, 'comment' => 'foreign key to guifi_location(id)'),
         'services' => array('type' => 'text', 'size' => 'big', 'not null' => TRUE),
         'firstname' => array('type' => 'varchar', 'length' => '60', 'not null' => TRUE, 'default' => ''),
         'lastname' => array('type' => 'varchar', 'length' => '60', 'not null' => TRUE, 'default' => ''),
         'username' => array('type' => 'varchar', 'length' => '40', 'not null' => TRUE, 'default' => ''),
         'password' => array('type' => 'varchar', 'length' => '128', 'not null' => TRUE, 'default' => ''),
         'notification' => array('type' => 'varchar', 'length' => '1024', 'not null' => FALSE),
         'extra' => array('type' => 'text', 'size' => 'big', 'not null' => FALSE),
         'user_created' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE, 'default' => 0),
         'user_changed' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE, 'default' => 0),
         'timestamp_created' => array('type' => 'int', 'not null' => TRUE, 'default' => 0),
         'timestamp_changed' => array('type' => 'int', 'not null' => TRUE, 'default' => 0),
         'status' => array('type' => 'varchar', 'length' => 25, 'not null' => TRUE, 'default' => 'new', 'comment' => 'pending/approved/rejected'),
         'content_filters' => array('type' => 'text', 'size' => 'big', 'not null' => FALSE, 'default' => NULL)),
    'primary key' => array('id'),
    'unique keys' => array(
         'username' => array('username')),
  );

  $schema['guifi_ipv4'] = array(
    'fields' => array(
         'id' => array('type' => 'int', 'size' => 'tiny', 'not null' => TRUE, 'comment' => 'primary key 1st column, numbers the sequential order of each address into the same interface'),
         'interface_id' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE, 'default' => 0, 'comment' => 'primary key 2nd column and foreign key to guifi_interfaces(id)'),
         'ipv4' => array('type' => 'varchar', 'length' => '16', 'not null' => FALSE),
         'netmask' => array('type' => 'varchar', 'length' => '16', 'not null' => TRUE, 'default' => '255.255.255.0'),
         'ipv4_type' => array('type' => 'int', 'size' => 'tiny', 'not null' => TRUE, 'default' => 0),
         'zone_id' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE, 'default' => 0)),
    'primary key' => array('interface_id', 'id'),
    'unique keys' => array(
         'ipv4' => array('ipv4')),
  );

  $schema['guifi_manufacturer'] = array(
    'comment' => 'device manufacturers',
    'fields' => array(
         'fid' => array('type' => 'int',  'size' => 'small', 'not null' => TRUE),
         'name' => array('type' => 'varchar', 'length' => '40', 'not null' => TRUE, 'default' => ''),
         'url' => array('type' => 'varchar', 'length' => '40', 'not null' => FALSE),
         'notification' => array('type' => 'varchar', 'length' => '1024', 'not null' => TRUE, 'default' => ''),
         'user_created' => array('type' => 'int',  'size' => 'medium', 'not null' => TRUE, 'default' => 0),
         'user_changed' => array('type' => 'int',  'size' => 'medium', 'not null' => TRUE, 'default' => 0),
         'timestamp_created' => array('type' => 'int', 'not null' => TRUE, 'default' => 0),
         'timestamp_changed' => array('type' => 'int', 'not null' => TRUE, 'default' => 0)),
    'primary key' => array('fid'),
  );

  $schema['guifi_model'] = array(
    'comment' => 'device models',
    'fields' => array(
         'mid' => array('type' => 'int', 'size' => 'small', 'not null' => TRUE),
         'fid' => array('type' => 'int', 'size' => 'small', 'not null' => TRUE, 'default' => 0, 'comment' => 'foreign key to guifi_manufacturer(fid)'),
         'model' => array('type' => 'varchar', 'length' => '40', 'not null' => TRUE, 'default' => ''),
         'type' => array('type' => 'varchar', 'length' => '10', 'not null' => FALSE, 'comment' => 'Extern, PCI, PCMCIA'),
         'radiodev_max' => array('type' => 'int', 'size' => 'tiny', 'not null' => TRUE, 'default' => 1),
         'etherdev_max' => array('type' => 'int', 'size' => 'tiny', 'not null' => TRUE, 'default' => 1),
         'AP' => array('type' => 'varchar', 'length' => '5', 'not null' => FALSE, 'comment' => 'Si, No'),
         'virtualAP' => array('type' => 'varchar', 'length' => '5', 'not null' => TRUE, 'default' => 'No', 'comment' => 'Yes, No'),
         'client' => array('type' => 'varchar', 'length' => '5', 'not null' => FALSE, 'comment' => 'Si, No, Hack'),
         'interfaces' => array('type' => 'varchar', 'length' => '240', 'not null' => FALSE),
         'url' => array('type' => 'varchar', 'length' => '240', 'not null' => FALSE),
         'comments' => array('type' => 'varchar', 'length' => '240', 'not null' => FALSE),
         'supported' => array('type' => 'varchar', 'length' => '25', 'not null' => TRUE, 'default' => 'Yes', 'comment' => 'Yes, No'),
         'notification' => array('type' => 'varchar', 'length' => '1024', 'not null' => TRUE, 'default' => ''),
         'user_created' => array('type' => 'int',  'size' => 'medium', 'not null' => TRUE, 'default' => 0),
         'user_changed' => array('type' => 'int',  'size' => 'medium', 'not null' => TRUE, 'default' => 0),
         'timestamp_created' => array('type' => 'int', 'not null' => TRUE, 'default' => 0),
         'timestamp_changed' => array('type' => 'int', 'not null' => TRUE, 'default' => 0)),
    'primary key' => array('mid'),
  );

  $schema['guifi_dns_domains'] = array(
    'comment' => 'store guifi dns domains',
    'fields' => array(
      'id' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE),
      'sid' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE),
      'name' => array('type' => 'varchar', 'length' => '40', 'not null' => TRUE, 'default' => ''),
      'type' => array('type' => 'varchar', 'length' => '16', 'not null' => TRUE, 'default' => ''),
      'public' => array('type' => 'varchar', 'length' => '5', 'not null' => TRUE, 'default' => 'yes'),
      'ipv4' => array('type' => 'varchar', 'length' => '16', 'not null' => TRUE, 'default' => ''),
      'defipv4' => array('type' => 'varchar', 'length' => '16', 'not null' => TRUE, 'default' => ''),
      'defipv6' => array('type' => 'varchar', 'length' => '128', 'not null' => TRUE, 'default' => ''),
      'mname' => array('type' => 'varchar', 'length' => '32', 'not null' => TRUE, 'default' => ''),
      'scope' => array('type' => 'varchar', 'length' => '16', 'not null' => TRUE, 'default' => ''),
      'management' => array('type' => 'varchar', 'length' => '16', 'not null' => TRUE, 'default' => ''),
      'allow' => array('type' => 'varchar', 'length' => '24', 'not null' => TRUE, 'default' => ''),
      'externalmx' => array('type' => 'varchar', 'length' => '128', 'not null' => TRUE, 'default' => ''),
      'externalns' => array('type' => 'varchar', 'length' => '128', 'not null' => TRUE, 'default' => ''),
      'notification' => array('type' => 'varchar', 'length' => '1024', 'not null' => TRUE, 'default' => ''),
      'comment' => array('type' => 'text', 'size' => 'big', 'not null' => FALSE),
      'user_created' => array('type' => 'int', 'not null' => TRUE),
      'user_changed' => array('type' => 'int', 'not null' => TRUE),
      'timestamp_created' => array('type' => 'int', 'not null' => TRUE),
      'timestamp_changed' => array('type' => 'int', 'not null' => TRUE)),
    'primary key' => array('id'),
  );

  $schema['guifi_dns_hosts'] = array(
    'comment' => 'store guifi dns hosts',
    'fields' => array(
      'id' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE),
      'counter' => array('type' => 'int', 'size' => 'tiny', 'not null' => TRUE),
      'host' => array('type' => 'varchar', 'length' => '128', 'not null' => TRUE, 'default' => ''),
      'ipv4' => array('type' => 'varchar', 'length' => '16', 'not null' => TRUE, 'default' => ''),
      'ipv6' => array('type' => 'varchar', 'length' => '128', 'not null' => TRUE, 'default' => ''),
      'aliases' => array('type' => 'varchar', 'length' => '1024', 'not null' => TRUE, 'default' => ''),
      'options' => array('type' => 'varchar', 'length' => '1024', 'not null' => TRUE, 'default' => ''),
      'user_created' => array('type' => 'int', 'not null' => TRUE),
      'user_changed' => array('type' => 'int', 'not null' => TRUE),
      'timestamp_created' => array('type' => 'int', 'not null' => TRUE),
      'timestamp_changed' => array('type' => 'int', 'not null' => TRUE)),
    'primary key' => array('id', 'counter'),
  );

  $schema['guifi_api_tokens'] = array(
    'comment' => 'store guifi api tokens',
    'fields' => array(
      'uid' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE),
      'token' => array('type' => 'varchar', 'length' => '1024', 'not null' => TRUE, 'default' => ''),
      'created' => array('type' => 'int', 'not null' => TRUE),
      'rand_key' => array('type' => 'int', 'size' => 'medium', 'not null' => TRUE)),
    'primary key' => array('uid'),
  );

  return $schema;
}

function guifi_install() {

  drupal_install_schema('guifi');

  // --
  // -- interface types
  // -- relation describes MAC (related to base MAC)
  // --
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('1', 'interface', 'Lan', 'Device base address (Lan)', '0');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('2', 'interface', 'wLan/Lan', 'Device lan & wlan (bridged)', '2');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('3', 'interface', 'wLan', 'wireless lan', '2');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('4', 'interface', 'Wan', 'Wan', '1');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('5', 'interface', 'wds/p2p', 'P2P Wds', '2');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('6', 'interface', 'vlan', 'Virtual network over Lan', '0');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('7', 'interface', 'vwan', 'Virtual network over Wan', '1');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('8', 'interface', 'vwlan', 'Virtual network over wLan', '2');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('9', 'interface', 'vlan2', 'vlan #2 (plugged into port #2)', '4');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('10', 'interface', 'vlan3', 'vlan #3 (plugged into port #3)', '5');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('11', 'interface', 'vlan4', 'vlan #4 (plugged into port #4)', '6');");
  //db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('9999', 'interface', 'vlan1',   'vlan #1 (plugged into port #1)', '3');");

  // --
  // -- radio mode types
  // --
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('1', 'mode', 'ap', 'AP or AP with WDS', 'ap|client');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('2', 'mode', 'client', 'Wireless client', 'ap');");
  //db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('3', 'mode', 'bridge', 'Wireless Bridge', 'bridge');");
  //db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('4', 'mode', 'routedclient', 'Routed client',     'ap');");
  //db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('9999', 'mode', 'NAT Client', 'NAT Client', 'ap|client');");
  //db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('8888', 'mode', 'Routed Client', 'Routed Client', 'ap|client');");
  //db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('7777', 'mode', 'Bridged Client', 'Bridged  Client', 'ap|client');");

  // --
  // -- link types
  // --
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('1', 'link', 'cable', 'Cable', 'vlan|vwan|vwlan|vlan1|vlan2|vlan3|vlan4|Lan|wLan/Lan|Wan');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('2', 'link', 'tunnel', 'Tunnel', 'tunnel');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('3', 'link', 'bridge', 'Wireless Bridge', 'wLan/Lan|Lan');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('4', 'link', 'wds', 'Wireless WDS', 'wds/p2p');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('5', 'link', 'ap/client', 'Wireless AP/Client', 'Wan/wLan|wLan/Lan');");

  // --
  // -- device types
  // --
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('1', 'device', 'radio', 'Wireless device, like a router, bridge, AP...');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('2', 'device', 'phone', 'Voip handset, telephone');");
  db_query("-- INSERT INTO {guifi_types} (id, type, text, description) VALUES ('3', 'device', 'mobile', 'Mobile device. like a laptop or pda');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('4', 'device', 'server', 'Server computer');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('5', 'device', 'nat', 'Firewall, private Network behind a NAT');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('6', 'device', 'ADSL', 'ADSL router or device providing internet access');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('7', 'device', 'cam', 'Network camera. Live view.');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('8', 'device', 'generic', 'Any device that uses a public IP (PC, game console, laptop, pda..)');");

  // --
  // -- service types
  // --
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('1', 'service', 'AP', 'Wireless connectivity for end users');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('2', 'service', 'ADSL', 'Open ADSL-type internet access');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('3', 'service', 'Proxy', 'Internet access trough a proxy');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('4', 'service', 'DNS', 'Domain Name Server service');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('5', 'service', 'NTP', 'Network Time Protocol service');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('6', 'service', 'mail', 'Mail server');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('7', 'service', 'web', 'Web server');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('8', 'service', 'ftp', 'FTP or shared disk server');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('9', 'service', 'p2p', 'Peer 2 Peer server');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('10', 'service', 'asterisk', 'Asterisk VoIP PBX server');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('11', 'service', 'radio', 'Radio broadcast');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('12', 'service', 'tv', 'TV broadcast');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('13', 'service', 'irc', 'IRC (chat) server');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('14', 'service', 'IM', 'Instant Messaging, jabber server');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('15', 'service', 'cam', 'Network camera with live view.');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('16', 'service', 'svn', 'Subversion/CVS repository.');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('17', 'service', 'meteo', 'Weather station.');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('18', 'service', 'apt-cache', 'Linux distribution cache.');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('19', 'service', 'wol', 'Wake-on-lan');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('20', 'service', 'iperf', 'iperf bandwidth test');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('21', 'service', 'teamspeak', 'TeamSpeak Server - Voice conference');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('22', 'service', 'games', 'Generic games server');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('23', 'service', 'SNPgraphs', 'SNP graph server');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('24', 'service', 'Streaming', 'Videoconferènia i/o Streaming');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('25', 'service', 'VPN', 'Virtual Private Network');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('26', 'service', 'LDAP', 'LDAP Server');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('27', 'service', 'LogServer', 'Ip log Server');");


  // --
  // -- status flag types
  // --
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('1', 'status', 'Planned',  'Planned');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('2', 'status', 'Reserved', 'Reserved');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('3', 'status', 'Building', 'Building');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('4', 'status', 'Testing',  'Testing');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('5', 'status', 'Working',  'Online');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('6', 'status', 'Dropped',  'Dropped');");

  // --
  // -- protocol types
  // --
  update_sql("DELETE FROM `guifi_types` WHERE `type` = 'protocol'");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('1', 'protocol', '802.11a', '802.11a (1-54Mbps - 5Ghz)');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('2', 'protocol', '802.11b', '802.11b (1-11Mbps - 2.4Ghz)');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('3', 'protocol', '802.11g', '802.11g (2-54Mbps - 2.4Ghz)');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('4', 'protocol', '802.11n', '802.11n - MIMO (1-125Mbps - 2.4/5Ghz)');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('5', 'protocol', 'WiMAX', '802.16a - WiMAX (1-125Mbps - 2-8Ghz)');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('6', 'protocol', 'legacy', 'legacy/proprietary protocol');");

  // --
  // -- firmware types
  // --
  update_sql("DELETE FROM `guifi_types` WHERE `type` = 'firmware'");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('1', 'firmware', 'n/a', 'not available', NULL);");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('2', 'firmware', 'Alchemy', 'Alchemy from sveasoft', 'WRT54Gv1-4|WRT54GSv1-2');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('3', 'firmware', 'Talisman', 'Talisman from sveasoft', 'WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('4', 'firmware', 'DD-WRTv23', 'DD-WRTv23Beta2 from BrainSlayer', 'WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|Asus WL-500xx|WHR-HP-G54, WHR-G54S|NanoStation2|NanoStation5|NanoStation Loco2|NanoStation Loco5|Bullet2|Bullet5|RouterStation|RouterStationPro|Avila GW2348-4');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('5', 'firmware', 'DD-guifi', 'DD-guifi from Miquel Martos', 'WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|WHR-HP-G54, WHR-G54S');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('6', 'firmware', 'RouterOSv2.9', 'RouterOS 2.9 from Mikrotik', 'Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153|Supertrasto guifiBUS guifi.net');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('7', 'firmware', 'whiterussian', 'OpenWRT-whiterussian', 'WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|Wrap|Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('8', 'firmware', 'kamikaze', 'OpenWRT kamikaze',
   'WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|Meraki/Fonera|Wrap|Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153|Supertrasto guifiBUS guifi.net|NanoStation2|NanoStation5|NanoStation Loco2|NanoStation Loco5|Bullet2|Bullet5|RouterStation|RouterStationPro|Avila GW2348-4|Asus WL-500xx|Alix1|Alix2|Alix3');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('9', 'firmware', 'Freifunk-BATMAN', 'OpenWRT-Freifunk-v1.6.16 with B.A.T.M.A.N', 'WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|WHR-HP-G54, WHR-G54S');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('10', 'firmware', 'RouterOSv3.x', 'RouterOS 3.x from Mikrotik', 'Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153|Supertrasto guifiBUS guifi.net|Routerboard 600|Routerboard 411|Routerboard 333|Routerboard 433');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('11', 'firmware', 'AirOsv221', 'Ubiquti AirOs 2.2.1', 'NanoStation2|NanoStation5|NanoStation Loco2|NanoStation Loco5|Bullet2|Bullet5')");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('12', 'firmware', 'Freifunk-OLSR', 'OpenWRT-Freifunk-v1.6.16 with OLSR', 'WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|WHR-HP-G54, WHR-G54S');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('13', 'firmware', 'AirOsv30', 'Ubiquti AirOs 3.0', 'NanoStation2|NanoStation5|NanoStation Loco2|NanoStation Loco5|Bullet2|Bullet5')");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('14', 'firmware', 'RouterOSv4.0+', 'RouterOS 4.0 to 4.6 from Mikrotik', 'Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153|Supertrasto guifiBUS guifi.net|Routerboard 600|Routerboard 411|Routerboard 333|Routerboard 433|Routerboard 800');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('15', 'firmware', 'AirOsv52', 'Ubiquti AirOs 5.2', 'AirMaxM2 Rocket/Nano/Loco|AirMaxM5 Rocket/Nano/Loco|AirMaxM2 Bullet/PwBrg/AirGrd/NanoBr|AirMaxM5 Bullet/PwBrg/AirGrd/NanoBr');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('16', 'firmware', 'RouterOSv4.7+', 'RouterOS 4.7 or newer from Mikrotik', 'Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153|Supertrasto guifiBUS guifi.net|Routerboard 600|Routerboard 411|Routerboard 333|Routerboard 433|Routerboard 800|Routerboard 750/750G');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('17', 'firmware', 'GuifiStationOS1.0', 'GuifiStationOS v1.0 from Setup Informatica', 'GuifiStation2|GuifiStation5');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('18', 'firmware', 'gsffirm', 'Firmware de GràciaSenseFils MANET', 'Alix2|Alix3|WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|Asus WL-500xx|WHR-HP-G54, WHR-G54S|NanoStation2|NanoStation5|NanoStation Loco2|NanoStation Loco5|Bullet2|Bullet5|RouterStation|RouterStationPro|Meraki/Fonera');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('19', 'firmware', 'RouterOSv5.x', 'RouterOS 5.x or newer from Mikrotik', 'Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153|Supertrasto guifiBUS guifi.net|Routerboard 600|Routerboard 411|Routerboard 333|Routerboard 433|Routerboard 800|Routerboard 750/750G');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('20', 'firmware', 'AirOsv3.6+', 'Ubiquti AirOs 3.6+', 'NanoStation2|NanoStation5|NanoStation Loco2|NanoStation Loco5|Bullet2|Bullet5')");
  
  // --
  // -- antenna types
  // --
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('1', 'antenna', '0', 'original/integrated');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('2', 'antenna', '360', 'omnidirectional');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('3', 'antenna', '6', 'yagi/directive');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('4', 'antenna', '90', 'sector 90 degrees');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('5', 'antenna', '120', 'sector 120 degrees');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('6', 'antenna', '90', 'patch 90 degrees');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('7', 'antenna', '60', 'patch 60 degrees');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('8', 'antenna', '30', 'patch 30 degrees');");

  // --
  // -- orientation (bearing) types
  // --
/*
-- INSERT INTO {guifi_types} (id, type, text, description) VALUES ('bearing', 'N',   'North');
-- INSERT INTO {guifi_types} (id, type, text, description) VALUES ('bearing', 'NE',  'North east');
-- INSERT INTO {guifi_types} (id, type, text, description) VALUES ('bearing', 'E',   'East');
-- INSERT INTO {guifi_types} (id, type, text, description) VALUES ('bearing', 'SE',  'South east');
-- INSERT INTO {guifi_types} (id, type, text, description) VALUES ('bearing', 'S',   'South');
-- INSERT INTO {guifi_types} (id, type, text, description) VALUES ('bearing', 'SW',  'South west');
-- INSERT INTO {guifi_types} (id, type, text, description) VALUES ('bearing', 'W',   'West');
-- INSERT INTO {guifi_types} (id, type, text, description) VALUES ('bearing', 'NW',  'North east');
-- INSERT INTO {guifi_types} (id, type, text, description) VALUES ('bearing', 'all', '360 degrees');
*/
  // --
  // -- Time zones
  // --

  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('1', 'tz', '-12 1 0', '(GMT-12:00) Kwajalein');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('2', 'tz', '-11 1 0', '(GMT-11:00) Midway Island, Samoa');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('3', 'tz', '-10 1 0', '(GMT-10:00) Hawaii');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('4', 'tz', '-09 1 1', '(GMT-09:00) Alaska');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('5', 'tz', '-08 1 1', '(GMT-08:00) Pacific Time (USA &amp; Canada)');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('6', 'tz', '-07 1 0', '(GMT-07:00) Arizona');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('7', 'tz', '-07 2 1', '(GMT-07:00) Mountain Time (USA &amp; Canada)');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('8', 'tz', '-06 1 0', '(GMT-06:00) Mexico');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('9', 'tz', '-06 2 1', '(GMT-06:00) Central Time (USA &amp; Canada)');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('10', 'tz', '-05 1 0', '(GMT-05:00) Indiana East, Colombia, Panama');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('11', 'tz', '-05 2 1', '(GMT-05:00) Eastern Time (USA &amp; Canada)');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('12', 'tz', '-04 1 0', '(GMT-04:00) Bolivia, Venezuela');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('13', 'tz', '-04 2 1', '(GMT-04:00) Atlantic Time (Canada), Brazil West');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('14', 'tz', '-03.5 1 1', '(GMT-03:30) Newfoundland');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('15', 'tz', '-03 1 0', '(GMT-03:00) Guyana');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('16', 'tz', '-03 2 1', '(GMT-03:00) Brazil East, Greenland');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('17', 'tz', '-02 1 0', '(GMT-02:00) Mid-Atlantic');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('18', 'tz', '-01 1 2', '(GMT-01:00) Azores');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('19', 'tz', '+00 1 0', '(GMT) Gambia, Liberia, Morocco');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('20', 'tz', '+00 2 2', '(GMT) England');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('21', 'tz', '+01 1 0', '(GMT+01:00) Tunisia');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('22', 'tz', '+01 2 2', '(GMT+01:00) Gurb, France, Germany, Italy');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('23', 'tz', '+02 1 0', '(GMT+02:00) South Africa');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('24', 'tz', '+02 2 2', '(GMT+02:00) Greece, Ukraine, Romania, Turkey');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('25', 'tz', '+03 1 0', '(GMT+03:00) Iraq, Jordan, Kuwait');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('26', 'tz', '+04 1 0', '(GMT+04:00) Armenia');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('27', 'tz', '+05 1 0', '(GMT+05:00) Pakistan, Russia');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('28', 'tz', '+06 1 0', '(GMT+06:00) Bangladesh, Russia');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('29', 'tz', '+07 1 0', '(GMT+07:00) Thailand, Russia');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('30', 'tz', '+08 1 0', '(GMT+08:00) China, Hong Kong, Australia Western');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('31', 'tz', '+08 2 0', '(GMT+08:00) Singapore, Taiwan, Russia');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('32', 'tz', '+09 1 0', '(GMT+09:00) Japan, Korea');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('33', 'tz', '+09.5 1 4', '(GMT+09:30) Australia Central');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('34', 'tz', '+10 1 0', '(GMT+10:00) Guam, Russia');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('35', 'tz', '+10 2 4', '(GMT+10:00) Australia Eastern');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('36', 'tz', '+11 1 0', '(GMT+11:00) Solomon Islands');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('37', 'tz', '+12 1 0', '(GMT+12:00) Fiji');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('38', 'tz', '+12 2 4', '(GMT+12:00) New Zealand');");

  // --
  // -- Wireless Channels
  // --
  update_sql("DELETE FROM `guifi_types` WHERE `type` = 'channel'");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('1', 'channel', '0', 'Auto 2.4GHz', '802.11b|802.11g|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('2', 'channel', '1', '1 - 2412 MHz', '802.11b|802.11g|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('3', 'channel', '2', '2 - 2417 MHz', '802.11b|802.11g|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('4', 'channel', '3', '3 - 2422 MHz', '802.11b|802.11g|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('5', 'channel', '4', '4 - 2422 MHz', '802.11b|802.11g|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('6', 'channel', '5', '5 - 2432 MHz', '802.11b|802.11g|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('7', 'channel', '6', '6 - 2437 MHz', '802.11b|802.11g|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('8', 'channel', '7', '7 - 2442 MHz', '802.11b|802.11g|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('9', 'channel', '8', '8 - 2447 MHz', '802.11b|802.11g|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('10', 'channel', '9', '9 - 2452 MHz', '802.11b|802.11g|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('11', 'channel', '10', '10 - 2457 MHz', '802.11b|802.11g|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('12', 'channel', '11', '11 - 2462 MHz', '802.11b|802.11g|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('13', 'channel', '12', '12 - 2467 MHz', '802.11b|802.11g|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('14', 'channel', '13', '13 - 2472 MHz', '802.11b|802.11g|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('15', 'channel', '14', '14 - 2477 MHz', '802.11b|802.11g|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('16', 'channel', '5000', 'Auto 5GHz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('17', 'channel', '5180', '36 - 5180MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('18', 'channel', '5200', '40 - 5200MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('19', 'channel', '5220', '44 - 5220MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('20', 'channel', '5240', '48 - 5240MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('21', 'channel', '5260', '52 - 5260MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('22', 'channel', '5280', '56 - 5280MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('23', 'channel', '5300', '60 - 5300MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('24', 'channel', '5320', '64 - 5320MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('25', 'channel', '5500', '100 - 5500MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('26', 'channel', '5520', '104 - 5520MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('27', 'channel', '5540', '108 - 5540MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('28', 'channel', '5560', '112 - 5560MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('29', 'channel', '5580', '116 - 5580MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('30', 'channel', '5600', '120 - 5600MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('31', 'channel', '5620', '124 - 5620MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('32', 'channel', '5640', '128 - 5640MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('33', 'channel', '5660', '132 - 5660MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('34', 'channel', '5680', '136 - 5680MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('35', 'channel', '5700', '140 - 5700MHz - 20Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('36', 'channel', '5185', '37! - 5185MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('37', 'channel', '5190', '38! - 5190MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('38', 'channel', '5195', '39! - 5195MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('39', 'channel', '5205', '41! - 5205MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('40', 'channel', '5210', '42! - 5210MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('41', 'channel', '5215', '43! - 5215MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('42', 'channel', '5225', '45! - 5225MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('43', 'channel', '5230', '46! - 5230MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('44', 'channel', '5235', '47! - 5235MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('45', 'channel', '5245', '49! - 5245MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('46', 'channel', '5250', '50! - 5250MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('47', 'channel', '5255', '51! - 5255MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('48', 'channel', '5265', '53! - 5265MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('49', 'channel', '5270', '54! - 5270MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('50', 'channel', '5275', '55! - 5275MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('51', 'channel', '5285', '57! - 5285MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('52', 'channel', '5290', '58! - 5290MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('53', 'channel', '5295', '59! - 5295MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('54', 'channel', '5305', '61! - 5305MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('55', 'channel', '5310', '62! - 5310MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('56', 'channel', '5315', '63! - 5315MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('57', 'channel', '5505', '101! - 5505MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('58', 'channel', '5510', '102! - 5510MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('59', 'channel', '5515', '103! - 5515MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('60', 'channel', '5525', '105! - 5525MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('61', 'channel', '5530', '106! - 5530MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('62', 'channel', '5535', '107! - 5535MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('63', 'channel', '5545', '109! - 5545MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('64', 'channel', '5550', '110! - 5550MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('65', 'channel', '5555', '111! - 5555MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('66', 'channel', '5565', '113! - 5565MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('67', 'channel', '5570', '114! - 5570MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('68', 'channel', '5575', '115! - 5575MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('69', 'channel', '5585', '117! - 5585MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('70', 'channel', '5590', '118! - 5590MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('71', 'channel', '5595', '119! - 5595MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('72', 'channel', '5605', '121! - 5605MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('73', 'channel', '5610', '122! - 5610MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('74', 'channel', '5615', '123! - 5615MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('75', 'channel', '5625', '125! - 5625MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('76', 'channel', '5630', '126! - 5630MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('77', 'channel', '5635', '127! - 5635MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('78', 'channel', '5645', '129! - 5645MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('79', 'channel', '5650', '130! - 5650MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('80', 'channel', '5655', '131! - 5655MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('81', 'channel', '5665', '133! - 5665MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('82', 'channel', '5670', '134! - 5670MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('83', 'channel', '5675', '135! - 5675MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('84', 'channel', '5685', '137! - 5685MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('85', 'channel', '5690', '138! - 5690MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('86', 'channel', '5695', '139! - 5695MHz - 20Mhz/5Mhz', '802.11a|802.11n');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('87', 'channel', '0000', 'Auto 2-8GHz', 'WiMAX');");

  // --
  // -- Routing methods
  // -- Relations contains supported firmwares
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('1', 'routing', 'n/a', 'None', '');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('2', 'routing', 'Static', 'Static routing', '');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('3', 'routing', 'Gateway', 'Gateway to AP', '');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('4', 'routing', 'OSPF', 'OSPF', 'Alchemy|Talisman|DD-WRTv23|DD-guifi|RouterOSv2.9|RouterOSv3.x');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('5', 'routing', 'BGP', 'BGP', 'Alchemy|Talisman|DD-WRTv23|DD-guifi|RouterOSv2.9|RouterOSv3.x');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('6', 'routing', 'OLSR', 'OLSR', '');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('7', 'routing', 'OLSR-NG', 'OLSR-NG', '');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('8', 'routing', 'BATMAN', 'BATMAN', '');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('9', 'routing', 'RIP', 'RIP', '');");


  // --
  // -- ad-hoc dynamic protocols
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('1', 'adhoc', 'OLSR', 'ad-hoc mesh - OLSR', 'kamikaze|freifunk-OLSR');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('2', 'adhoc', 'OLSR-NG', 'ad-hoc mesh - OLSR-NG', 'kamikaze');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('3', 'adhoc', 'BATMAN', 'ad-hoc mesh - BATMAN', 'kamikaze|freifunk-BATMAN');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('4', 'adhoc', 'RouterOS', 'ad-hoc mesh - RouterOS', 'RouterOSv3.x');");

  // Antenna Gain Types
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('1', 'antenna_gain', '5', '5', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('2', 'antenna_gain', '6', '6', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('3', 'antenna_gain', '7', '7', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('4', 'antenna_gain', '8', '8', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('5', 'antenna_gain', '9', '9', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('6', 'antenna_gain', '10', '10', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('7', 'antenna_gain', '11', '11', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('8', 'antenna_gain', '12', '12', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('9', 'antenna_gain', '13', '13', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('10', 'antenna_gain', '14', '14', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('11', 'antenna_gain', '15', '15', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('12', 'antenna_gain', '16', '16', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('13', 'antenna_gain', '17', '17', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('14', 'antenna_gain', '18', '18', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('15', 'antenna_gain', '19', '19', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('16', 'antenna_gain', '20', '20', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('17', 'antenna_gain', '21', '21', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('18', 'antenna_gain', '22', '22', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('19', 'antenna_gain', '23', '23', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('20', 'antenna_gain', '24', '24', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('21', 'antenna_gain', '25', '25', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('22', 'antenna_gain', '26', '26', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('23', 'antenna_gain', '27', '27', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('24', 'antenna_gain', '28', '28', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('25', 'antenna_gain', '29', '29', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('26', 'antenna_gain', '30', '30', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('27', 'antenna_gain', '31', '31', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('28', 'antenna_gain', '32', '32', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('29', 'antenna_gain', '33', '33', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('30', 'antenna_gain', '34', '34', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('31', 'antenna_gain', '35', '35', NULL);");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('32', 'antenna_gain', '36', '36', '');");
  db_query("INSERT INTO `guifi_types` (`id`, `type`, `text`, `description`, `relations`) VALUES ('33', 'antenna_gain', 'more...', 'more...', NULL);");

  // --
  // -- Volcant dades de la taula guifi_manufacturer
  // --
  update_sql("TRUNCATE guifi_manufacturer");
  db_query("INSERT INTO {guifi_manufacturer} VALUES (1, 'Other', NULL);");
  db_query("INSERT INTO {guifi_manufacturer} VALUES (2, 'Linksys', 'http://www.linksys.com');");
  db_query("INSERT INTO {guifi_manufacturer} VALUES (8, 'Mikrotik', 'http://mikrotik.com');");
  db_query("INSERT INTO {guifi_manufacturer} VALUES (9, 'Buffalo', 'http://www.buffalotech.com');");
  db_query("INSERT INTO {guifi_manufacturer} VALUES (10, 'Ubiquiti', 'http://www.ubnt.com');");
  db_query("INSERT INTO {guifi_manufacturer} VALUES (11, 'Meraki', 'http://meraki.com');");
  db_query("INSERT INTO {guifi_manufacturer} VALUES (12, 'Gateworks', 'http://www.gateworks.com');");
  db_query("INSERT INTO {guifi_manufacturer} VALUES (13, 'Asus', 'http://asus.com');");
  db_query("INSERT INTO {guifi_manufacturer} VALUES (14, 'Pccengines', 'http://www.pcengines.ch');");
  db_query("INSERT INTO {guifi_manufacturer} VALUES (15, 'Setup Informatica', 'http://www.setup.cat');");
  // --
  // -- guifi_model
  // --
  update_sql("TRUNCATE guifi_model");
  db_query("INSERT INTO `guifi_model` (`mid`, `fid`, `model`, `type`, `radiodev_max`, `etherdev_max`, `potencia_max`, `AP`, `virtualAP`, `client`, `interfaces`, `url`, `comments`, `supported`, `notification`, `user_created`, `user_changed`, `timestamp_created`, `timestamp_changed`) VALUES
(3, 1, 'Other', NULL, 1, 1, NULL, 'Yes', 'No', 'Yes', 'wLan/Lan', 'none', 'To be used for unknown or not listed devices', 'Yes', '', 0, 0, 0, 0),
(1, 2, 'WRT54Gv1-4', 'Extern', 1, 1, 251, 'Si', 'No', 'Hack', 'wLan/Lan|vlan|vlan2|vlan3|vlan4|Wan', 'http://www.linksys.com/products/product.', 'El canvi de potència, mode client i WDS, via hack.\r\nHacks disponibles: sveasoft (Satori, Alchemy...), OpenWRT...', 'Yes', '', 0, 0, 0, 0),
(15, 9, 'WHR-HP-G54, WHR-G54S', 'Extern', 1, 1, 251, 'No', '', 'Hack', 'wLan/Lan|vlan|vlan2|vlan3|vlan4|Wan', 'http://www.buffalo-technology.com/products/product-detail.php?productid=124&categoryid=28', 'El canvi de potència, mode client i WDS, via hack.', 'Yes', '', 0, 0, 0, 0),
(16, 2, 'WRT54GL', 'Extern', 1, 1, 251, 'No', '', 'Hack', 'wLan/Lan|vlan|vlan2|vlan3|vlan4|Wan', 'http://www.linksys.com/products/product.', 'El canvi de potència, mode client i WDS, via hack.\r\nHacks disponibles: sveasoft (Satori, Alchemy...), OpenWRT, DD-WRT, ...', 'Yes', '', 0, 0, 0, 0),
(17, 2, 'WRT54GSv1-2', 'Extern', 1, 1, 251, 'No', '', 'Hack', 'wLan/Lan|vlan2|vlan3|vlan4|Wan', 'http://www.linksys.com/products/product.', 'El canvi de potència, mode client i WDS, via hack.\r\nHacks disponibles: sveasoft (Satori, Alchemy...), OpenWRT, DD-WRT, ...', 'Yes', '', 0, 0, 0, 0),
(18, 2, 'WRT54GSv4', 'Extern', 1, 1, 251, 'No', '', 'Hack', 'wLan/Lan|vlan|vlan2|vlan3|vlan4|Wan', 'http://www.linksys.com/products/product.', 'El canvi de potència mode client i WDS, via hack.\r\nHacks disponibles: sveasoft (Satori, Alchemy...), OpenWRT, DD-WRT, ...', 'Yes', '', 0, 0, 0, 0),
(19, 8, 'Routerboard 532', NULL, 6, 1, 400, 'Si', 'Yes', 'Si', 'wLan/Lan|ether2|ether3|ether4|ether5|ether6|ether7|ether8|ether9', 'http://www.routerboard.com', NULL, 'Yes', '', 0, 0, 0, 0),
(20, 8, 'Routerboard 133C', NULL, 1, 1, 400, 'Si', 'Yes', 'Si', 'wLan/Lan', 'http://www.routerboard.com', NULL, 'Yes', '', 0, 0, 0, 0),
(21, 8, 'Routerboard 133', NULL, 3, 1, 400, 'Si', 'Yes', 'Si', 'wLan/Lan|ether2|ether3', 'http://www.routerboard.com', NULL, 'Yes', '', 0, 0, 0, 0),
(22, 8, 'Routerboard 112', NULL, 2, 1, 400, 'Si', 'Yes', 'Si', 'wLan/Lan', 'http://www.routerboard.com', NULL, 'Yes', '', 0, 0, 0, 0),
(23, 8, 'Routerboard 153', NULL, 3, 1, 400, 'Si', 'Yes', 'Si', 'wLan/Lan|ether2|ether3|ether4|ether5', 'http://www.routerboard.com', NULL, 'Yes', '', 0, 0, 0, 0),
(24, 8, 'Supertrasto guifiBUS guifi.net', NULL, 24, 1, 400, 'Si', 'Yes', 'Si', 'wLan/Lan|ether2|ether3|ether4|ether5', 'http://www.routerboard.com', NULL, 'Yes', '', 0, 0, 0, 0),
(25, 10, 'NanoStation2', 'Extern', 1, 1, 400, 'No', 'No', 'Si', 'Wan', 'http://ubnt.com/products/ns2.php', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(26, 10, 'NanoStation5', 'Extern', 1, 1, 400, 'No', 'No', 'Si', 'Wan', 'http://ubnt.com/products/ns5.php', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(27, 8, 'Routerboard 600', 'Extern', 8, 1, 400, 'Si', 'Si', 'Si', 'wLan/Lan|ether2|ether3', 'http://www.routerboard.com', NULL, 'Yes', '', 0, 0, 0, 0),
(28, 8, 'Routerboard 333', NULL, 6, 1, 400, 'Si', 'Yes', 'Si', 'wLan/Lan|ether2|ether3', 'http://www.routerboard.com', NULL, 'Yes', '', 0, 0, 0, 0),
(29, 8, 'Routerboard 411', NULL, 6, 1, 400, 'Si', 'Yes', 'Si', 'wLan/Lan', 'http://www.routerboard.com', NULL, 'Yes', '', 0, 0, 0, 0),
(30, 11, 'Meraki/Fonera', 'Extern', 1, 1, 60, 'Si', 'Yes', 'Si', 'wLan/Lan', 'http://meraki.com', NULL, 'Yes', '', 0, 0, 0, 0),
(31, 8, 'Routerboard 433', NULL, 6, 1, 400, 'Si', 'Yes', 'Si', 'wLan/Lan|ether2|ether3', 'http://www.routerboard.com', NULL, 'Yes', '', 0, 0, 0, 0),
(32, 10, 'LiteStation2', 'Extern', 1, 1, 400, 'No', 'No', 'Si', 'Wan', 'http://ubnt.com/products/ls2.php', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(33, 10, 'LiteStation5', 'Extern', 1, 1, 400, 'No', 'No', 'Si', 'Wan', 'http://ubnt.com/products/ls5.php', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(34, 10, 'NanoStation Loco2', 'Extern', 1, 1, 400, 'No', 'No', 'Si', 'Wan', 'http://www.ubnt.com/products/loco.php', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(35, 10, 'NanoStation Loco5', 'Extern', 1, 1, 400, 'No', 'No', 'Si', 'Wan', 'http://www.ubnt.com/products/loco.php', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(36, 10, 'Bullet2', 'Extern', 1, 1, 400, 'No', 'No', 'Si', 'Wan', 'http://www.ubnt.com/products/loco.php', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(37, 10, 'Bullet5', 'Extern', 1, 1, 400, 'No', 'No', 'Si', 'Wan', 'http://www.ubnt.com/products/loco.php', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(38, 10, 'RouterStation', 'Extern', 4, 1, 400, 'No', 'No', 'Si', 'Wan', 'http://ubnt.com/products/ls5.php', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(39, 12, 'Avila GW2348-4', 'Extern', 4, 1, 400, 'No', 'No', 'Si', 'Wan', 'http://www.gateworks.com/products/avila/gw2348-4.php', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(40, 13, 'Asus WL-500xx', 'Extern', 1, 1, 400, 'No', 'No', 'Si', 'Wan', 'http://asus.com/products.aspx?l1=29&l2=172&l3=743&l4=60&model=1277&modelmenu=1', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(41, 14, 'Alix1', 'Extern', 5, 1, 400, 'No', 'No', 'Si', 'wLan/Lan|eth0|eth1|eth2', 'http://www.pcengines.ch/alix1d.htm', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(42, 14, 'Alix2', 'Extern', 2, 1, 400, 'No', 'No', 'Si', 'wLan/Lan|eth0|eth1|eth2', 'http://www.pcengines.ch/alix2d.htm', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(43, 14, 'Alix3', 'Extern', 2, 1, 400, 'No', 'No', 'Si', 'wLan/Lan|eth0|eth1|eth2', 'http://www.pcengines.ch/alix3d.htm', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(44, 8, 'Routerboard 800', NULL, 8, 1, 400, 'Si', 'Yes', 'Si', 'wLan/Lan|ether2|ether3|ether4|ether5|ether6|ether7|ether8|ether9', 'http://www.routerboard.com', NULL, 'Yes', '', 0, 0, 0, 0),
(45, 10, 'AirMaxM2 Rocket/Nano/Loco', 'Extern', 1, 1, 100, 'Yes', 'No', 'Si', 'eth0|ath0', 'http://ubnt.com/airmax', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(46, 10, 'AirMaxM5 Rocket/Nano/Loco', 'Extern', 1, 1, 100, 'Yes', 'No', 'Si', 'eth0|ath0', 'http://ubnt.com/airmax', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(47, 10, 'AirMaxM2 Bullet/PwBrg/AirGrd/NanoBr', 'Extern', 1, 1, 100, 'Yes', 'No', 'Si', 'eth0|ath0', 'http://ubnt.com/airmax', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(48, 10, 'AirMaxM5 Bullet/PwBrg/AirGrd/NanoBr', 'Extern', 1, 1, 100, 'Yes', 'No', 'Si', 'eth0|ath0', 'http://ubnt.com/airmax', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(49, 15, 'GuifiStation2', 'Extern', 1, 1, 100, 'Yes', 'No', 'Si', 'eth0|ath0', 'http://tienda.setupinformatica.com/wac/detalle.php?codigo=CPEGS2', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(50, 15, 'GuifiStation5', 'Extern', 1, 1, 100, 'Yes', 'No', 'Si', 'eth0|ath0', 'http://tienda.setupinformatica.com/wac/detalle.php?codigo=CPEGS5', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(51, 10, 'RouterStationPro', 'Extern', 4, 1, 400, 'No', 'No', 'Si', 'Wan', 'http://ubnt.com/rspro', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(52, 8, 'Routerboard 750/G', 'Extern', 0, 5, 400, 'Yes', 'Yes', 'Yes', 'Lan/Lan|ether1|ether2|ether3|ether4|ether5', 'http://www.routerboard.com/pricelist.php?showProduct=90', 'Permet Firmwares de tercers', 'Yes', '', 0, 0, 0, 0),
(53, 8, 'Routerboard SXT 5HnD', NULL, 1, 1, NULL, 'Yes', 'Yes', 'Yes', 'wlan1|ether1', 'http://www.routerboard.com/index.php?showProduct=108', NULL, 'Yes', '', 0, 0, 0, 0),
(54, 8, 'Routerboard 1100', NULL, 0, 13, NULL, 'Yes', 'No', 'Yes', 'Lan/Lan|ether1|ether2|ether3|ether4|ether5|ether6|ether7|ether8|ether9|ether10|ether11|ether12|ether13', 'http://www.routerboard.com/index.php?showProduct=98', NULL, 'Yes', '', 0, 0, 0, 0);");

  // --
  // -- user status types
  // --
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('1', 'user_status', 'New',  'New');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('2', 'user_status', 'Pending',  'Pending');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('3', 'user_status', 'Approved', 'Approved');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('4', 'user_status', 'Rejected', 'Rejected');");

  // --
  // -- content filter types
  // --hidden
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('1', 'filter', 'porn',  'Porn & explicit sex content');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('2', 'filter', 'violence', 'Violence & Aggressive content');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('3', 'filter', 'downloads', 'Downloads, file-sharing...');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('4', 'filter', 'drugs',  'Drugs');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('5', 'filter', 'video', 'Audio & Video sites');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('6', 'filter', 'gambling', 'Gambling');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('7', 'filter', 'hacking',  'Illegal hacking & cracking');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('8', 'filter', 'mail', 'Email & webmail sites');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('9', 'filter', 'ads', 'Advertising');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('10', 'filter', 'proxy',  'External proxys');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('11', 'filter', 'redirect', 'Redirectors');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('12', 'filter', 'spyware', 'Spyware');");
  db_query("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('13', 'filter', 'cracks', 'Illegal warez exchange, cracks...');");

}

// --
// This new release can be installed in a clean database.
// But updates 1 and 2 are necessary if it is installed
// on the old database that contains data for migrating purposes.
// Please, skip updates 1 and 2 if you work on a clean database.
// These updates will be commentED when the new release is published.
// --
// During development period, please create updates indicating the number of SVN revision.
// (Ex: guifi_update_XXX) Where XXX equals the number of revision.
// We move these updates to updates 1 and 2 when the process is necessary.
// --

//
// Database Updates!
//
/*
function guifi_update_1() {
  $items = array();

// Drop obsolete tables
    $items[] = update_sql("DROP TABLE `guifi_blocks`");

// Update some fields with a new names , types and lengths.

    $items[] = update_sql("ALTER TABLE `guifi_model`
                           CHANGE `mid` `mid` INT( 11 ) NOT NULL AUTO_INCREMENT ,
                           CHANGE model model VARCHAR( 40 ) NOT NULL DEFAULT '' ,
                           CHANGE `tipus` `tipus` VARCHAR( 10 ) NULL COMMENT 'Extern, PCI, PCMCIA' ,
                           CHANGE `radiodev_max` `radiodev_max` TINYINT( 2 ) NOT NULL DEFAULT '1' ,
                           CHANGE `modes` `modes` VARCHAR( 20 ) NOT NULL DEFAULT '802.11bg' COMMENT '802.11bg,802.11b,802.11a,802.11abg,WiMax,802.11n' ,
                           CHANGE `AP` `AP` VARCHAR( 5 ) NULL COMMENT 'Yes, No' ,
                           CHANGE `virtualAP` `virtualAP` VARCHAR( 5 ) NOT NULL DEFAULT 'no' COMMENT 'Yes, No' ,
                           CHANGE `WDS` `WDS` VARCHAR( 5 ) NULL COMMENT 'Si,No,Hack' ,
                           CHANGE `bridge` `bridge` VARCHAR( 5 ) NULL COMMENT 'Si,No,Hack' ,
                           CHANGE `client` `client` VARCHAR( 5 ) NULL COMMENT 'Si,No,Hack' ,
                           CHANGE `antenes` `antenes` VARCHAR( 5 ) NULL DEFAULT '2' COMMENT '2,1,0' ,
                           CHANGE `router` `router` VARCHAR( 5 ) NULL DEFAULT NULL COMMENT 'Si,No' ,
                           CHANGE `firewall` `firewall` VARCHAR( 5 ) NULL DEFAULT NULL COMMENT 'Si,No' ,
                           CHANGE `QoS` `QoS` VARCHAR( 5 ) NULL DEFAULT NULL COMMENT 'Si,No,Hack' ,
                           CHANGE `snmp` `snmp` VARCHAR( 5 ) NULL DEFAULT NULL COMMENT 'Si,No,Hack' ,
                           CHANGE `hack` `hack` VARCHAR( 5 ) NULL DEFAULT NULL COMMENT 'Si,No' ,
                           CHANGE `interfaces` `interfaces` VARCHAR( 240 ) NULL ,
                           CHANGE `supported` `supported` VARCHAR( 25 ) NOT NULL DEFAULT 'Yes'");

    $items[] = update_sql("ALTER TABLE `guifi_location`
                           CHANGE `nick` `nick` VARCHAR(40) NOT NULL DEFAULT '',
                           CHANGE `contact` `notification` VARCHAR( 1024 ) NOT NULL,
                           CHANGE `stable` `stable` VARCHAR(25) NOT NULL DEFAULT 'Yes',
                           CHANGE `graph_server` `graph_server` INT( 11 ) NOT NULL DEFAULT '0' COMMENT 'Foreign key to guifi_services (type SNPGraph)'");

    $items[] = update_sql("ALTER TABLE `guifi_devices`
                           CHANGE `nick` `nick` VARCHAR( 40 ) NOT NULL ,
                           CHANGE `contact` `notification` VARCHAR( 1024 ) NOT NULL,
                           CHANGE `graph_server` `graph_server` INT( 11 ) NOT NULL DEFAULT '0' COMMENT 'Foreign key to guifi_services (type SNPGraph)'");

    $items[] = update_sql("ALTER TABLE `guifi_interfaces`
                           CHANGE `device_id` `device_id` INT( 11 ) NOT NULL");

    $items[] = update_sql("ALTER TABLE `guifi_ipv4`
                           CHANGE `id` `id` INT( 11 ) NOT NULL");

    $items[] = update_sql("ALTER TABLE `guifi_links`
                           CHANGE `id` `id` INT( 11 ) NOT NULL ,
                           CHANGE `nid` `nid` INT( 11 ) NOT NULL ,
                           CHANGE `device_id` `device_id` INT( 11 ) NOT NULL ,
                           CHANGE `interface_id` `interface_id` INT( 11 ) NOT NULL ,
                           CHANGE `ipv4_id` `ipv4_id` INT( 11 ) NOT NULL");

    $items[] = update_sql("ALTER TABLE `guifi_manufacturer`
                           CHANGE `fid` `fid` INT( 11 ) NOT NULL AUTO_INCREMENT ,
                           CHANGE `nom` `nom` VARCHAR( 40 ) NOT NULL DEFAULT ''");

    $items[] = update_sql("ALTER TABLE `guifi_networks`
                           CHANGE `base` `base` VARCHAR( 255 ) NOT NULL DEFAULT '' ,
                           CHANGE `zone` `zone` INT( 10 ) UNSIGNED NOT NULL ,
                           CHANGE `network_type` `network_type` VARCHAR( 10 ) NOT NULL DEFAULT 'public'");

    $items[] = update_sql("ALTER TABLE `guifi_permission`
                           CHANGE `perm` `perm` LONGTEXT NULL DEFAULT NULL");

    $items[] = update_sql("ALTER TABLE `guifi_radios`
                           CHANGE `nid` `nid` INT( 11 ) NOT NULL ,
                           CHANGE `model_id` `model_id` INT( 10 ) NOT NULL ,
                           CHANGE `ssid` `ssid` VARCHAR( 20 ) NOT NULL DEFAULT '',
                           CHANGE `antmode` `antenna_mode` VARCHAR( 1024 ) NOT NULL ,
                           CHANGE `clients_accepted` `clients_accepted` VARCHAR( 5 ) NULL DEFAULT 'Yes' COMMENT 'Yes,No'");

    $items[] = update_sql("ALTER TABLE `guifi_services`
                           CHANGE `nick` `nick` VARCHAR( 40 ) NOT NULL DEFAULT '' ,
                           CHANGE `service_type` `service_type` VARCHAR( 40 ) NOT NULL DEFAULT '',
                           CHANGE `contact` `notification` VARCHAR( 1024 ) NOT NULL");

    $items[] = update_sql("ALTER TABLE `guifi_types`
                           CHANGE `type` `type` VARCHAR( 15 ) NOT NULL ,
                           CHANGE `text` `text` VARCHAR( 15 ) NOT NULL ,
                           CHANGE `description` `description` LONGTEXT NOT NULL ,
                           CHANGE `relations` `relations` LONGTEXT NULL DEFAULT NULL");

    $items[] = update_sql("ALTER TABLE `guifi_users`
                           CHANGE `firstname` `firstname` VARCHAR( 60 ) NOT NULL DEFAULT '' ,
                           CHANGE `lastname` `lastname` VARCHAR( 60 ) NOT NULL DEFAULT '' ,
                           CHANGE `username` `username` VARCHAR( 40 ) NOT NULL DEFAULT '' ,
                           CHANGE `password` `password` VARCHAR( 128 ) NOT NULL DEFAULT '',
                           CHANGE `email` `notification` VARCHAR( 1024 ) NULL DEFAULT NULL");


    $items[] = update_sql("ALTER TABLE `guifi_zone`
                           CHANGE `title` `title` VARCHAR( 255 ) NOT NULL DEFAULT '',
                           CHANGE `image` `image` VARCHAR( 255 ) NOT NULL DEFAULT '',
                           CHANGE `notification` `notification` VARCHAR( 1024 ) NOT NULL ,
                           CHANGE `local` `local` VARCHAR( 5 ) NULL DEFAULT 'Yes' COMMENT 'Yes,No',
                           CHANGE `graph_server` `graph_server` INT( 11 ) NOT NULL DEFAULT '0' COMMENT 'Foreign key to guifi_services (type SNPGraph)'");

// Update fileds with the new types
    $items[] = update_sql("UPDATE node SET type = REPLACE (type,'guifi-zone', 'guifi_zone')");
    $items[] = update_sql("UPDATE node SET type = REPLACE (type,'guifi-node', 'guifi_node')");
    $items[] = update_sql("UPDATE node SET type = REPLACE (type,'guifi-service', 'guifi_service')");
    $items[] = update_sql("UPDATE {guifi_devices} SET extra = REPLACE(extra,'s:11:\"NanoStation\"', 's:9:\"AirOsv221\"')");

    $query = db_query("
      SELECT *
      FROM {guifi_radios}
      WHERE protocol = '802.11abg'
    ");
    while ($protocol = db_fetch_object($query)) {
      if ($protocol->channel < 5000)
        $items[] = update_sql(sprintf("UPDATE {guifi_radios} SET protocol = REPLACE (protocol, '802.11abg', '802.11b') WHERE id = %d AND channel= %d", $protocol->id, $protocol->channel));
    }
    $items[] = update_sql("UPDATE {guifi_radios} SET protocol = REPLACE (protocol, '802.11g+', '802.11g')");
    $items[] = update_sql("UPDATE {guifi_radios} SET protocol = REPLACE (protocol, '802.11abg', '802.11a')");
    $items[] = update_sql("UPDATE {guifi_radios} SET protocol = REPLACE (protocol, '802.11bg', '802.11b')");

// Set abbreviated nick to zones without nick.
    $q = db_query('SELECT id, title, nick FROM {guifi_zone}');
      while ($z = db_fetch_object($q)) {
        if (empty($z->nick)) {
          $nick = guifi_abbreviate($z->title);
          $items[] = update_sql(
            sprintf("UPDATE {guifi_zone} SET nick='%s' WHERE id=%d",
            $nick,$z->id)
            );
        }
      }

  return $items;
}

//
// Database New entries!
//
function guifi_update_2() {

  // changes @ guifi_zones
  $items = array();

  db_add_field($items,'guifi_zone', 'zone_mode',
    array('type' => 'varchar', 'length' => 25, 'not null' => TRUE, 'default' => 'infrastructure', 'COMMENT' => 'infrastructure/ad-hoc'));
  db_add_field($items, 'guifi_zone', 'proxy_id',
    array('type' => 'int', 'length' => '11', 'not null' => TRUE, 'default' => '0', 'COMMENT' => 'Foreign key to guifi_services (type Proxy)'));
  db_add_field($items, 'guifi_zone', 'voip_id',
    array('type' => 'int', 'length' => '11', 'not null' => TRUE, 'default' => '0', 'COMMENT' => 'Foreign key to guifi_services (type VoIP)'));
  db_drop_field($items,'guifi_zone', 'mrtg_servers');
  db_drop_field($items,'guifi_zone', 'image');
  db_drop_field($items,'guifi_zone', 'map_poly');
  db_drop_field($items,'guifi_zone', 'map_coord');

  // changes @ guifi_users
  db_add_field($items, 'guifi_users', 'status',
    array('type' => 'varchar', 'length' => 25, 'not null' => TRUE, 'default' => 'new', 'COMMENT' => 'pending/approved/rejected'));
  db_add_field($items, 'guifi_users', 'content_filters',
    array('type' => 'text', 'size' => 'big', 'not null' => FALSE, 'default' => NULL));
  $items[] = update_sql("UPDATE {guifi_users} SET status = 'Approved'");

  // changes @ guifi_devices
  db_add_field($items, 'guifi_devices', 'last_online',
    array('type' => 'int', 'disp-width' => 11, 'not null' => TRUE, 'default' => 0, 'COMMENT' => 'Last time that this device has been seen online'));
  db_add_field($items, 'guifi_devices', 'last_flag',
    array('type' => 'varchar', 'length' => '40', 'not null' => TRUE, 'default' => 'N/A', 'COMMENT' => 'N/A, Online, Offline...'));
  db_add_field($items, 'guifi_devices', 'ly_availability',
    array('type' => 'numeric', 'precision' => '10', 'scale' => '6', 'not null' => FALSE, 'default' => NULL));

  // changes @ guifi_radios
  db_add_field($items, 'guifi_radios', 'ly_bytes_in',
    array('type' => 'numeric', 'precision' => 25,  'scale' => 0, 'not null' => FALSE, 'default' => NULL));
  db_add_field($items, 'guifi_radios', 'ly_bytes_out',
    array('type' => 'numeric', 'precision' => 25, 'scale' => 0, 'not null' => FALSE, 'default' => NULL));

  db_drop_field($items,'guifi_devices', 'url_mrtg_server');

  return $items;
}
*/

function guifi_update_540() {
  $items = array();

  db_change_field($items, 'guifi_radios', 'ssid', 'ssid',
    array('type' => 'varchar', 'length' => '128', 'not null' => TRUE, 'default' => ''));
  return $items;
}

function guifi_update_556() {

  // Data cleaning for backward compatibility purposes.
  // All notifications will be validated
  // In the meantime, empty notifications will remain empty, just leaving the
  // code commented for further reference

  $items = array();

  $tables = array('guifi_zone', 'guifi_location', 'guifi_devices', 'guifi_services', 'guifi_users');

  foreach ($tables as $table)  {
    $qmails = db_query('SELECT * FROM {%s}', $table);
    while ($amails = db_fetch_object($qmails)) {
      // validate the email
      if (!empty($amails->notification))
        $dmails = guifi_notification_validate($amails->notification);

      // if mails empty or not valid, take from uid or user_created
//      if (empty($dmails)) {
//        if (!isset($amails->nid))
//          $amails->nid = $amails->id;
//        $n = node_load(array('nid' => $amails->nid));
//        $u = user_load($n->uid);
//        $dmails = $u->mail;
//      } // if was no mail

      // there was changes? then save the change
      if ($dmails != $amails->notification) {
        $items[] = update_sql(sprintf(
            'UPDATE {%s} SET notification = "%s" WHERE id = %d',
            $table, $dmails, $amails->id)
          );
      }

    } // foreach row

  } // foreach table

  return $items;
}

function guifi_update_652() {
  db_add_field($items, 'guifi_devices', 'last_stats',
    array('type' => 'int', 'disp-width' => 11, 'not null' => TRUE, 'default' => 0, 'comment' => 'Last time that this device has been loaded with statistics'));
  db_add_field($items, 'guifi_devices', 'latency_avg',
    array('type' => 'int', 'disp-width' => 11, 'not null' => TRUE, 'default' => 0, 'comment' => 'Average latency'));
  db_add_field($items, 'guifi_devices', 'latency_max',
    array('type' => 'int', 'disp-width' => 11, 'not null' => TRUE, 'default' => 0, 'comment' => 'Maximum latency'));
  db_change_field($items, 'guifi_radios', 'ly_bytes_in', 'ly_mb_in',
    array('type' => 'numeric', 'disp-width' => 25, 'not null' => FALSE, 'default' => NULL));
  db_change_field($items, 'guifi_radios', 'ly_bytes_out', 'ly_mb_out',
    array('type' => 'numeric', 'disp-width' => 25, 'not null' => FALSE, 'default' => NULL));
}

function guifi_update_661() {
  $items = array();

  db_drop_field($items, 'guifi_networks', 'valid');

  $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('1', 'adhoc', 'OLSR', 'ad-hoc mesh - OLSR', 'kamikaze|freifunk-OLSR');");
  $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('2', 'adhoc', 'OLSR-NG', 'ad-hoc mesh - OLSR-NG', 'kamikaze');");
  $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('3', 'adhoc', 'BATMAN', 'ad-hoc mesh - BATMAN', 'kamikaze|freifunk-BATMAN');");
  $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('4', 'adhoc', 'RouterOS', 'ad-hoc mesh - RouterOS', 'RouterOSv3.x');");

  return $items;
}


function guifi_update_664() {
  $items = array();

  db_add_field($items, 'guifi_ipv4', 'ipv4_type',
    array('type' => 'int', 'disp-width' => 11, 'not null' => TRUE, 'default' => 0, 'comment' => 'Address type'));
  db_add_field($items, 'guifi_ipv4', 'zone_id',
    array('type' => 'int', 'disp-width' => 11, 'not null' => TRUE, 'default' => 0, 'comment' => 'Address type'));

  $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('1', 'ipv4_types', '1', 'public', '');");
  $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('2', 'ipv4_types', '2', 'backbone', '');");
  $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('3', 'ipv4_types', '3', 'ad-hoc mesh - OLSR', 'kamikaze|freifunk-OLSR');");
  $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('4', 'ipv4_types', '4', 'ad-hoc mesh - BATMAN', 'kamikaze|freifunk-BATMAN');");
  $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('5', 'ipv4_types', '5', 'ad-hoc mesh - BMX', 'kamikaze');");
  $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('6', 'ipv4_types', '6', 'ad-hoc mesh - RouterOS', 'RouterOSv3.x');");

  $sql = db_query(
    'SELECT a.*, l.zone_id ' .
    'FROM {guifi_ipv4} a, {guifi_interfaces} i, {guifi_devices} d, {guifi_location} l ' .
    'WHERE a.interface_id=i.id AND i.device_id=d.id AND d.nid=l.id');
  $pmin = ip2long('10.0.0.0');
  $pmax = ip2long('11.0.0.0');
  while ($ipv4 = db_fetch_object($sql)) {
    // Set network type
    $daddr = ip2long($ipv4->ipv4);
    if ($ipv4->ipv4_type == 0) {
       (($daddr >= $pmin) and ($daddr < $pmax)) ? $type = 1 : $type = 2;
    }

    update_sql(sprintf('UPDATE {guifi_ipv4} SET ipv4_type=%s, zone_id=%d WHERE id=%d AND interface_id=%d',
      $type, $ipv4->zone_id, $ipv4->id, $ipv4->interface_id));

  }

  return $items;
}

function guifi_update_667() {
  $items = array();

  $items[] = update_sql("DELETE FROM {guifi_types} WHERE type='adhoc'");
  $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('3', 'adhoc', 'OLSR', 'ad-hoc mesh - OLSR', 'kamikaze|freifunk-OLSR');");
  $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('4', 'adhoc', 'BATMAN', 'ad-hoc mesh - BATMAN', 'kamikaze|freifunk-BATMAN');");
  $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('5', 'adhoc', 'BMX', 'ad-hoc mesh - BMX', 'kamikaze|freifunk-BATMAN|freifunk-BMX');");
  $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('6', 'adhoc', 'RouterOS', 'ad-hoc mesh - RouterOS', 'RouterOSv3.x');");

  return $items;
}

function guifi_update_700() {
  $items = array();

  $items[] = update_sql("INSERT INTO {guifi_manufacturer} (fid ,nom ,url) VALUES ('12', 'Gateworks', 'http://www.gateworks.com'),('13', 'Asus', 'http://www.asus.com');");
  $items[] = update_sql("INSERT INTO {guifi_model} (mid ,fid ,model ,tipus ,radiodev_max ,potencia_max ,modes ,AP ,virtualAP ,WDS ,bridge ,client ,connector ,antenes ,router ,firewall ,QoS ,snmp ,hack ,interfaces ,url ,comentaris ,supported) VALUES 
  ('34', '10', 'NanoStation Loco2', 'Extern', '1', '400', '802.11bg', 'No', 'No', 'No', 'No', 'Si', 'RP-SMA', '2', 'Si', 'Si', 'Si', 'Si', 'Si', 'Wan', 'http://www.ubnt.com/products/loco.php', 'Permet Firmwares de tercers', 'Yes'),
  ('35', '10', 'NanoStation Loco5', 'Extern', '1', '400', '802.11a', 'No', 'No', 'No', 'No', 'Si', 'RP-SMA', '2', 'Si', 'Si', 'Si', 'Si', 'Si', 'Wan', 'http://www.ubnt.com/products/loco.php', 'Permet Firmwares de tercers', 'Yes'),
  ('36', '10', 'Bullet2', 'Extern', '1', '400', '802.11bg', 'No', 'No', 'No', 'No', 'Si', 'RP-SMA', '2', 'Si', 'Si', 'Si', 'Si', 'Si', 'Wan', 'http://www.ubnt.com/products/loco.php', 'Permet Firmwares de tercers', 'Yes'),
  ('37', '10', 'Bullet5', 'Extern', '1', '400', '802.11a', 'No', 'No', 'No', 'No', 'Si', 'RP-SMA', '2', 'Si', 'Si', 'Si', 'Si', 'Si', 'Wan', 'http://www.ubnt.com/products/loco.php', 'Permet Firmwares de tercers', 'Yes'),
  ('38', '10', 'RouterStation', 'Extern', '4', '400', '802.11abg', 'No', 'No', 'No', 'No', 'Si', 'RP-SMA', '2', 'Si', 'Si', 'Si', 'Si', 'Si', 'Wan', 'http://ubnt.com/products/ls5.php', 'Permet Firmwares de tercers', 'Yes'),
  ('39', '12', 'Avila GW2348-4', 'Extern', '4', '400', '802.11abg', 'No', 'No', 'No', 'No', 'Si', 'RP-SMA', '2', 'Si', 'Si', 'Si', 'Si', 'Si', 'Wan', 'http://www.gateworks.com/products/avila/gw2348-4.php', 'Permet Firmwares de tercers', 'Yes'),
  ('40', '13', 'Asus WL-500xx', 'Extern', '1', '400', '802.11bg', 'No', 'No', 'No', 'No', 'Si', 'RP-SMA', '2', 'Si', 'Si', 'Si', 'Si', 'Si', 'Wan', 'http://asus.com/products.aspx?l1=29&l2=172&l3=743&l4=60&model=1277&modelmenu=1', 'Permet Firmwares de tercers', 'Yes');");

  $items[] = update_sql("UPDATE {guifi_types} SET relations = 'WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|Meraki/Fonera|Wrap|Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153|Supertrasto guifiBUS guifi.net|NanoStation2|NanoStation5|NanoStation Loco2|NanoStation Loco5|Bullet2|Bullet5|RouterStation|Avila GW2348-4|Asus WL-500xx' WHERE id = 8 AND type = 'firmware'");
  $items[] = update_sql("UPDATE {guifi_types} SET relations = 'WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|Asus WL-500xx|WHR-HP-G54, WHR-G54S|NanoStation2|NanoStation5|NanoStation Loco2|NanoStation Loco5|Bullet2|Bullet5|RouterStation|Avila GW2348-4' WHERE id = 4 AND type = 'firmware'");
  $items[] = update_sql("UPDATE {guifi_types} SET relations = 'NanoStation2|NanoStation5|NanoStation Loco2|NanoStation Loco5|Bullet2|Bullet5' WHERE id = 11 AND type = 'firmware'");
  $items[] = update_sql("UPDATE {guifi_types} SET relations = 'NanoStation2|NanoStation5|NanoStation Loco2|NanoStation Loco5|Bullet2|Bullet5' WHERE id = 13 AND type = 'firmware'");

  return $items;
}

function guifi_update_736() {
  $items = array();

  $items[] = update_sql("INSERT INTO {guifi_manufacturer} (fid ,nom ,url) VALUES ('14', 'Pcengines', 'http://www.pcengines.ch');");
  $items[] = update_sql("INSERT INTO {guifi_model} (mid ,fid ,model ,tipus ,radiodev_max ,potencia_max ,modes ,AP ,virtualAP ,WDS ,bridge ,client ,connector ,antenes ,router ,firewall ,QoS ,snmp ,hack ,interfaces ,url ,comentaris ,supported) VALUES 
  (41, 14, 'Alix1', 'Extern', 5, 400, '802.11bg', 'No', 'No', 'No', 'No', 'Si', 'RP-SMA', '2', 'Si', 'Si', 'Si', 'Si', 'Si', 'wLan/Lan', 'http://www.pcengines.ch/alix1d.htm', 'Permet Firmwares de tercers', 'Yes'),
  (42, 14, 'Alix2', 'Extern', 2, 400, '802.11bg', 'No', 'No', 'No', 'No', 'Si', 'RP-SMA', '2', 'Si', 'Si', 'Si', 'Si', 'Si', 'wLan/Lan|ether2', 'http://www.pcengines.ch/alix2d.htm', 'Permet Firmwares de tercers', 'Yes'),
  (43, 14, 'Alix3', 'Extern', 2, 400, '802.11bg', 'No', 'No', 'No', 'No', 'Si', 'RP-SMA', '2', 'Si', 'Si', 'Si', 'Si', 'Si', 'wLan/Lan', 'http://www.pcengines.ch/alix3d.htm', 'Permet Firmwares de tercers', 'Yes'),
  (44, 8, 'Routerboard 800', NULL, 8, 400, '802.11abg', 'Si', 'Yes', 'Si', 'Si', 'Si', 'N-Female', '2', 'Si', 'Si', 'Si', 'Si', 'No', 'wLan/Lan|ether2|ether3|ether4|ether5|ether6|ether7|ether8|ether9', 'http://www.routerboard.com', NULL,'Yes');");

  $items[] = update_sql("UPDATE {guifi_types} SET relations = 'WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|Meraki/Fonera|Wrap|Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153|Supertrasto guifiBUS guifi.net|NanoStation2|NanoStation5|NanoStation Loco2|NanoStation Loco5|Bullet2|Bullet5|RouterStation|Avila GW2348-4|Asus WL-500xx|Alix1|Alix2|Alix3' WHERE id = 8 AND type = 'firmware'");
  $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('14', 'firmware', 'RouterOSv4.x', 'RouterOS 4.x from Mikrotik', 'Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153|Supertrasto guifiBUS guifi.net|Routerboard 600|Routerboard 411|Routerboard 333|Routerboard 433|Routerboard 800');");

  return $items;
}

function guifi_update_743() {
  $items = array();
  
  $items[] = update_sql("CREATE TABLE IF NOT EXISTS `guifi_api_tokens` (
	  `uid` int(8) unsigned NOT NULL,
	  `token` varchar(255) NOT NULL,
	  `created` timestamp NULL DEFAULT NULL,
	  `rand_key` int(6) NOT NULL,
	  PRIMARY KEY (`uid`)
	) ENGINE=MyISAM");
  return $items;
}

function guifi_update_768() {
  $items = array();
 
  $items[] = update_sql("INSERT INTO {guifi_model} (mid ,fid ,model ,tipus ,radiodev_max ,potencia_max ,modes ,AP ,virtualAP ,WDS ,bridge ,client ,connector ,antenes ,router ,firewall ,QoS ,snmp ,hack ,interfaces ,url ,comentaris ,supported) VALUES
   (45, 10, 'AirMaxM2 Rocket/Nano/Loco', 'Extern', 1, 100, '802.11bg', 'Yes', 'No', 'Si', 'Si','Si', NULL, '1', 'Si', 'Si', NULL, 'Si', 'Si', 'eth0|ath0', 'http://ubnt.com/airmax', 'Permet Firmwares de tercers','Yes'),
   (46, 10, 'AirMaxM5 Rocket/Nano/Loco', 'Extern', 1, 100, '802.11a', 'Yes', 'No', 'si', 'Si', 'Si', NULL, '1', 'Si', 'Si', NULL, 'Si', 'Si', 'eth0|ath0', 'http://ubnt.com/airmax', 'Permet Firmwares de tercers','Yes'),
   (47, 10, 'AirMaxM2 Bullet/PwBrg/AirGrd/NanoBr', 'Extern', 1, 100, '802.11bg', 'Yes', 'No', 'Si', 'Si','Si', NULL, '1', 'Si', 'Si', NULL, 'Si', 'Si', 'eth0|ath0', 'http://ubnt.com/airmax', 'Permet Firmwares de tercers','Yes'),
   (48, 10, 'AirMaxM5 Bullet/PwBrg/AirGrd/NanoBr', 'Extern', 1, 100, '802.11a', 'Yes', 'No', 'si', 'Si', 'Si', NULL, '1', 'Si', 'Si', NULL, 'Si', 'Si', 'eth0|ath0', 'http://ubnt.com/airmax', 'Permet Firmwares de tercers','Yes');");

   $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('15', 'firmware', 'AirOsv52', 'Ubiquti AirOs 5.2','AirMaxM2 Rocket/Nano/Loco|AirMaxM5 Rocket/Nano/Loco|AirMaxM2 Bullet/PwBrg/AirGrd/NanoBr|AirMaxM5 Bullet/PwBrg/AirGrd/NanoBr');");
   $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('16', 'firmware', 'RouterOSv4.7+', 'RouterOS 4.7 or newer from Mikrotik', 'Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153|Supertrasto guifiBUS guifi.net|Routerboard 600|Routerboard 411|Routerboard 333|Routerboard 433|Routerboard 800');");
   $items[] = update_sql("UPDATE {guifi_types} SET text = 'RouterOSv4.0+' , description = 'RouterOS 4.0 to 4.6 from Mikrotik' WHERE id = '14' AND type = 'firmware'");
  return $items;
}

function guifi_update_808() {
  $items = array();
  $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('26', 'service', 'LDAP', 'LDAP Server');");
  return $items;
}

function guifi_update_849() {
  $items = array();
  $items[] = update_sql("ALTER TABLE {guifi_dns_domains} ADD public VARCHAR( 5 ) NOT NULL DEFAULT 'yes' AFTER type;");
  return $items;
}

function guifi_update_851() {
  $items = array();
  $items[] = update_sql("INSERT INTO {guifi_manufacturer} VALUES (15, 'Setup Informatica', 'http://www.setup.cat');");
  $items[] = update_sql("INSERT INTO {guifi_model} (mid ,fid ,model ,tipus ,radiodev_max ,potencia_max ,modes ,AP ,virtualAP ,WDS ,bridge ,client ,connector ,antenes ,router ,firewall ,QoS ,snmp ,hack ,interfaces ,url ,comentaris ,supported) VALUES
  (49, 15, 'GuifiStation2', 'Extern', 1, 100, '802.11bg', 'Yes', 'No', 'si', 'Si', 'Si', NULL, '1', 'Si', 'Si', NULL, 'Si', 'Si', 'eth0|ath0', 'http://tienda.setupinformatica.com/wac/detalle.php?codigo=CPEGS2', 'Permet Firmwares de tercers', 'Yes'),
  (50, 15, 'GuifiStation5', 'Extern', 1, 100, '802.11a', 'Yes', 'No', 'si', 'Si', 'Si', NULL, '1', 'Si', 'Si', NULL, 'Si', 'Si', 'eth0|ath0', 'http://tienda.setupinformatica.com/wac/detalle.php?codigo=CPEGS5', 'Permet Firmwares de tercers', 'Yes');");
  $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('17', 'firmware', 'GSOS', 'GuifiStationOS from Setup Informatica', 'GuifiStation2|GuifiStation5');");
  return $items;
}

function guifi_update_852() {
   $items = array();
   $items[] = update_sql("UPDATE {guifi_types} SET text = 'GuifiStationOS1.0' , description = 'GuifiStationOS v1.0 from Setup Informatica' WHERE id = '17' AND type = 'firmware'");
  return $items;
}

function guifi_update_873() {
   $items = array();
   $items[] = update_sql("ALTER TABLE {guifi_dns_domains} ADD externalmx VARCHAR( 128 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL AFTER allow"); 
  return $items;
}

function guifi_update_874() {
   $items = array();
   $items[] = update_sql("UPDATE {guifi_model} SET model = 'Routerboard 532' WHERE mid =19");
   $items[] = update_sql("UPDATE {guifi_model} SET model = 'Routerboard 133C' WHERE mid =20");
   $items[] = update_sql("UPDATE {guifi_model} SET model = 'Routerboard 133' WHERE mid =21");
   $items[] = update_sql("UPDATE {guifi_model} SET model = 'Routerboard 112' WHERE mid =22");
   $items[] = update_sql("UPDATE {guifi_model} SET model = 'Routerboard 153' WHERE mid =23");
   $items[] = update_sql("UPDATE {guifi_model} SET model = 'Routerboard 600' WHERE mid =27");
   $items[] = update_sql("UPDATE {guifi_model} SET model = 'Routerboard 333' WHERE mid =28");
   $items[] = update_sql("UPDATE {guifi_model} SET model = 'Routerboard 411' WHERE mid =29");
   $items[] = update_sql("UPDATE {guifi_model} SET model = 'Routerboard 433' WHERE mid =31");
   $items[] = update_sql("UPDATE {guifi_model} SET model = 'Routerboard 800' WHERE mid =44");
   $items[] = update_sql("UPDATE {guifi_types} SET `relations` = 'Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153|Supertrasto guifiBUS guifi.net' WHERE id = 6 AND type = 'firmware'");
   $items[] = update_sql("UPDATE {guifi_types} SET `relations` = 'WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|Wrap|Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153' WHERE id = 7 AND type = 'firmware'");
   $items[] = update_sql("UPDATE {guifi_types} SET `relations` = 'WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|Meraki/Fonera|Wrap|Routerboard 532|Routerboard 133|Routerboard 133|Routerboard 112|Routerboard 153|Supertrasto guifiBUS guifi.net|NanoStation2|NanoStation5|NanoStation Loco2|NanoStation Loco5|Bullet2|Bullet5|RouterStation|Avila GW2348-4|Asus WL-500xx|Alix1|Alix2|Alix3' WHERE id = 8 AND type = 'firmware'");
   $items[] = update_sql("UPDATE {guifi_types} SET `relations` = 'Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153|Supertrasto guifiBUS guifi.net|Routerboard 600|Routerboard 411|Routerboard 333|Routerboard 433' WHERE id = 10 AND type = 'firmware'");
   $items[] = update_sql("UPDATE {guifi_types} SET `relations` = 'Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153|Supertrasto guifiBUS guifi.net|Routerboard 600|Routerboard 411|Routerboard 333|Routerboard 433|Routerboard 800' WHERE id = 14 AND type = 'firmware'");
   $items[] = update_sql("UPDATE {guifi_types} SET `relations` = 'Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153|Supertrasto guifiBUS guifi.net|Routerboard 600|Routerboard 411|Routerboard 333|Routerboard 433|Routerboard 800' WHERE id = 16 AND type = 'firmware'");
  return $items;
}

function guifi_update_891() {
   $items = array();
   $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('18', 'firmware', 'gsffirm', 'Firmware de GràciaSenseFils MANET', 'Alix2|Alix3|WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|Asus WL-500xx|WHR-HP-G54, WHR-G54S|NanoStation2|NanoStation5|NanoStation Loco2|NanoStation Loco5|Bullet2|Bullet5|RouterStation|RouterStationPro|Meraki/Fonera');");
   $items[] = update_sql("INSERT INTO {guifi_model} (mid ,fid ,model ,tipus ,radiodev_max ,potencia_max ,modes ,AP ,virtualAP ,WDS ,bridge ,client ,connector ,antenes ,router ,firewall ,QoS ,snmp ,hack ,interfaces ,url ,comentaris ,supported) VALUES 
                                        (51, 10, 'RouterStationPro', 'Extern', 4, 400, '802.11abg', 'No', 'No', 'No', 'No', 'Si', 'RP-SMA', '2', 'Si', 'Si', 'Si', 'Si', 'Si', 'Wan', 'http://ubnt.com/rspro', 'Permet Firmwares de tercers', 'Yes');"); 
   $items[] = update_sql("UPDATE {guifi_types} SET relations = 'WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|Asus WL-500xx|WHR-HP-G54, WHR-G54S|NanoStation2|NanoStation5|NanoStation Loco2|NanoStation Loco5|Bullet2|Bullet5|RouterStation|RouterStationPro|Avila GW2348-4' WHERE id = 4 AND type = 'firmware'");
   $items[] = update_sql("UPDATE {guifi_types} SET relations = 'WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|Meraki/Fonera|Wrap|Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153|Supertrasto guifiBUS guifi.net|NanoStation2|NanoStation5|NanoStation Loco2|NanoStation Loco5|Bullet2|Bullet5|RouterStation|RouterStationPro|Avila GW2348-4|Asus WL-500xx|Alix1|Alix2|Alix3' WHERE id = 8 AND type = 'firmware'"); 
  return $items;
}

function guifi_update_893() {
  $items = array();
  $items[] = update_sql("ALTER TABLE {guifi_dns_domains} ADD defipv6 VARCHAR( 128 ) NOT NULL AFTER defipv4;");
  $items[] = update_sql("ALTER TABLE {guifi_dns_hosts} ADD ipv6 VARCHAR( 128 ) NOT NULL AFTER ipv4;");
  return $items;
}

function guifi_update_894() {
  $items = array();
  $items[] = update_sql("UPDATE {guifi_types} SET text = 'DD-WRTv23' , description = 'DD-WRTv23Beta2 from BrainSlayer' WHERE id = '4' AND type = 'firmware'");
  return $items;
}

function guifi_update_895() {
  $items = array();
  $items[] = update_sql("UPDATE {guifi_devices} SET extra = REPLACE(extra,'s:6:\"DD-WRT\"', 's:9:\"DD-WRTv23\"')");
  return $items;
}

function guifi_update_896() {
  $items = array();
  $items[] = update_sql("ALTER TABLE {guifi_devices} ADD logserver VARCHAR( 60 ) NOT NULL AFTER graph_server;");
  $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description) VALUES ('27', 'service', 'LogServer', 'Ip logs server');");
  return $items;
}

function guifi_update_900() {
 $items = array();
 $items[] = update_sql("ALTER TABLE {guifi_model} ADD etherdev_max tinyint(2) NOT NULL DEFAULT 1 AFTER radiodev_max");
 $items[] = update_sql("ALTER TABLE {guifi_interfaces} ADD etherdev_counter tinyint(2) AFTER radiodev_counter");
 $items[] = update_sql("ALTER TABLE {guifi_radios} ADD etherdev_counter tinyint(2) AFTER radiodev_counter");
 $items[] = update_sql("INSERT INTO {guifi_model} (mid ,fid ,model ,tipus ,radiodev_max , etherdev_max, potencia_max ,modes ,AP ,virtualAP ,WDS ,bridge ,client ,connector ,antenes ,router ,firewall ,QoS ,snmp ,hack ,interfaces ,url ,comentaris ,supported) VALUES 
                                      (52, 8, 'Routerboard 750/750G', 'Extern', '0', '5', '400', '802.11abg', 'Yes', 'Yes', 'Yes', 'Yes', 'Yes', 'None', '0', 'Yes','Yes', 'Yes', 'Yes', 'Yes', 'ether1|ether2|ether3|ether4|ether5', 'http://www.routerboard.com/pricelist.php?showProduct=90', 'Permet Firmwares de tercers', 'Yes');");
 $items[] = update_sql("UPDATE {guifi_types} SET `relations` = 'Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153|Supertrasto guifiBUS guifi.net|Routerboard 600|Routerboard 411|Routerboard 333|Routerboard 433|Routerboard 800|Routerboard 750/750G' WHERE id = 16 AND type = 'firmware'");
 $items[] = update_sql("INSERT INTO {guifi_types} (id, type, text, description, relations) VALUES ('19', 'firmware', 'RouterOSv5.x', 'RouterOS 5.x or newer from Mikrotik', 'Routerboard 532|Routerboard 133C|Routerboard 133|Routerboard 112|Routerboard 153|Supertrasto guifiBUS guifi.net|Routerboard 600|Routerboard 411|Routerboard 333|Routerboard 433|Routerboard 800|Routerboard 750/750G');");
  return $items;
}

function guifi_update_901() {
   $items = array();
   $items[] = update_sql("ALTER TABLE {guifi_dns_domains} ADD externalns VARCHAR( 128 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL AFTER externalmx"); 
  return $items;
}

function guifi_update_902() {
   $items = array();
   $items[] = update_sql("ALTER TABLE {guifi_model} ADD notification varchar(1024) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL AFTER supported");
   $items[] = update_sql("ALTER TABLE {guifi_model} ADD user_created mediumint(9) NOT NULL AFTER notification");
   $items[] = update_sql("ALTER TABLE {guifi_model} ADD user_changed mediumint(9) NOT NULL AFTER user_created");
   $items[] = update_sql("ALTER TABLE {guifi_model} ADD timestamp_created int(11) NOT NULL AFTER user_changed");
   $items[] = update_sql("ALTER TABLE {guifi_model} ADD timestamp_changed int(11) NOT NULL AFTER timestamp_created");
   $items[] = update_sql("ALTER TABLE {guifi_manufacturer} ADD notification varchar(1024) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL AFTER url");
   $items[] = update_sql("ALTER TABLE {guifi_manufacturer} ADD user_created mediumint(9) NOT NULL AFTER notification");
   $items[] = update_sql("ALTER TABLE {guifi_manufacturer} ADD user_changed mediumint(9) NOT NULL AFTER user_created");
   $items[] = update_sql("ALTER TABLE {guifi_manufacturer} ADD timestamp_created int(11) NOT NULL AFTER user_changed");
   $items[] = update_sql("ALTER TABLE {guifi_manufacturer} ADD timestamp_changed int(11) NOT NULL AFTER timestamp_created");
   $items[] = update_sql("ALTER TABLE {guifi_model}
  DROP potencia_max,
  DROP modes,
  DROP WDS,
  DROP bridge,
  DROP connector,
  DROP antenes,
  DROP router,
  DROP firewall,
  DROP QoS,
  DROP snmp,
  DROP hack");

   $items[] = update_sql("DELETE FROM {guifi_manufacturer} WHERE fid = 1");
   $items[] = update_sql("DELETE FROM {guifi_manufacturer} WHERE fid = 3");
   $items[] = update_sql("DELETE FROM {guifi_manufacturer} WHERE fid = 4");
   $items[] = update_sql("DELETE FROM {guifi_manufacturer} WHERE fid = 5");
   $items[] = update_sql("DELETE FROM {guifi_manufacturer} WHERE fid = 6");
   $items[] = update_sql("DELETE FROM {guifi_manufacturer} WHERE fid = 7");
   $items[] = update_sql("DELETE FROM {guifi_model WHERE mid = 2");
   $items[] = update_sql("DELETE FROM {guifi_model WHERE mid = 3");
   $items[] = update_sql("DELETE FROM {guifi_model WHERE mid = 4");
   $items[] = update_sql("DELETE FROM {guifi_model WHERE mid = 5");
   $items[] = update_sql("DELETE FROM {guifi_model WHERE mid = 6");
   $items[] = update_sql("DELETE FROM {guifi_model WHERE mid = 7");
   $items[] = update_sql("DELETE FROM {guifi_model WHERE mid = 8");
   $items[] = update_sql("DELETE FROM {guifi_model WHERE mid = 10");
   $items[] = update_sql("DELETE FROM {guifi_model WHERE mid = 11");
   $items[] = update_sql("DELETE FROM {guifi_model WHERE mid = 12");
   $items[] = update_sql("DELETE FROM {guifi_model WHERE mid = 13");
   $items[] = update_sql("DELETE FROM {guifi_model WHERE mid = 14");

   $items[] = update_sql("ALTER TABLE {guifi_manufacturer} CHANGE nom name VARCHAR( 40 ) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT ''");
   $items[] = update_sql("ALTER TABLE {guifi_model} CHANGE tipus type VARCHAR( 10 ) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT 'Extern, PCI, PCMCIA'");
   $items[] = update_sql("ALTER TABLE {guifi_model} CHANGE comentaris comments VARCHAR( 240 ) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL"); 

   $items[] = update_sql("UPDATE {guifi_model} SET mid = '3', fid = '1' WHERE mid =99;");
   $items[] = update_sql("UPDATE {guifi_manufacturer} SET fid = '99' WHERE fid =1;");
   $items[] = update_sql("UPDATE {guifi_devices} SET extra = REPLACE( extra,'8:\"model_id\";s:1:\"2\"', '8:\"model_id\";s:1:\"3\"')");
   $items[] = update_sql("UPDATE {guifi_devices} SET extra = REPLACE( extra,'8:\"model_id\";s:1:\"4\"', '8:\"model_id\";s:1:\"3\"')");
   $items[] = update_sql("UPDATE {guifi_devices} SET extra = REPLACE( extra,'8:\"model_id\";s:1:\"5\"', '8:\"model_id\";s:1:\"3\"')");
   $items[] = update_sql("UPDATE {guifi_devices} SET extra = REPLACE( extra,'8:\"model_id\";s:1:\"6\"', '8:\"model_id\";s:1:\"3\"')");
   $items[] = update_sql("UPDATE {guifi_devices} SET extra = REPLACE( extra,'8:\"model_id\";s:1:\"8\"', '8:\"model_id\";s:1:\"3\"')");
   $items[] = update_sql("UPDATE {guifi_devices} SET extra = REPLACE( extra,'8:\"model_id\";s:2:\"10\"', '8:\"model_id\";s:1:\"3\"')");
   $items[] = update_sql("UPDATE {guifi_devices} SET extra = REPLACE( extra,'8:\"model_id\";s:2:\"13\"', '8:\"model_id\";s:1:\"3\"')");
   $items[] = update_sql("UPDATE {guifi_devices} SET extra = REPLACE( extra,'8:\"model_id\";s:2:\"14\"', '8:\"model_id\";s:1:\"3\"')");
   $items[] = update_sql("UPDATE {guifi_devices} SET extra = REPLACE( extra,'8:\"model_id\";s:2:\"99\"', '8:\"model_id\";s:1:\"3\"')");
  return $items;
}

function guifi_update_903() {
  $items = array();
  
  // creació de la taula de firmwares
  $items[] = update_sql("CREATE TABLE IF NOT EXISTS `guifi_firmware` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nom` varchar(45) NOT NULL,
  `descripcio` varchar(45) NOT NULL,
  `relations` varchar(45) DEFAULT NULL,
  `enabled` tinyint(1) DEFAULT '0',
  `notification` varchar(1024) NOT NULL,
  `user_created` mediumint(9) NOT NULL,
  `user_changed` mediumint(9) NOT NULL,
  `timestamp_created` int(11) NOT NULL,
  `timestamp_changed` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT='Firmwares'");

  // insert de firmwares 
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (1,'n/a','not available','Other',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (2,'Alchemy','Alchemy from sveasoft','WRT54Gv1-4|WRT54GSv1-2',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (3,'Talisman','Talisman from sveasoft','WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (4,'DD-WRTv23','DD-WRTv23Beta2 from BrainSlayer','WRT54Gv1-4|WHR-HP-G54, WHR-G54S|WRT54GL|WRT54',1,'albertsarle@gmailcom',541,541,0,1336245714);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (5,'DD-guifi','DD-guifi from Miquel Martos','WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|WHR-',1,'albertsarle@gmailcom',541,541,0,1336245706);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (6,'RouterOSv2.9','RouterOS 2.9 from Mikrotik','Routerboard 532|Routerboard 133C|Routerboard ',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (7,'whiterussian','OpenWRT-whiterussian','WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|Wrap',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (8,'kamikaze','OpenWRT kamikaze','WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|Rout',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (9,'Freifunk-BATMAN','OpenWRT-Freifunk-v1.6.16 with B.A.T.M.A.N','WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|WHR-',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (10,'RouterOSv3.x','RouterOS 3.x from Mikrotik','Routerboard 532|Routerboard 133C|Routerboard ',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (11,'AirOsv221','Ubiquti AirOs 2.2.1','NanoStation2|NanoStation5|NanoStation Loco2|N',0,'albertsarle@gmailcom',541,541,0,1328962781);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (12,'Freifunk-OLSR','OpenWRT-Freifunk-v1.6.16 with OLSR','WRT54Gv1-4|WRT54GL|WRT54GSv1-2|WRT54GSv4|WHR-',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (13,'AirOsv30','Ubiquti AirOs 3.0','NanoStation2|NanoStation5|NanoStation Loco2|N',1,'albertsarle@gmailcom',541,541,0,1336245700);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (14,'RouterOSv4.0+','RouterOSv4.0+','Routerboard 532|Routerboard 133C|Routerboard ',1,'albertsarle@gmailcom',541,541,0,1336245758);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (15,'AirOsv52','Ubiquti AirOs 5.2','AirMaxM2 Rocket/Nano/Loco|AirMaxM5 Rocket/Nan',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (16,'RouterOSv4.7+','RouterOS 4.7 and newer 4.x ','Routerboard 532|Routerboard 133C|Routerboard ',1,'albertsarle@gmailcom',541,541,0,1336245724);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (17,'GuifiStationOS1.0','GuifiStationOS v1.0 from Setup Informatica','GuifiStation2|GuifiStation5',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (18,'gsffirm','Firmware de GràciaSenseFils MANET','WRT54Gv1-4|WHR-HP-G54, WHR-G54S|WRT54GL|WRT54',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (19,'RouterOSv5.x','RouterOS 5.x or newer from Mikrotik','Routerboard 532|Routerboard 133C|Routerboard ',1,'albertsarle@gmailcom',541,541,0,1336245762);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (20,'AirOsv3.6+','Ubiquti AirOs 3.6+','NanoStation2|NanoStation5|NanoStation Loco2|N',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_firmware} (id,nom,descripcio,relations,enabled,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (21,'DD-WRTv24preSP2','DD-WRTv24preSP2 from BrainSlayer','AirMaxM2 Bullet/PwBrg/AirGrd/NanoBr|AirMaxM5 ',1,'albertsarle@gmailcom',541,541,0,1336245719);");

  // creació de la taula de parametres de parametres dels firmwares
  $items[] = update_sql("CREATE TABLE IF NOT EXISTS `guifi_parametresFirmware` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '  ',
  `fid` int(11) DEFAULT NULL,
  `pid` int(11) DEFAULT NULL,
  `notification` varchar(1024) NOT NULL,
  `user_created` mediumint(9) NOT NULL,
  `user_changed` mediumint(9) NOT NULL,
  `timestamp_created` int(11) NOT NULL,
  `timestamp_changed` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT='Firmware Parameters'");

  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (2,13,2,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (25,13,5,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (11,13,6,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (26,11,2,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (27,11,5,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (28,11,6,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (29,11,7,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (30,13,7,'albertsarle@gmailcom',541,0,1328978022,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (31,13,11,'albertsarle@gmailcom',541,0,1328978238,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (32,13,1,'albert.sarle@gmail.com',541,0,1328979536,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (33,13,3,'albert.sarle@gmail.com',541,0,1328979536,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (34,13,4,'albert.sarle@gmail.com',541,0,1328979536,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (35,13,8,'albert.sarle@gmail.com',541,0,1328979536,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (36,13,9,'albert.sarle@gmail.com',541,0,1328979536,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (37,13,10,'albert.sarle@gmail.com',541,0,1328979536,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (38,13,12,'albert.sarle@gmail.com',541,0,1328979536,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (39,13,13,'albert.sarle@gmail.com',541,0,1328979536,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (40,13,14,'albert.sarle@gmail.com',541,0,1328979536,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (41,13,15,'albert.sarle@gmail.com',541,0,1328979536,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (42,13,16,'albert.sarle@gmail.com',541,0,1328979536,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (43,13,18,'albert.sarle@gmail.com',541,0,1328979536,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (44,13,19,'albert.sarle@gmail.com',541,0,1328979536,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (45,13,20,'albert.sarle@gmail.com',541,0,1328979536,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (46,13,21,'albert.sarle@gmail.com',541,0,1328979536,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (47,13,22,'albert.sarle@gmail.com',541,0,1328979536,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (48,13,23,'albert.sarle@gmail.com',541,0,1328979536,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (49,13,24,'albert.sarle@gmail.com',541,0,1328979536,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (50,5,20,'albert.sarle@gmail.com',541,0,1329161702,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (51,5,21,'albert.sarle@gmail.com',541,0,1329161702,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (52,5,22,'albert.sarle@gmail.com',541,0,1329161702,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (53,5,23,'albert.sarle@gmail.com',541,0,1329161702,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (54,15,19,'albert.sarle@gmail.com',541,0,1329263969,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (55,5,1,'albert.sarle@gmail.com',541,0,1329872883,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (56,5,5,'albert.sarle@gmail.com',541,0,1329934265,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (57,5,25,'albert.sarle@gmail.com',541,0,1329934265,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (58,5,4,'albert.sarle@gmail.com',541,0,1329934265,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (59,5,2,'albert.sarle@gmail.com',541,0,1329934265,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (60,5,3,'albert.sarle@gmail.com',541,0,1329934265,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (61,5,24,'albert.sarle@gmail.com',541,0,1329934265,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (62,5,6,'albert.sarle@gmail.com',541,0,1329934756,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (63,16,23,'albert.sarle@gmail.com',541,0,1330123306,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (64,16,22,'albert.sarle@gmail.com',541,0,1330123306,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (65,16,21,'albert.sarle@gmail.com',541,0,1330123306,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (66,16,20,'albert.sarle@gmail.com',541,0,1330123306,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (67,16,5,'albert.sarle@gmail.com',541,0,1330123306,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (68,16,6,'albert.sarle@gmail.com',541,0,1330123306,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (69,16,4,'albert.sarle@gmail.com',541,0,1330123306,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (70,16,2,'albert.sarle@gmail.com',541,0,1330123306,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (71,16,3,'albert.sarle@gmail.com',541,0,1330123306,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (72,16,1,'albert.sarle@gmail.com',541,0,1330123306,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (73,16,24,'albert.sarle@gmail.com',541,0,1330123306,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (74,16,8,'albert.sarle@gmail.com',541,0,1330124856,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (75,16,27,'albert.sarle@gmail.com',541,0,1330124856,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (76,16,28,'albert.sarle@gmail.com',541,0,1330126007,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (77,16,29,'albert.sarle@gmail.com',541,0,1330126611,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (78,16,32,'albert.sarle@gmail.com',541,0,1330126992,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (79,16,9,'albert.sarle@gmail.com',541,0,1330126992,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (80,16,30,'albert.sarle@gmail.com',541,0,1330126992,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (81,16,31,'albert.sarle@gmail.com',541,0,1330127476,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (82,14,23,'albert.sarle@gmail.com',541,0,1330459516,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (83,14,22,'albert.sarle@gmail.com',541,0,1330459516,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (84,14,21,'albert.sarle@gmail.com',541,0,1330459516,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (85,14,20,'albert.sarle@gmail.com',541,0,1330459516,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (86,14,8,'albert.sarle@gmail.com',541,0,1330459516,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (87,14,5,'albert.sarle@gmail.com',541,0,1330459516,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (88,14,32,'albert.sarle@gmail.com',541,0,1330459516,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (89,14,31,'albert.sarle@gmail.com',541,0,1330459516,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (90,14,9,'albert.sarle@gmail.com',541,0,1330459516,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (91,14,29,'albert.sarle@gmail.com',541,0,1330459516,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (92,14,30,'albert.sarle@gmail.com',541,0,1330459516,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (93,14,28,'albert.sarle@gmail.com',541,0,1330459516,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (94,14,6,'albert.sarle@gmail.com',541,0,1330459516,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (95,14,4,'albert.sarle@gmail.com',541,0,1330459516,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (96,14,2,'albert.sarle@gmail.com',541,0,1330459516,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (97,14,3,'albert.sarle@gmail.com',541,0,1330459516,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (98,14,27,'albert.sarle@gmail.com',541,0,1330459516,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (99,14,24,'albert.sarle@gmail.com',541,0,1330459516,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (101,19,23,'albert.sarle@gmail.com',541,0,1331383109,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (100,19,18,'albert.sarle@gmail.com',541,0,1331383109,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (102,14,7,'albert.sarle@gmail.com',541,0,1331407815,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (103,14,33,'albert.sarle@gmail.com',541,0,1331410222,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (104,14,34,'albert.sarle@gmail.com',541,0,1331410222,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (105,14,35,'albert.sarle@gmail.com',541,0,1331410598,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (106,16,35,'albert.sarle@gmail.com',541,0,1331410764,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (107,19,35,'albert.sarle@gmail.com',541,0,1331410776,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (108,16,36,'albert.sarle@gmail.com',541,0,1331597801,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (109,19,36,'albert.sarle@gmail.com',541,0,1331597808,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (110,19,22,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (111,19,7,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (112,19,21,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (113,19,20,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (114,19,5,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (115,19,33,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (116,19,34,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (117,19,6,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (118,19,27,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (119,19,24,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (120,19,8,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (121,19,32,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (122,19,31,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (123,19,9,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (124,19,29,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (125,19,30,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (126,19,28,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (127,19,4,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (128,19,2,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (129,19,3,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (130,19,1,'albert.sarle@gmail.com',541,0,1331677498,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (157,4,23,'albert.sarle@gmail.com',541,0,1332284532,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (158,4,22,'albert.sarle@gmail.com',541,0,1332284532,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (133,4,21,'albert.sarle@gmail.com',541,0,1332271883,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (134,4,20,'albert.sarle@gmail.com',541,0,1332271883,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (135,4,5,'albert.sarle@gmail.com',541,0,1332271883,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (136,4,6,'albert.sarle@gmail.com',541,0,1332271883,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (137,4,35,'albert.sarle@gmail.com',541,0,1332271883,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (138,4,25,'albert.sarle@gmail.com',541,0,1332271883,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (139,4,4,'albert.sarle@gmail.com',541,0,1332271883,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (140,4,2,'albert.sarle@gmail.com',541,0,1332271883,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (141,4,3,'albert.sarle@gmail.com',541,0,1332271883,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (142,4,1,'albert.sarle@gmail.com',541,0,1332271883,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (143,4,27,'albert.sarle@gmail.com',541,0,1332271883,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (144,4,24,'albert.sarle@gmail.com',541,0,1332271883,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (145,21,23,'albert.sarle@gmail.com',541,0,1332272787,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (146,21,22,'albert.sarle@gmail.com',541,0,1332272787,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (147,21,21,'albert.sarle@gmail.com',541,0,1332272787,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (148,21,20,'albert.sarle@gmail.com',541,0,1332272787,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (149,21,5,'albert.sarle@gmail.com',541,0,1332272787,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (150,21,6,'albert.sarle@gmail.com',541,0,1332272787,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (151,21,25,'albert.sarle@gmail.com',541,0,1332272787,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (152,21,4,'albert.sarle@gmail.com',541,0,1332272787,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (153,21,2,'albert.sarle@gmail.com',541,0,1332272787,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (154,21,3,'albert.sarle@gmail.com',541,0,1332272787,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (155,21,1,'albert.sarle@gmail.com',541,0,1332272787,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (156,21,24,'albert.sarle@gmail.com',541,0,1332272787,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (159,5,39,'albert.sarle@gmail.com',541,0,1332286129,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (160,4,39,'albert.sarle@gmail.com',541,0,1332286355,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (161,21,39,'albert.sarle@gmail.com',541,0,1332286487,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (162,21,11,'albert.sarle@gmail.com',541,0,1332286488,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresFirmware} (id,fid,pid,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (163,14,36,'albert.sarle@gmail.com',541,0,1332454981,0);");


  // creació de la taula de parametres generics
  $items[] = update_sql("CREATE TABLE IF NOT EXISTS `guifi_parametres` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nom` varchar(45) DEFAULT NULL,
  `default_value` varchar(45) DEFAULT NULL,
  `origen` varchar(80) DEFAULT NULL,
  `dinamic` tinyint(1) DEFAULT '0',
  `notification` varchar(1024) NOT NULL,
  `user_created` mediumint(9) NOT NULL,
  `user_changed` mediumint(9) NOT NULL,
  `timestamp_created` int(11) NOT NULL,
  `timestamp_changed` int(11) NOT NULL,
  PRIMARY KEY (`id`)
  ) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT='Generic Parameters'
  ");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (1,'wireless1ssid',NULL,'linkedto_ssid',1,'albertsarle@gmailcom',541,541,0,1336845453);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (2,'wanipv4',NULL,'ipv4_ip',1,'albertsarle@gmailcom',541,541,0,1336845749);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (3,'wannetmask',NULL,'radios_1_interfaces_1_ipv4_0_links_1_interface_ipv4_ipv4',1,'albertsarle@gmailcom',541,541,0,1336845774);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (4,'wangateway',NULL,'radios_1_interfaces_1_ipv4_0_links_1_interface_ipv4_ipv4',1,'albertsarle@gmailcom',541,541,0,1336845729);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (5,'primarydns',NULL,'zone_dns_servers',1,'albertsarle@gmailcom',541,541,0,1332285385);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (6,'secondarydns',NULL,'secondarydns',1,'albertsarle@gmailcom',541,541,0,1332285289);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (7,'devnick',NULL,'device_name',1,'albertsarle@gmailcom',541,541,0,1332285366);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (8,'locnick',NULL,'node_name',1,'albertsarle@gmailcom',541,541,0,1332285374);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (9,'radio1ieee_mode',NULL,'radio_mode.1',1,'albertsarle@gmailcom',541,541,0,1336845811);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (10,'radio1rate.max',NULL,'radio.1.rate.max 10',1,'albertsarle@gmailcom',541,541,0,1336845830);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (11,'radio1txpower','6','radio.1.txpower',0,'albertsarle@gmailcom',541,541,0,1332283508);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (12,'radio1acktimeout',NULL,'radio.1.acktimeout 12',1,'albertsarle@gmailcom',541,541,0,1336845784);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (13,'radio1rx_antenna',NULL,'radio.1.rx_antenna 13',1,'albertsarle@gmailcom',541,541,0,1336845835);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (14,'radio1tx_antenna',NULL,'radio.1.tx_antenna 14',1,'albertsarle@gmailcom',541,541,0,1336845880);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (15,'radio1ext_antenna',NULL,'radio.1.ext_antenna 15',1,'albertsarle@gmailcom',541,541,0,1336845803);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (16,'radio1mcastrate',NULL,'radio.1.mcastrate 16',1,'albertsarle@gmailcom',541,541,0,1336845818);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (19,'prova1',NULL,'prova2',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (18,'antennaselection',NULL,'antenna.selection 18',1,'albertsarle@gmailcom',541,541,0,1336845909);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (20,'firmware_version',NULL,'firmware_version',1,'albertsarle@gmailcom',541,541,0,1329162058);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (21,'firmware_name',NULL,'firmware_name',1,'albertsarle@gmailcom',541,541,0,1329162065);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (22,'device_name',NULL,'node_name',1,'albertsarle@gmailcom',541,541,0,1332285362);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (23,'device_id','aaaaa','device_id',1,'albertsarle@gmailcom',541,541,0,1332285354);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (24,'zone_ntp_servers',NULL,'zone_ntp_servers',1,'albertsarle@gmail.com',541,541,0,1332285275);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (25,'txpwr',NULL,NULL,0,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (26,'nombre',NULL,'origen',1,'',541,0,1329501088,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (27,'zone_id',NULL,'zone_id',1,'',541,541,1330124406,1332285208);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (28,'radio1ssid',NULL,'radio_ssid.1',1,'',541,541,1330125885,1336845946);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (29,'radio1order',NULL,'radio_order.1',1,'',541,541,1330126599,1336845938);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (30,'radio1protocol',NULL,'radio_protocol.1',1,'',541,541,1330126785,1336845824);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (31,'radio1channel',NULL,'radio_channel.1',1,'',541,541,1330126858,1336845798);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (32,'radio1antenna_gain',NULL,'radio_antenna_gain.1',1,'',541,541,1330126897,1336845792);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (33,'routerOS_24_band_value','2ghz-b','',0,'',541,541,1331409135,1331409200);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (34,'routerOS_5_band_value','5ghz','',0,'',541,541,1331409239,1331409274);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (35,'snmp_contact','guifi@guifi.net','',0,'',541,0,1331410572,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (36,'firmware_description','firmware_description','firmware_description',1,'',541,541,1331597765,1332450428);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (37,'zone_ternary_dns','','zone_ternary_dns',1,'',541,0,1332286041,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (38,'ternary_dns','','zone_ternary_dns',1,'',541,0,1332286090,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametres} (id,nom,default_value,origen,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (39,'ternarydns','','zone_ternary_dns',1,'',541,0,1332286115,0);");  
  

  // creació de la taula de característiques
  $items[] = update_sql("CREATE TABLE IF NOT EXISTS `guifi_caracteristica` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `nom` varchar(45) NOT NULL,
  `tipus` enum('bool','numeric','text','rang') NOT NULL,
  `notification` varchar(1024) NOT NULL,
  `user_created` mediumint(9) NOT NULL,
  `user_changed` mediumint(9) NOT NULL,
  `timestamp_created` int(11) NOT NULL,
  `timestamp_changed` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT='Characteristics'
  ");

  $items[] = update_sql("INSERT INTO {guifi_caracteristica} (id,nom,tipus,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (1,'max_radios','numeric','albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_caracteristica} (id,nom,tipus,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (2,'maxethernet','numeric','albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_caracteristica} (id,nom,tipus,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (4,'interface_names','text','''albertsarle@gmailcom''',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_caracteristica} (id,nom,tipus,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (3,'access_point','bool','''albertsarle@gmailcom''',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_caracteristica} (id,nom,tipus,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (5,'vlan','bool','''albertsarle@gmailcom''',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_caracteristica} (id,nom,tipus,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (6,'station','bool','''albertsarle@gmailcom''',541,0,0,0);");

  // creació de la taula de UnSolclics
  $items[] = update_sql("CREATE TABLE IF NOT EXISTS `guifi_configuracioUnSolclic` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `mid` int(11) NOT NULL,
  `fid` int(11) NOT NULL,
  `enabled` tinyint(1) unsigned zerofill DEFAULT '0',
  `plantilla` text,
  `tipologia` tinyint(1) unsigned zerofill NOT NULL DEFAULT '0',
  `notification` varchar(1024) NOT NULL,
  `user_created` mediumint(9) NOT NULL,
  `user_changed` mediumint(9) NOT NULL,
  `timestamp_created` int(11) NOT NULL,
  `timestamp_changed` int(11) NOT NULL,
  `template_file` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT='UnSolclic Configurations'
  ");
  
$items[] = my_update_sql("INSERT INTO guifi_configuracioUnSolclic (id,mid,fid,enabled,plantilla,tipologia,notification,user_created,user_changed,timestamp_created,timestamp_changed,template_file) VALUES (19,25,13,1,%s,0,'albertsarle@gmailcom',541,541,0,1336846001,NULL);", 'aaa.1.status=disabled
aaa.status=disabled
bridge.1.devname=br0
bridge.1.fd=1
bridge.1.port.1.devname=eth0
bridge.1.port.2.devname=ath0
bridge.status=disabled
dhcpc.1.devname=br0
dhcpc.1.status=disabled
dhcpc.status=disabled
dhcpd.1.devname=eth0
dhcpd.1.end=192.168.1.254
dhcpd.1.lease_time=3600
dhcpd.1.netmask=255.255.255.0
dhcpd.1.start=192.168.1.33
dhcpd.1.status=enabled
dhcpd.status=enabled
ebtables.1.cmd=-t nat -A PREROUTING --in-interface ath0 -j arpnat --arpnat-target ACCEPT
ebtables.1.status=enabled
ebtables.2.cmd=-t nat -A POSTROUTING --out-interface ath0 -j arpnat --arpnat-target ACCEPT
ebtables.2.status=enabled
ebtables.3.cmd=-t broute -A BROUTING --protocol 0x888e --in-interface ath0 -j DROP
ebtables.3.status=enabled
ebtables.status=disabled
httpd.https.status=enabled
httpd.port.http=80
httpd.status=enabled
iptables.1.status=enabled
iptables.1.cmd=-t nat -I POSTROUTING -o ath0 -j MASQUERADE
iptables.2.status=disabled
iptables.status=enabled
netconf.1.devname=eth0
netconf.1.ip=192.168.1.1
netconf.1.netmask=255.255.255.0
netconf.1.promisc=enabled
netconf.1.status=enabled
netconf.1.up=enabled
netconf.2.allmulti=enabled
netconf.2.devname=ath0
netconf.2.status=enabled
netconf.2.up=enabled
netconf.3.devname=br0
netconf.3.ip=192.168.1.20
netconf.3.netmask=255.255.255.0
netconf.3.status=disabled
netconf.3.up=enabled
netconf.status=enabled
netmode=router
ppp.1.password=
ppp.1.status=disabled
ppp.status=disabled
radio.1.ack.auto=enabled
radio.1.ackdistance=450
radio.1.ani.status=enabled
radio.1.chanshift=0
radio.1.clksel=0
radio.1.countrycode=724
radio.1.devname=ath0
radio.1.frag=off
radio.1.mode=managed
radio.1.rate.auto=enabled
radio.1.rts=off
radio.1.tx_antenna_diversity=disabled
radio.1.rx_antenna_diversity=disabled
radio.1.status=enabled
radio.1.thresh62a=28
radio.1.thresh62b=28
radio.1.thresh62g=28
radio.ratemodule=ath_rate_minstrel
radio.countrycode=724
radio.status=enabled
resolv.host.1.status=enabled
resolv.nameserver.1.status=enabled
resolv.nameserver.2.status=enabled
resolv.status=enabled
route.1.devname=ath0
route.1.ip=0.0.0.0
route.1.netmask=0
route.1.status=enabled
route.status=enabled
snmp.community=public
snmp.contact=guifi@guifi.net
snmp.status=enabled
telnetd.status=enabled
sshd.status=enabled
tshaper.status=disabled
users.1.name=root
users.1.password=JjYNUu92yMZd.
users.1.status=enabled
users.status=enabled
wireless.1.ap=
wireless.1.authmode=1
wireless.1.compression=0
wireless.1.devname=ath0
wireless.1.fastframes=0
wireless.1.frameburst=0
wireless.1.hide_ssid=disabled
wireless.1.l2_isolation=enabled
wireless.1.macclone=disabled
wireless.1.rssi_led1=1
wireless.1.rssi_led2=15
wireless.1.rssi_led3=22
wireless.1.rssi_led4=30
wireless.1.security=none
wireless.1.status=enabled
wireless.1.wds=disabled
wireless.1.wmm=disabled
wireless.1.wmmlevel=-1
wireless.status=enabled
wpasupplicant.device.1.status=disabled
wpasupplicant.status=disabled
wireless.1.ssid=guifi.net-{{ wireless1ssid }}
netconf.2.ip={{ipv4_ip }}
netconf.2.netmask={{ ipv4_netmask }}
route.1.gateway={{ wangateway }}
resolv.nameserver.1.ip={{  zone_primary_dns }}
resolv.nameserver.2.ip={{  zone_secondary_dns }}
resolv.host.1.name={{ dev.nick }}
snmp.location={{ node_nick }}
radio.1.ieee_mode=b
radio.1.rate.max=11M
radio.1.txpower={{ radio1txpower }}
radio.1.acktimeout=45
radio.1.rx_antenna=2
radio.1.tx_antenna=2
radio.1.ext_antenna=disabled
radio.1.mcastrate=11');

$items[] = update_sql("INSERT INTO {guifi_configuracioUnSolclic} (id,mid,fid,enabled,plantilla,tipologia,notification,user_created,user_changed,timestamp_created,timestamp_changed,template_file) VALUES (6,31,16,1,'# Generat per a:
# {{ firmware_name }}
:log info \"Unsolclic for {{ dev.id }}-{{ dev.nick }} going to be executed.\"
#
# Configuration for {{ firmware_description}}
# Trasto: {{  dev.id  }}-{{ dev.nick }}
#
# Methods to upload/execute this script:
# 1.-As a script. Upload this output as a script either with:
# &nbsp;&nbsp;&nbsp;&nbsp;a.Winbox (with Linux, wine required)
# &nbsp;&nbsp;&nbsp;&nbsp;b.Terminal (telnet, ssh...)
# &nbsp;&nbsp;&nbsp;Then execute the script with:
# &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;>&nbsp;/system script run script_name
# 2.-Fitxer importat:
# &nbsp;&nbsp;&nbsp;&nbsp;Desa aquesta \"sortida\" a un fitxer, després puja''l al router
# &nbsp;&nbsp;&nbsp;&nbsp;fent servir FTP amb un nom de l''estil \"script_name.rsc\".
# &nbsp;&nbsp;&nbsp;&nbsp;(note, l''extensió \".rsc\" es un requisit)
# &nbsp;&nbsp;&nbsp;&nbsp;Executa el fitxer importat amb la comanda:
# &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;>&nbsp;/import script_name
# 3.-Telnet copia i enganxar:
# &nbsp;&nbsp;&nbsp;&nbsp;Open a terminal session, and cut&paste this output
# &nbsp;&nbsp;&nbsp;&nbsp;directly on the terminal input.
#
# Notes:
# -routing-test package is required if you use RouterOSv2.9 , be sure you have it enabled at system packages
# -wlans should be enabled manually, be sure to set the correct antenna (a or b)
# &nbsp;&nbsp;according in how did you connect the cable to the miniPCI. Keep the
# &nbsp;&nbsp;power at the minimum possible and check the channel.
# -The script doesn''t reset the router, you might have to do it manually
# -You must have write access to the router
# -MAC access (winbox, MAC telnet...) method is recommended
# &nbsp;&nbsp;(the script reconfigures some IP addresses, so communication can be lost)
# -No changes are done in user passwords on the device
# -A Read Only guest account with no password will be created to allow guest access
# &nbsp;&nbsp;to the router with no danger of damage but able to see the config.
# -Be sure that all packages are activated.
# -Don''t run the script from telnet and being connected through an IP connection at
# &nbsp;&nbsp;the wLan/Lan interface: This interface will be destroyed during the script.
#
/ system identity set name={{ dev.nick }}
#
# DNS (client &#038; server cache) zone: {{ zone_id }}
{% if zone_primary_dns %}
{% if zone_secondary_dns %}
/ip dns set servers={{ zone_primary_dns }},{{ zone_secondary_dns }} allow-remote-requests=yes
{% else %}
/ip dns set  servers={{ zone_primary_dns }} allow-remote-requests=yes
{% endif %}
{% endif %}
:delay 1
#
# NTP (client &#038; server cache) zone:  {{ zone_id }}
{% if zone_primary_ntp %}
{% if zone_secondary_ntp %}
/system ntp client set enabled=yes mode=unicast primary-ntp={{zone_primary_ntp }} secondary-ntp={{ zone_secondary_ntp }}
{% else %}
/system ntp client set enabled=yes mode=unicast primary-ntp={{ zone_primary_ntp }}
{% endif %}
{% endif %}
:delay 1
#
# Bandwidth-server
/ tool bandwidth-server set enabled=yes authenticate=no allocate-udp-ports-from=2000
#
# SNMP
/snmp set contact=\"{{ snmp_contact }}\" enabled=yes location=\"{{ dev.node_nick }}\"
#
# Guest user
/user
:foreach i in [find group=read] do={/user remove $i;}
add name=\"guest\" group=read address=0.0.0.0/0 comment=\"\" disabled=no
#
# Graphing
/tool graphing interface add
{% if dev.logserver %}
# Ip for ServerLogs
/system logging
:foreach i in [/system logging find action=remote]
do={/system logging remove $i }
:foreach i in [/system logging action find name=guifi]
do=[/system logging action remove $i]
/system logging action add name={{ dev.nick }} target=remote remote={{ dev.logserver }}:514 src-address={{ dev.radios[0].ipv4}}
/system logging add action=guifi_remot topics=critical
/system logging add action=guifi_remot topics=account
{% endif %}
{% if dev.mode != ''client'' %}
# Remove current wLan/Lan bridge if exists
:foreach i in [/interface bridge find name=wLan/Lan] \
do={:foreach i in [/interface bridge port find bridge=wLan/Lan] \
do={/interface bridge port remove $i; \
:foreach i in [/ip address find interface=wLan/Lan] \
do={/ip address remove $i;};};
/interface bridge remove $i;}
# Construct main bridge on wlan1 &#038; ether1
/ interface bridge
add name=\"wLan/Lan\"
/ interface bridge port
add interface=ether1 bridge=wLan/Lan
add interface=wlan1 bridge=wLan/Lan
{% endif %}
{% if dev.radios %}
:delay 1
#
{# la declarem aqui perque sino no hi puc accedir fora del foreach radio #}
{% set ospf_routerid = ''ospf_routerid'' %}
{% for radio_id, radio in dev.radios %}
# Radio#: {{ radio.radiodev_counter }} {{ radio.ssid }}
{% spaceless %}
/interface wireless set wlan{{ radio.radiodev_counter+1 }} name=\"wlan{{ radio.radiodev_counter+1 }}\" \
radio-name=\"{{ radio.ssid }}\" mode={{ radio.mode }}-bridge ssid=\"guifi.net-{{ radio.ssid }}\" \
{% if radio.mode == ''ap'' %}
   {% set mode = ''ap-bridge'' %}
    {% if radio.channel < 5000 %}
      {% set band = ''2.4ghz-b'' %}
    {% else %}
      {% set band = ''5ghz'' %}
    {% endif %}
{% elseif (radio.mode == ''client'' or radio.mode == ''clientrouted'') %}
   {% set mode = ''station'' %}
    {% if radio.channel != 5000 %}
      {% set band = ''2.4ghz-b'' %}
    {% else %}
      {% set band = ''5ghz'' %}
    {% endif %}
{% endif %}
{% if radio.protocol == ''802.11n'' and radio.channel > 5000 and mai == true %}
  {% set band = ''5ghz-a/n'' %}
{% endif %}
band=\"{{ band }}\" \
frequency-mode=regulatory-domain country=spain antenna-gain={{ radio.antenna_gain }} \
    {% set channel = radio.channel %}
    {% if radio.channel != 0 and radio.channel != 5000 %}
      {% if radio.channel < 20 %}
        {% set channel = 2407 + (radio.channel * 5) %}
      {% endif %}
frequency={{ channel }} \
    {% endif %}
    {% if ((radio.1.band == ''5ghz'' or ''5ghz-a'') and (channel == 5000 )) or
         ((radio.1.band == ''2.4ghz-b'' or ''2ghz-b'') and (channel == 0 )) %}
 dfs-mode=radar-detect \
    {% else %}
 dfs-mode=none \
    {% endif %}
    {% if radio.antenna_mode =='''' %}
 wds-mode=static wds-default-bridge=none wds-default-cost=100 \
    {% else %}
      {% if radio.antenna_mode != ''Main''%}
         {% set antenna_mode = ''ant-b'' %}
      {% else %}
         {% set antenna_mode = ''ant-a'' %}
      {% endif %}
 antenna-mode={{ antenna_mode }} wds-mode=static wds-default-bridge=none wds-default-cost=100 \
    {% endif %}
 wds-cost-range=50-150 wds-ignore-ssid=yes hide-ssid=no
    {% for interface_id, interface in radio.interfaces %}
:delay 1
# Type: {{ interface.interface_type }}
      {% if interface.interface_type == ''wds/p2p'' %}
# Remove all existing wds interfaces
:foreach i in [/interface wireless wds find master-interface=wlan{{ radio.radiodev_counter+1 }}] \
do={:foreach n in [/interface wireless wds get $i name] \
do={:foreach inum in [/ip address find interface=$n] \
do={/ip address remove $inum;};}; \
/interface wireless wds remove $i;}
        {% if interface.ipv4 %}
          {% for ipv4_id,ipv4 in interface.ipv4 %}
                    {% if ipv4.links %}
                      {% for link_id, link in ipv4.links %}
                        {% if link.flag == ''Working'' or link.flag == ''Testing'' or link.flag == ''Building'' %}
                           {% set disabled = ''no'' %}
                        {% else %}
                           {% set disabled = ''yes'' %}
                        {% endif %}
                        {% set wds_name = ''wds_''. link.interface.ipv4.host_name %}
                        {% if not link.interface.mac %}
                          {% set link_mac = ''FF:FF:FF:FF:FF:FF'' %}
                        {% else %}
                          {% set link_mac = link.interface.mac %}
                        {% endif %}
/ interface wireless wds
add name=\"wds_{{ link.interface.ipv4.host_name }}\" master-interface=wlan{{ radio_id+1 }} wds-address={{ link_mac }} disabled={{ disabled }}
/ ip address add address={{ ipv4.ipv4 }}/{{ ipv4.maskbits }} network={{ ipv4.netid }} broadcast={{ ipv4.broadcast }} interface=wds_{{ link.interface.ipv4.host_name }} disabled={{ disabled }} comment=\"wds_{{ link.interface.ipv4.host_name }}\"
                        {% if link.routing == ''OSPF'' %}
                          {{ _self.ospf_interface(''wds_'' ~ link.interface.ipv4.host_name , ipv4.netid , ipv4.maskbits , ospf_name , ospf_zone, ospf_id, ''no'') }}
                          {{ _self.bgp_peer(link.device_id, link.interface.ipv4.host_name, link.interface.ipv4.ipv4, ''yes'') }}
                        {% else %}
                          {{ _self.ospf_interface(''wds_'' ~ link.interface.ipv4.host_name , ipv4.netid , ipv4.maskbits , ospf_name , ospf_zone, ospf_id, ''yes'') }}
                          {{ _self.bgp_peer(link.device_id, link.interface.ipv4.host_name, link.interface.ipv4.ipv4, ''no'') }}
                        {% endif %}
                      {% endfor %}
                    {% endif %}
          {% endfor %}
        {% endif %}
      {% else %}
          {# // wLan, wLan/Lan, Hotspot or client #}
          {% if interface.ipv4 %}
             {% for ipv4_id,ipv4 in interface.ipv4 %}
                {# aixo a l''original no es ben be aixi #}
                {% if interface.interface_type == ''wLan/Lan'' %}
                  {% set iname = interface.interface_type %}
                  {% set ospf_routerid = ipv4.ipv4 %}
                {% else  %}
                  {% set radioindex = radio_id+1 %}
                  {% set iname = ''wlan'' ~ radioindex %}
                {% endif %}
/ip address
                {% if interface.interface_type == ''Wan''%}
:foreach i in [find interface={{ iname }}] do={remove $i}
                {% endif  %}
:foreach i in [find address=\"{{ ipv4.ipv4 }}/{{ ipv4.maskbits }}\"] do={remove $i}
/ ip address add address={{ ipv4.ipv4 }}/{{ ipv4.maskbits }} network={{ ipv4.netid }} broadcast={{ ipv4.broadcast }} interface={{ iname }} disabled=no
/ routing bgp network
:foreach i in [/routing bgp network find network={{ ipv4.netid }}/{{ ipv4.maskbits }}] do={/routing bgp network remove $i;}
add network={{ ipv4.netid }}/{{ ipv4.maskbits }} disabled=no
                {% if dev.mode != ''client'' %}
/ routing ospf interface
:foreach i in [/routing ospf interface find interface={{ iname }}] do={/routing ospf interface remove $i;}
add interface={{ iname }}
/ routing ospf network
:foreach i in [/routing ospf network find network={{ ipv4.netid }}/{{ ipv4.maskbits }}] do={/routing ospf network remove $i;}
add network={{ ipv4.netid }}/{{ ipv4.maskbits }} area={%if ipv4.ospf_name=='''' %} backbone{% else %}{{ ipv4.ospf_name }}{% endif %} disabled=no
                {% else %}
/ routing ospf interface
:foreach i in [/routing ospf interface find interface={{ iname }}] do={/routing ospf interface remove $i;}
add interface={{ iname }}
/ routing ospf network
:foreach i in [/routing ospf network find network={{ ipv4.netid }}/{{ ipv4.maskbits }}] do={/routing ospf network remove $i;}
add network={{ ipv4.netid }}/{{ ipv4.maskbits }} area={{ ipv4.ospf_name }} disabled=yes
                {% endif %}
                {% if interface.interface_type == ''HotSpot'' %}
#
# HotSpot
/interface wireless
:foreach i in [find name=hotspot{{ radio.id+1 }}] do={remove $i}
add name=\"hotspot{{ radio.id+1 }}\" arp=enabled master-interface=wlan{{ radio.id+1 }} ssid=\"guifi.net-{{ hotspot_ssid}}\" disabled=\"no\"
/ip address'');
:foreach i in [find address=\"192.168.{{ radio.id+100 }}.1/24\"] do={remove $i}
/ip address add address=192.168.{{ radio.id+100 }}.1/24 interface=hotspot{{ radio.id+1 }} disabled=no
/ip pool
:foreach i in [find name=hs-pool-{{ radio.id+100 }}] do={remove $i}
add name=\"hs-pool-{{ radio.id+100 }}\" ranges=192.168.{{ radio.id+100 }}.2-192.168.{{ radio.id+100 }}.254
/ip dhcp-server
:foreach i in [find name=hs-dhcp-{{ radio.id+100 }}] do={remove $i}
add name=\"hs-dhcp-{{ radio.id+100 }}\" interface=hotspot{{ radio.id+1 }} lease-time=1h address-pool=hs-pool-{{ radio.id+100 }} bootp-support=static authoritative=after-2sec-delay disabled=no
/ip dhcp-server network
:foreach i in [find address=\"192.168.{{ radio.id+100 }}.0/24\"] do={remove $i}
add address=192.168.{{ radio.id+100 }}.0/24 gateway=192.168.{{ radio.id+100 }}.1 domain=guifi.net comment=dhcp-{{ radio.id }}
/ip hotspot profile
:foreach i in [find name=hsprof{{ radio.id+1 }}] do={remove $i}
add name=\"hsprof{{ radio.id }}\" hotspot-address=192.168.{{ radio.id+100 }}.1 dns-name=\"guests.guifi.net\" html-directory=hotspot smtp-server=0.0.0.0 login-by=http-pap,trial split-user-domain=no trial-uptime=30m/1d trial-user-profile=default use-radius=no
/ip hotspot user profile
set default name=\"default\" advertise-url=http://guifi.net/trespassos/
/ip hotspot
:foreach i in [find name=hotspot{{ radio.id+1 }}] do={remove $i}
add name=\"hotspot{{ radio.id+1 }}\" interface=hotspot{{ radio.id+1 }} address-pool=hs-pool-{{ radio.id+100 }} profile=hsprof{{ radio.id+1 }} idle-timeout=5m keepalive-timeout=none addresses-per-mac=2 disabled=no
end of HotSpot
                {% endif %} {# end hotspot #}
:delay 1
                {% if interface.interface_type != ''HotSpot'' and interface.interface_type != ''Wan'' %}
                  {% if mode == ''ap-bridge'' %}
                    {% set maxip = ip2long(ipv4.netstart) +1  %}
                    {% if maxip +5 >  ip2long(ipv4.netend) -5 %}
                      {% set maxip = ip2long(ipv4.netend) %}
                      {% set dhcpDisabled = ''yes'' %}
                    {% else %}
                      {% set maxip = maxip +5 %}
                      {% set dhcpDisabled = ''no'' %}
                    {% endif %}
#
# DHCP
:foreach i in [/ip pool find name=dhcp-{{ iname }}] do={/ip pool remove $i;}
/ip pool add name=dhcp-{{ iname }} ranges={{ long2ip(maxip) }}-{{ ipv4.netend }}
:foreach i in [/ip dhcp-server find name=dhcp-{{ iname }}] do={/ip dhcp-server remove $i;}
/ip dhcp-server add name=dhcp-{{ iname }} interface={{ iname }} address-pool=dhcp-{{ iname }} disabled={{ dhcpDisabled }}
:foreach i in [/ip dhcp-server network find address=\"{{ ipv4.netid }}/{{ ipv4.maskbits }}\"] do={/ip dhcp-server network remove $i;}
/ip dhcp-server network add address={{ ipv4.netid }}/{{ ipv4.maskbits }} gateway={{ ipv4.netstart }} domain=guifi.net comment=dhcp-{{ iname }}
/ip dhcp-server lease
:foreach i in [find comment=\"\"] do={remove $i;}
:delay 1
                    {% if ipv4.links %}
                      {% for link_id, link in ipv4.links %}
                        {% if link.interface.ipv4.ipv4 %}
                          {% set maxip = link.interface.ipv4.ipv4 +1  %}
                        {% endif %}
                        {% if not link.interface.mac %}
                          {% set rmac = ''ff:ff:ff:ff:ff:ff''  %}
                        {% else %}
                          {% set rmac = link.interface.mac  %}
                        {% endif %}
add address={{ link.interface.ipv4.ipv4 }} mac-address={{ rmac }} client-id={{ link.interface.ipv4.host_name }} server=dhcp-{{ iname }}
                      {% endfor %}
                      #
                    {% endif %}
                  {% endif %}
                {% endif %}
             {% endfor %}
          {% endif  %}
      {% endif  %}
    {% endfor %}
{% endspaceless %}

#
:delay 1
#
  {% endfor %} {# end for radio #}
{% endif %}
{% if firewall %}
{% endif %}
# Routed device
#
# {{ t(''Other cable connections'') }}
{% if dev.interfaces %}
  {% for interface_i, interface in dev.interfaces %}
    {% if interface.interface_type == ''vlan'' %}
        {% set iname = ''wLan/Lan'' %}
    {% elseif interface.interface_type == ''vlan2'' %}
        {% set iname = ''ether2'' %}
    {% elseif interface.interface_type == ''vlan3'' %}
        {% set iname = ''ether3'' %}
    {% elseif interface.interface_type == ''vlan4'' %}
        {% set iname = ''wLan/Lan'' %}
    {% elseif interface.interface_type == ''Wan'' %}
        {% set iname = ''wLan/Lan'' %}
    {% else %}
        {% set iname = interface.interface_type  %}
    {% endif %}
  {% endfor %}
{% endif  %}
#
# {{ t(''Internal addresses NAT'') }}
:foreach i in [/ip firewall nat find src-address=\"172.16.0.0/12\"] do={/ip firewall nat remove $i;}
:foreach i in [/ip firewall nat find src-address=\"192.168.0.0/16\"] do={/ip firewall nat remove $i;}
/ip firewall nat
add chain=srcnat src-address=\"192.168.0.0/16\" dst-address=!192.168.0.0/16 action=src-nat to-addresses={{ ospf_routerid }} comment=\"\" disabled=no
add chain=srcnat src-address=\"172.16.0.0/12\" dst-address=!172.16.0.0/12 protocol=!ospf action=src-nat to-addresses={{ ospf_routerid }} comment=\"\" disabled=no
#
# {{ t(''BGP Routing'') }}
# BGP & OSPF Filters
:foreach i in [/routing filter find chain=ospf-in] do={/routing filter remove $i;}
:foreach i in [/routing filter find chain=ospf-out] do={/routing filter remove $i;}
:foreach i in [/routing filter find chain=ebgp-in] do={/routing filter remove $i;}
:foreach i in [/routing filter find chain=ebgp-out] do={/routing filter remove $i;}
/ routing filter
add action=discard chain=ebgp-in comment=\"1. Discard insert non 10.x routes from BGP peer\" disabled=no invert-match=no prefix=!10.0.0.0/8 prefix-length=!8-32
add action=discard chain=ebgp-out comment=\"2. Discard send non 10.x routes to BGP peer\" disabled=no invert-match=no prefix=!10.0.0.0/8 prefix-length=!8-32
add action=accept chain=ospf-in comment=\"3. Accept insert 10.x routes from OSPF neighbor\" disabled=no invert-match=no prefix=10.0.0.0/8 prefix-length=8-32
add action=accept chain=ospf-in comment=\"4. Accept insert 172.x routes from OSPF neighbor\" disabled=no invert-match=no prefix=172.16.0.0/12 prefix-length=8-32
add action=discard chain=ospf-in comment=\"5. Discard insert non 10.x and 172.x from OSPF neighbor\" disabled=no invert-match=no
add action=accept chain=ospf-out comment=\"6. Allow send 10.x routes to OSPF neighbor\" disabled=no invert-match=no prefix=10.0.0.0/8 prefix-length=8-32
add action=accept chain=ospf-out comment=\"7. Allow send 172.x routes to OSPF neighbor\" disabled=no invert-match=no prefix=172.16.0.0/12 prefix-length=8-32
add action=discard chain=ospf-out comment=\"8. Discard send non 10.x and 172.x to OSPF neighbor\" disabled=no invert-match=no
#
# {{ t(''BGP instance'') }}
/ routing bgp instance
set default name=\"default\" as={{ dev.id }} router-id={{ ospf_routerid }} \
redistribute-connected=no redistribute-static=no redistribute-rip=no \
redistribute-ospf=yes redistribute-other-bgp=yes out-filter=ebgp-out \
client-to-client-reflection=yes comment=\"\" disabled=no
#
# {{ t(''OSPF Routing'') }}
/routing ospf instance set default name=default router-id={{ ospf_routerid }} comment=\"\" disabled=no distribute-default=never \
redistribute-bgp=as-type-1 redistribute-connected=no redistribute-other-ospf=no redistribute-rip=no redistribute-static=no in-filter=ospf-in out-filter=ospf-out
#
:log info \"Unsolclic for {{ dev.id}}-{{ dev.nick }} executed.\"
/
{% macro bgp_peer(id, host_name, ipv4, disabled) %}
/ routing bgp peer
:foreach i in [find name={{ host_name }}] do={/routing bgp peer remove $i;}
add name=\"{{ host_name }}\" instance=default remote-address={{ ipv4 }} remote-as={{ id }} \
multihop=no route-reflect=no ttl=default in-filter=ebgp-in out-filter=ebgp-out disabled={{ disabled }}{% endmacro %}
{% macro ospf_interface(iname, netid, maskbits, ospf_name , ospf_zone, ospf_id, disabled) %}
/ routing ospf interface
:foreach i in [/routing ospf interface find interface={{ iname }}] do={/routing ospf interface remove $i;}
add interface={{ iname }}
/ routing ospf network
:foreach i in [/routing ospf network find network={{ netid }}/{{ maskbits }}] do={/routing ospf network remove $i;}
add network={{ netid }}/{{ maskbits }} area={{ ospf_name }} disabled={{ disabled }}{% endmacro %}',0,'albertsarle@gmailcom',541,541,0,1333305965,'mikrotik.tpl');");

$items[] = update_sql("INSERT INTO {guifi_configuracioUnSolclic} (id,mid,fid,enabled,plantilla,tipologia,notification,user_created,user_changed,timestamp_created,timestamp_changed,template_file) VALUES (22,18,4,1,'# Generat per a:
# {{ firmware_name }}
#
# unsolclic version: v3.7
#
#######################################################
#WARNING!thisunsolclicisforuseonlyonDD-WRTv23beta2firmware''s.
#DD-WRTV23sp2orV24containssomechangesintheuserauthentificationmethod
#V23beta2usesplain-textpasswordandV23sp2andv24needthepasswordtobecrypted!!
#Youmayloseaccesstoyourdevice,youwillbewarned.
#Somepartsofunsolclicv23Beta2canbereusedinV23sp2/v24ifyouwanttotest,replace
#thepasswordline:nvramsethttp_passwd=\"guifi\"tonvramsethttp_passwd=\"\"before
#######################################################
#
# obre una sessió telnet/ssh en el teu trasto i executa aquest script.
# Nota: Fes servir l''Status/Wireless survey per verificar que
# tens l''antena ben endollada i configurada. La dreta es probablement
# la que tens a la dreta si el mires des del davant (on hi han els
# leds). Si et cal, canvia el connector des de la configuració via
# anant a Wireless->Advanced Settings.
# Security notes:
# Once this script is executes, the router password for root/admin users is \"guifi\"
# You must change this password if you want to keep it secret. If you like to still
# be managed externally, you must install a trusted ssh key. Upon request, your setup
# might be asked for being inspected to check the Wireless Commons compliance.
# No firewall rules are allowed in the public network area.
# By being in client mode, the router has the firewall enabled to distinguish between
# private and public areas, and only SNMP, ssh and https 8080 ports are enabled
# for external administration. Everything else is closed, therefore you might
# have to open ports to share resources.
#
# {{ dev.nick }}
# Paràmetres globals de la xarxa
nvram set router_name=\"{{ dev.nick }}\"
nvram set wan_hostname=\"{{ dev.nick }}\"
nvram set wan_proto=\"static\"
nvram set wan_ipaddr=\"{{ ipv4_ip }}\"
nvram set wan_netmask=\"{{ ipv4_netmask }}\"
nvram set fullswitch=\"1\"
nvram set wan_dns=\"{{ zone_primary_dns }} {{ zone_secondary_dns }} {{ zone_ternary_dns }}\"
nvram set lan_domain=\"guifi.net\"
nvram set wan_domain=\"guifi.net\"
nvram set http_passwd=\"guifi\"
nvram set time_zone=\"+01 2 2\"
nvram set sv_localdns=\"{{ zone_primary_dns }}\"
nvram set wl_net_mode=\"b-only\"
nvram set wl0_net_mode=\"b-only\"
nvram set wl_afterburner=\"on\"
nvram set wl_frameburst=\"on\"
nvram set txpwr=\"{{ txpwr }}\"
nvram set txant=\"0\"
nvram set wl0_antdiv=\"0\"
nvram set wl_antdiv=\"0\"
nvram set block_wan=\"0\"
#
# Gestió
nvram set telnetd_enable=\"1\"
nvram set sshd_enable=\"1\"
nvram set sshd_passwd_auth=\"1\"
nvram set remote_management=\"1\"
nvram set remote_mgt_https=\"1\"
nvram set snmpd_enable=\"1\"
nvram set snmpd_sysname=\"guifi.net\"
nvram set snmpd_syscontact=\"guifi_at_guifi.net\"
nvram set boot_wait=\"on\"
# This is just a fake key. You must install a trusted key if you like to have you router managed externally
nvram set sshd_authorized_keys=\"
ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAIEAwWNX4942fQExw4Hph2M/sxOAWVE9PB1I4JnNyhoWuF9v\
id0XcU34kwWqBBlI+LjDErCQyaR4ysFgDX61V4kUuCKwBOMp+UGxhL648VTv5Qji/YwvIzt7nguUOZ5A\
GPISqsC0717hc0Aja1mvHkQqg9aXKznmszmyKZGhcm2+SU8= root@bandoler.guifi.net\
\"
nvram set http_enable=\"1\"
nvram set https_enable=\"1\"
#
# NTP Network time protocol
nvram set ntp_enable=\"1\"
nvram set ntp_server=\"{{ zone_primary_ntp }}\"
#
# Mode Client
nvram set wl_mode=\"sta\"
nvram set wl0_mode=\"sta\"
nvram set wl_ssid=\"guifi.net-{{ linkedto_ssid }}\"
nvram set wan_gateway=\"{{ linkedto_gateway }}\"
nvram set wl_macmode=\"disabled\"
nvram set wl0_macmode=\"disabled\"
nvram set wl_macmode1=\"disabled\"
nvram set wl0_macmode1=\"disabled\"
#
# Enrutament Gateway
nvram set wk_mode=\"gateway\"
nvram set dr_setting=\"0\"
nvram set route_default=\"1\"
nvram set dr_lan_rx=\"0\"
nvram set dr_lan_tx=\"0\"
nvram set dr_wan_rx=\"0\"
nvram set dr_wan_tx=\"0\"
nvram set dr_wan_tx=\"0\"
# Tallafocs activat
nvram set filter=\"on\"
nvram set rc_firewall=\"
/usr/sbin/iptables -I INPUT -p udp --dport 161 -j ACCEPT; /usr/sbin/iptables -I \
INPUT -p tcp --dport 22 -j ACCEPT\
\"
#
#
nvram set rc_startup=\"#!/bin/ash
#
# unsolclic: v3.7
# radio:  {{ dev.id }}-{{ dev.nick }}
#
#
/bin/sleep 3
bird-c/tmp/bird/bird.conf
/usr/sbin/wl shortslot_override 0
ifconfig eth1 -promisc -allmulti
ifconfig br0 -promisc -allmulti
ifconfig eth0 promisc\"
#
# Fi del script i re-iniciar
nvram commit
reboot
',0,'albertsarle@gmail.com',541,541,1329864340,1332286333,NULL);");

$items[] = update_sql("INSERT INTO {guifi_configuracioUnSolclic} (id,mid,fid,enabled,plantilla,tipologia,notification,user_created,user_changed,timestamp_created,timestamp_changed,template_file) VALUES (20,18,5,1,'    {% spaceless %}# Generat per a:
    # {{ firmware_name }}
    #
    # unsolclic version: v3.7
{% autoescape false %}
    # {{ t(\"open a telnet/ssh session on your device and run the script below.\") }}
    # {{ t(\"Note: Use Status/Wireless survey to verify that you have the\")   }}
    # {{ t(\"antenna plugged in the right connector. The right antena is probably\") }}
    # {{ t(\"the one which is at the right, looking the WRT54G from the front\") }}
    # {{ t(\"(where it have the leds). If needed, change the antenna connector\") }}
    # {{ t(\"at Wireless->Advanced Settings.\") }}
    # {{ t(\"Security notes:\") }}
    # {{ t(''Once this script is executes, the router password for root/admin users is \"guifi\"'') }}
    # {{ t(\"You must change this password if you want to keep it secret. If you like to still\") }}
    # {{ t(\"be managed externally, you must install a trusted ssh key. Upon request, your setup\") }}
    # {{ t(\"might be asked for being inspected to check the Wireless Commons compliance.\") }}
    # {{ t(\"No firewall rules are allowed in the public network area.\") }}
    # {{ t(\"By being in client mode, the router has the firewall enabled to distinguish between\") }}
    # {{ t(\"private and public areas, and only SNMP, ssh and https 8080 ports are enabled\") }}
    # {{ t(\"for external administration. Everything else is closed, therefore you might\") }}
    # {{ t(\"have to open ports to share resources.\") }}
{% endautoescape %}
    #
    # {{ dev.nick }}
    # {{ t(''Global network parameters'') }}
    nvram set router_name=\"{{ dev.nick }}\"
    nvram set wan_hostname=\"{{ dev.nick }}\"
    {# busquem interficie WLan/Lan #}
    {% set interfaceWlanLan = null %}
    {#% for radio_id, radio in dev.radios %#}
        {% for interface_id, interface in dev.interfaces %}
            {% for ipv4_id,ipv4 in interface.ipv4 %}
                {% if interface.interface_type == ''wLan/Lan'' %}
                    {% set interfaceWlanLan = interface %}
                    nvram set lan_ipaddr=\"{{ ipv4.ipv4 }}\"
                    nvram set lan_gateway=\"0.0.0.0\"
                    nvram set lan_netmask=\"{{ ipv4.netmask }}\"
                {% endif %}
            {% endfor %}
        {% endfor %}
    {#% endfor %#}
    {# busquem interficie Lan #}
    {% set interfaceLan = null %}
    {#% for radio_id, radio in dev.radios %#}
        {% for interface_id, interface in dev.interfaces %}
            {% for ipv4_id,ipv4 in interface.ipv4 %}
                {% if interface.interface_type == ''Lan'' %}
                    {% set interfaceLan = interface %}
                    nvram set lan_ipaddr=\"{{ ipv4.ipv4 }}\"
                    nvram set lan_gateway=\"{{ ipv4.netstart }}\"
                    nvram set lan_netmask=\"{{ ipv4.netmask }}\"
                {% endif %}
            {% endfor %}
        {% endfor %}
    {#% endfor %#}
    {# busquem interficie Wan #}
    {% set interfaceWan = null %}
    {% for interface_id, interface in dev.interfaces %}
        {% for ipv4_id,ipv4 in interface.ipv4 %}
                {% if link.interface.interface_type == ''Wan'' %}
                    {% set interfaceWan = interface %}
                    {% if ipv4.ipv4 %}
                        nvram set lan_ipaddr=\"{{ ipv4.ipv4 }}\"
                        nvram set lan_gateway=\"{{ ipv4.netstart }}\"
                        nvram set lan_netmask=\"{{ ipv4.netmask }}\"
                        nvram set fullswitch=\"1\"
                        nvram set wan_dns=\"{{ zone_primary_dns }} {{ zone_secondary_dns }} {{ zone_ternary_dns }}\"
                    {% else  %}
                        nvram set wan_proto=\"dhcp\"
                    {% endif %}
                {% endif %}
        {% endfor %}
    {% endfor %}
    {% if not interfaceWan %}
        nvram set wan_proto=\"disabled\"
    {% endif %}
    nvram set lan_domain=\"guifi.net\"
    nvram set wan_domain=\"guifi.net\"
    nvram set http_passwd=\"guifi\"
    nvram set time_zone=\"+01 2 2\"
    nvram set sv_localdns=\"{{ zone_primary_dns }}\"
    nvram set wl_net_mode=\"b-only\"
    nvram set wl0_net_mode=\"b-only\"
    nvram set wl_afterburner=\"on\"
    nvram set wl_frameburst=\"on\"
    nvram set txpwr=\"{{ txpwr }}\"
    {% if dev.radios[0][''antenna_mode''] == '''' %}
        {% set antena_mode = ''Main'' %}
    {% endif %}
    {% if antena_mode !=''Main'' %}
        {% set antena_mode = ''1'' %}
    {% else %}
        {% set antena_mode = ''0'' %}
    {% endif %}
    nvram set txant=\"{{ antena_mode }}\"
    nvram set wl0_antdiv=\"0\"
    nvram set wl_antdiv=\"0\"
    nvram set block_wan=\"0\"
    {% if dev.variable.firmware == ''Talisman'' %}
        nvram set ident_pass=\"0\"
        nvram set multicast_pass=\"0\"
        nvram set wl_closed=\"0\"
        nvram set block_loopback=\"0\"
    {% endif %}
    #
    # {{ t(''Management'') }}
    nvram set telnetd_enable=\"1\"
    nvram set sshd_enable=\"1\"
    nvram set sshd_passwd_auth=\"1\"
    nvram set remote_management=\"1\"
    nvram set remote_mgt_https=\"1\"
    nvram set snmpd_enable=\"1\"
    nvram set snmpd_sysname=\"guifi.net\"
    nvram set snmpd_syscontact=\"guifi_at_guifi.net\"
    nvram set boot_wait=\"on\"
    # {{ t(''This is just a fake key. You must install a trusted key if you like to have you router managed externally'') }}
    nvram set sshd_authorized_keys=\"
    ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAIEAwWNX4942fQExw4Hph2M/sxOAWVE9PB1I4JnNyhoWuF9v\
    id0XcU34kwWqBBlI+LjDErCQyaR4ysFgDX61V4kUuCKwBOMp+UGxhL648VTv5Qji/YwvIzt7nguUOZ5A\
    GPISqsC0717hc0Aja1mvHkQqg9aXKznmszmyKZGhcm2+SU8= root@bandoler.guifi.net\
    \"
    nvram set http_enable=\"1\"
    nvram set https_enable=\"1\"
    #
    # NTP Network time protocol
    {% if zone_primary_ntp == '''' %}
    nvram set ntp_enable=\"0\"
    {% else  %}
    nvram set ntp_enable=\"1\"
    nvram set ntp_server=\"{{ zone_primary_ntp }}\"
    {% endif %}
    #
    {% if dev.radios[0].mode ==''ap'' or dev.radios[0].mode ==''AP''  %}
        # {{ t(''AP mode'') }}
        nvram set wl_mode=\"ap\"
        nvram set wl0_mode=\"ap\"
        nvram set wl_channel=\"{{ dev.radios[0][''channel''] }}\"
        nvram set wl_ssid=\"guifi.net-{{ guifi_to_7bits(dev.radios[0][''ssid'']) }}\"
        nvram set wl_macmode=\"disable\"
        nvram set wl0_macmode=\"disable\"
        nvram set wl_macmode1=\"disable\"
        nvram set wl0_macmode1=\"disable\"
        {{ _self.guifi_unsolclic_ospf(dev, zone, ospfzone,interfaceWlanLan) }}
        {{ _self.guifi_unsolclic_dhcp(dev, interfaceWlanLan) }}
        {{ _self.guifi_unsolclic_wds_vars(dev) }}
    {% elseif dev.radios[0].mode ==''client'' %}
        # Mode Client
        {% for interface_id, interface in dev.radios[0].interfaces %}
            {% for ipv4_id,ipv4 in interface.ipv4 %}
                {% if ipv4.links %}
                    {% for link_id, link in ipv4.links %}
                        {% if link.link_type == ''ap/client'' %}
                            {% set ap_macs = ap_macs ~'' ''~ link.interface.mac %}
                            {% set gateway = link.interface.ipv4.ipv4 %}
                            {# if (($dev->variable[''firmware''] == ''DD-WRTv23'') or ($dev->variable[''firmware''] == ''DD-guifi'')) #}
                            nvram set wl_mode=\"sta\"
                            nvram set ''wl0_mode=\"sta\"
                            nvram set wl_ssid=\"guifi.net-\"{{ dev.radios[0].ssid }})\"
                            {# end if de comrpovacio de firmware dd-wrtv23 #}
                            nvram set wan_gateway=\"{{ gateway }}\"
                        {% endif %}
                    {% endfor %}
                {% endif %}
                {% if dev[''variable''][''firmware''] == ''Alchemy'' %}
                    {% if ap_macs == '''' %}
                        # {{ t(''WARNING: AP MAC not set'') }}
                        {% set filter = ''FF:FF:FF:FF:FF:FF'' %}
                    {% endif %}
                    nvram set wl_macmode=\"allow\"
                    nvram set wl0_macmode=\"allow\"
                    nvram set wl_macmode1=\"other\"
                    nvram set wl0_macmode1=\"other\"
                    nvram set wl_maclist=\"{{ filter }}\"
                    nvram set wl0_maclist=\"{{ filter }}\"
                    nvram set wl_mac_list=\"{{ filter }}\"
                    nvram set wl0_mac_list=\"{{ filter }}\"
                {% else %}
                    nvram set wl_macmode=\"disabled\"
                    nvram set wl0_macmode=\"disabled\"
                    nvram set wl_macmode1=\"disabled\"
                    nvram set wl0_macmode1=\"disabled\"
                {% endif %}
                {# busquem interficie Lan #}
                {% for interface in dev.radios.interfaces %}
                    {% if interface.interface_type ==''Lan'' %}
                        {# _self.guifi_unsolclic_ospf(dev,zone, ospfzone,interfaceWlanLan) #}
                        {# aqui estem en el pas de php a twig de dd-wrt. #}
                    {% else %}
                        {# guifi_unsolclic_gateway($dev); #}
                        #
                        # {{ t(''Gateway routing'') }}
                        nvram set wk_mode=\"gateway\"
                        nvram set dr_setting=\"0\"
                        nvram set route_default=\"1\"
                        nvram set dr_lan_rx=\"0\"
                        nvram set dr_lan_tx=\"0\"
                        nvram set dr_wan_rx=\"0\"
                        nvram set dr_wan_tx=\"0\"
                        nvram set dr_wan_tx=\"0\"
                        # {{ t(''Firewall enabled'') }}
                        nvram set filter=\"on\"
                        nvram set rc_firewall=\"
                        /usr/sbin/iptables -I INPUT -p udp --dport 161 -j ACCEPT; /usr/sbin/iptables -I \
                        INPUT -p tcp --dport 22 -j ACCEPT\
                        \"
                    {% endif %}
                {% endfor %}
            {% endfor %}
        {% endfor %}{# comentari final del case de client #}
    {% endif %}
    #
    {{ _self.guifi_unsolclic_vlan_vars(dev, rc_startup) }}
    {{ _self.guifi_unsolclic_startup(dev, version, rc_startup) }}
    #
    # {{ t(''end of script and reboot'') }}
    nvram commit
    reboot
    {% macro guifi_unsolclic_ospf(dev,zone, ospfzone,interfaceWlanLan) %}
                        # {{ ipv4Addr  }}
                        # {{ t(''Firewall disabled'') }}
                        nvram set filter=\"off\"
                        # {{ dev.variable.firmware ~ t('' OSPF routing'') }}
                        nvram set dr_setting=\"3\"
                        nvram set dr_lan_rx=\"1 2\"
                        nvram set dr_lan_tx=\"1 2\"
                        nvram set dr_wan_rx=\"1 2\"
                        nvram set dr_wan_tx=\"1 2\"
                        nvram set wk_mode=\"ospf\"
                        {% if dev.variable.firmware == ''DD-WRTv23'' or dev.variable.firmware == ''DD-guifi''  %}
                            nvram set routing_lan=\"on\"
                            nvram set routing_wan=\"on\"
                            nvram set routing_ospf=\"on\"
                        {% endif %}
                        {% if dev.variable.firmware == ''Alchemy'' %}
                            nvram set route_default=\"1\"
                            nvram set expert_mode=\"1\"
                        {% endif %}
                        nvram set ospfd_conf=\"
                            !
                            password guifi
                            enable password guifi
                            !
                        {% set alchemyIfs = guifi_get_alchemy_ifs(dev) %}
                        {% for aIf, exists in alchemyIfs %}
                            interface {{ aIf }}
                        {% endfor %}
                        !
                        router ospf
                        ospf router-id {{ interfaceWlanLan.ipv4[0].ipv4 }}
                        {% for radio_id, radio in dev.radios %}
                          {% for interface_id, interface in radio.interfaces %}
                                {% if interface.interface_type == ''wLan'' or  interface.interface_type == ''wLan/Lan'' %}
                                    {% for ipv4_id,ipv4 in interface.ipv4 %}
                                      network {{ ipv4.netid }}/{{ ipv4.maskbits  }} area 0
                                    {% endfor %}
                                {% endif %}
                            {% endfor %}
                        {% endfor %}
                        {% for radio_id, radio in dev.radios %}
                          {% for interface_id, interface in radio.interfaces %}
                                {% if interface.interface_type == ''wds/p2p'' %}
                                    {% if interface.ipv4[0] %}
                                        {% for ipv4_id,ipv4 in interface.ipv4 %}
                                            {% for link_id, link in ipv4.links %}
                                                {% if link.link_type == ''wds'' and link.routing ==''OSPF''  %}
                                                    {% if link.flag in '' Working Testing Building ''  %}
                                                      network {{ ipv4.netid }}/{{ ipv4.maskbits }} area 0
                                                    {% endif %}
                                                {% endif %}
                                            {% endfor %}
                                        {% endfor %}
                                    {% endif %}
                                {% endif %}
                            {% endfor %}
                        {% endfor %}
                        {% for interface_id, interface in dev.interfaces %}
                            {% for ipv4_id,ipv4 in interface.ipv4 %}
                                {% if ipv4.ipv4_type ==''1'' and interface.interface_type != ''wLan/Lan'' %}
                                    network {{ ipv4.netid }}/{{ ipv4.maskbits }} area 0''
                                {% endif %}
                                {% if ipv4.links %}
                                    {% for link_id, link in ipv4.links %}
                                        {% if ipv4.ipv4_type == ''2'' and link.routing ==''OSPF''  %}
                                            {% if link.flag in '' Working Testing Building ''  %}
                                              network {{ ipv4.netid }}/{{ ipv4.maskbits }} area 0
                                            {% endif %}
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                            {% endfor %}
                        {% endfor %}
                         default-information originate
                        !
                        line vty
                        !\"{% endmacro %}
    {% macro guifi_unsolclic_dhcp(dev, interfaceWlanLan) %}
        #
        # DHCP
        {% set count = 0 %}
        {% set DHCP_statics = null %}
        {% set max = null %}
        {% set main_ip = guifi_main_ip(dev.id) %}
        {% set max = explode(''.'', main_ip[''ipv4'']) %}
        {% set max = max[3] %}
        {# BEGIN Cable Links #}
        {% if dev.interfaces %}
            {% for interface_id, interface in dev.interfaces %}
                {% if interface.ipv4 %}
                    {% for ipv4_id,ipv4 in interface.ipv4 %}
                        {% if ipv4.links %}
                            {% for link_id, link in ipv4.links %}
                                {% if link.interface.ipv4.ipv4 != ''''  %}
                                    {% if link.interface.ipv4.netid %}
                                        {# if link.interface.mac == '''' #}
                                            {# set link.interface.mac = ''FF:FF:FF:FF:FF:FF'' #}
                                        {# endif #}
                                        {% set curr = explode(\".\", link.interface.ipv4.ipv4) %}
                                        {% if curr[3] > max %}
                                            {% set max = curr[3] %}
                                        {% endif %}
                                    {% endif %}
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    {% endfor %}
                {% endif %}
            {% endfor %}
        {% endif %}{# END Cable Links #}
        {# BEGIN AP/Client Links #}{% if dev.radios %}
            {% for radio_id, radio in dev.radios %}
                {% if dev.interfaces %}
                    {% for interface_id, interface in radio.interfaces %}
                        {% if interface.ipv4 %}
                            {% for ipv4_id,ipv4 in interface.ipv4 %}
                                {% if ipv4.links %}
                                    {% for link_id, link in ipv4.links %}
                                        {% if link.link_type == ''ap/client'' and link.interface.ipv4.ipv4 != ''''  %}
                                            {% set count = count +1  %}
                                            {% set curr = explode(\".\", link.interface.ipv4.ipv4) %}
                                        {% if curr[3] > max %}
                                            {% set max = curr[3] %}
                                        {% endif %}
    nvram set static_leases=\"{{ link.interface.mac }}={{ link.interface.ipv4.host_name }}={{ link.interface.ipv4.ipv4 }}\"
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    {% endfor %}
                {% endif %}
            {% endfor %}
        {% endif %}
        nvram set static_leasenum=\"{{ count }}\"
        {# END Cable Links #}
        {% set dhcp_start = max + 5  %}
        nvram set dhcp_start=\"{{ dhcp_start }}\"{% endmacro %}
    {% macro guifi_unsolclic_wds_vars(dev) %}
      #
      # {{ t(''WDS Links for'') }} {{ dev.nick }}
        {% if dev.variable.firmware == ''DD-guifi'' or dev.variable.firmware == ''DD-WRTv23'' %}
            {% set ifcount = 2  %}
        {% else %}
            {% set ifcount = 1  %}
        {% endif %}
        {% if dev.radios %}
            {% set count = 1 %}
            {% set wds_str = '''' %}
            {% set rc_startup = '''' %}
            {% for radio_id, radio in dev.radios %}
                {% if dev.interfaces %}
                    {% for interface_id, interface in radio.interfaces %}
                        {% if interface.interface_type == ''wds/p2p'' %}
                            {% if interface.ipv4 %}
                                {% for ipv4_id,ipv4 in interface.ipv4 %}
                                    {% if ipv4.links %}
                                        {% for link_id, link in ipv4.links %}
                                            {% if link.link_type == ''wds''%}
                                                {% set hostname = link.interface.ipv4.host_name  %}
                                                # {{  link.interface.device_id }}-{{ hostname }}
                                                nvram set wl_wds{{ count }}_desc=\"{{ hostname }}\"
                                                {% if link.flag in '' Working Testing Building ''  %}
                                                    {% set ifcount = ifcount + 1  %}
                                                    nvram set wl_wds{{ count }}_enable=\"1\"
                                                    {% if dev.variable.firmware == ''DD-guifi'' or dev.variable.firmware == ''DD-WRTv23'' %}
                                                        nvram set wl_wds{{ count }}_if=\"wds0.4915{{ ifcount }}\"
                                                    {% else %}
                                                        nvram set wl_wds{{ count }}_if=\"wds0.{{ ifcount }}\"
                                                    {% endif %}
                                                    {% set wds_str = wds_str ~'' ''~ link.interface.mac %}
                                                    {% if dev.variable.firmware == ''Talisman'' %}
                                                         {% set rc_startup = rc_startup ~''ifconfig wds0.''~ ifcount ~'' up\n<br />'' %}
                                                    {% endif %}
                                                {% else %}
                                                    nvram wl_wds{{ count }}_enable=\"0\"
                                                {% endif %}
                                                nvram set wl_wds{{ count }}_ipaddr=\"{{ ipv4.ipv4 }}\"
                                                nvram set wl_wds{{ count }}_hwaddr=\"{{ link.interface.mac }}\"
                                                nvram set wl_wds{{ count }}_netmask=\"{{ link.interface.ipv4.netmask }}\"
                                                {% set count = count + 1 %}
                                            {% endif %}
                                        {% endfor %}
                                    {% endif %}
                                {% endfor %}
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                {% endif %}
            {% endfor %}
        {% endif %}
        #
        # {{ t(''Free WDS slots'') }}
        {% for key in count..10 %}
            nvram set wl_wds{{ key }}_desc=\"{{ t(''free'') }}\"
            nvram set wl_wds{{ key }}_enable=\"0\"
            nvram set wl_wds{{ key }}_ipaddr=\"172.0.0.0\"
            nvram set wl_wds{{ key }}_hwaddr=\"00:13:00:00:00:00\"
            nvram set wl_wds{{ key }}_netmask=\"255.255.255.252\"
        {% endfor %}
        nvram set wl0_wds=\"{{ wds_str}}\"
        nvram set wl0_lazywds=\"0\"
        nvram set wl_lazywds=\"0\"{% endmacro %}
    {% macro guifi_get_alchemy_ifs(dev) %}

        {% if dev.radios %}
            {% for radio_id, radio in dev.radios %}

                {% if radio.interfaces %}
                    {% for interface_id, interface in radio.interfaces %}

                        {% if interface.ipv4 %}
                            {% for ipv4_id,ipv4 in interface.ipv4 %}

                                {% if ipv4.links %}
                                    {% for link_id, link in ipv4.links %}

                                        {% if link.type == ''wds'' %}
                                           {% set wds_links = wds_links ~''|''~ link %}
                                        {% else %}
                                            {# friki, molt friki REVISAR!!! ret[alchemyIfs[interface.interface_type]] = true #}
                                            {% set ret = true %}
                                        {% endif %}

                                    {% endfor %}
                                {% endif %}

                            {% endfor %}
                        {% endif %}

                    {% endfor %}
                {% endif %}

            {% endfor %}
        {% endif %}
        {% if wds_links %}
            {% for link_id, link in ipv4.links %}
            {% endfor %}
        {% endif %}
    {% endmacro %}
    {% macro guifi_unsolclic_if(dev, interface) %}
    {% endmacro %}
    {% macro guifi_unsolclic_vlan_vars(dev, rc_startup) %}
        {% set vlans = false %}
        {% set br0 = 0 %}
        {% set eth1 = 0 %}
        {% set rc = '''' %}
        {% set bips = '''' %}
        {% if dev.interfaces %}
            {% for interface_id, interface in dev.interfaces %}
                {% if interface.ipv4 %}
                    {% for ipv4_id,ipv4 in interface.ipv4 %}
                        {% if ipv4.links %}
                            {% for link_id, link in ipv4.links %}
                                {% if not interface.ipv4 in bips  %}
                                    {% set bips = bips ~'' ''~ interface.ipv4 %}
                                    {% if interface.interface_type ==''vlan'' or interface.interface_type ==''vwlan''  %}
                                        {% set br0 = br0 +1 %}
                                        {% set rc = ''# br0:''~ br0  ~'': ''~  ipv4.link.interface.ipv4.host_name ~''\n''%}
                                        {% if link.flag not in '' Working Testing Building '' %}
                                            {% set rc = rc ~''# '' %}
                                        {% endif %}
                                        {% set rc = ''ifconfig br0:''~ br0  ~'' ''~ ipv4.ipv4 ~'' netmask ''~ ipv4.netmask ~'' broadcast ''~ ipv4.broadcast %}
                                    {% elseif interface.interface_type ==''vwan'' %}
                                        {% set eth1 = eth1 +1 %}
                                        {% set rc = ''# eth1:''~ eth1 ~'': ''~  ipv4.link.interface.ipv4.host_name ~''\n''%}
                                        {% if link.flag not in '' Working Testing Building '' %}
                                            {% set rc = rc ~''# '' %}
                                        {% endif %}
                                        {% set rc = ''ifconfig eth1:''~ eth1 ~'' ''~ ipv4.ipv4 ~'' netmask ''~ ipv4.netmask ~'' broadcast ''~ ipv4.broadcast %}

                                    {% elseif interface.interface_type ==''vlan2'' or interface.interface_type ==''vlan3'' or interface.interface_type ==''vlan4''%}
                                        {% set rc = ''# ''~ interface.interface_type ~'': ''~  ipv4.link.interface.ipv4.host_name ~''<br/>'' %}
                                        {% if link.flag not in '' Working Testing Building '' %}
                                            {% set rc = rc ~''# '' %}
                                        {% endif %}
                                        {% set rc = ''ifconfig ''~ interface.interface_type ~'' ''~ ipv4.ipv4 ~'' netmask ''~ ipv4.netmask ~'' broadcast ''~ ipv4.broadcast %}
                                        {% set vlans = true %}
                                    {% endif %}
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    {% endfor %}
                {% endif %}
            {% endfor %}
        {% endif %}
        {% if rc != '''' %}
            {% set rc_startup = ''# VLANs -- radio: '' ~ dev.id ~''-''~ dev.nick %}
            {% set rc_startup = rc_startup ~ rc %}
        {% endif %}
        {% if vlans  %}
            #
            # VLANs -- radio: {{ dev.id}}-{{ dev.nick}}
            {% if dev.variable.model_id == ''1'' or dev.variable.model_id == ''15'' or dev.variable.model_id == ''17'' %}
                {% if dev.variable.firmware == ''DD-guifi'' or dev.variable.firmware == ''DD-WRTv23'' %}
                    nvram set vlan2hwname=\"et0\"
                    nvram set vlan3hwname=\"et0\"
                    nvram set vlan4hwname=\"et0\"
                    nvram set vlan0ports=\"0 1 5*\"
                    nvram set vlan2ports=\"2 5\"
                    nvram set vlan3ports=\"3 5\"
                    nvram set vlan4ports=\"4 5\"
                {% else %}
                    nvram set vlans=\"1\"
                    nvram set port2vlans=\"2\"
                    nvram set port3vlans=\"3\"
                    nvram set port4vlans=\"4\"
                    nvram set port5vlans=\"0 1 2 3 4 16\"
                {% endif %}
            {% elseif  dev.variable.model_id == ''16'' or dev.variable.model_id == ''18'' %}
                nvram set vlan2hwname=\"et0\"
                nvram set vlan3hwname=\"et0\"
                nvram set vlan4hwname=\"et0\"
                nvram set vlan0ports=\"4 3 5*\"
                nvram set vlan1ports=\"4 5\"
                nvram set vlan2ports=\"2 5\"
                nvram set vlan3ports=\"1 5\"
                nvram set vlan4ports=\"0 5\"
            {% endif %}
        {% endif %}
        #
        nvram set rc_startup=\"#!/bin/ash
        #
        # unsolclic: v3.7
        # radio: {{ dev.id }}-{{ dev.nick }}
        #
        {% if dev.variable.firmware == ''DD-WRTv23'' and dev.radios[0].mode ==''ap'' %}
            /bin/sleep 5
            {# Write the config for bird, for compatibility with Alchemy and area support #}
            /bin/kill -9 \/bin/ps |/bin/grep bird|/usr/bin/cut -c1-5|/usr/bin/head -n 1\;
            /bin/rm /tmp/bird/bird.conf
            /bin/echo -e ''router id {{ dev.ipv4 }}
            protocol kernel { learn; persist; scan time 10; import all; export all; }
            protocol device { scan time 10; }
            protocol direct { interface \\\"*\\\";} 
            protocol ospf WRT54G_ospf {
            area ''.$ospf_zone.'' { tick 8;
            interface \"*\" { cost 1; hello 10; priority 1; retransmit 7; authentication none; };
            };
            }
            '' >/tmp/bird/bird.conf
        {% endif %}
        #
        {{ rc_startup }}
        {% if dev.variable.firmware == ''DD-WRTv23'' %}
            /bin/sleep 3
            bird -c /tmp/bird/bird.conf
            /usr/sbin/wl shortslot_override 0
            ifconfig eth1 -promisc -allmulti
            ifconfig br0 -promisc -allmulti
            ifconfig eth0 promisc \"
        {% else %}
            {% if dev.variable.firmware == ''DD-guifi'' %}
              /bin/sleep 10
              /usr/sbin/wl shortslot_override 0
              ifconfig eth1 -promisc -allmulti
              ifconfig br0 -promisc -allmulti
              ifconfig eth0 promisc \"
            {% else %}
                /bin/sleep 10
                /usr/sbin/wl shortslot_override 0
            {% endif %}
        {% endif %}
    {% endmacro %}
    {% endspaceless %}',0,'albertsarle@gmail.com',541,541,1329862310,1336817612,NULL);");
    
    
$items[] = update_sql("INSERT INTO {guifi_configuracioUnSolclic} (id,mid,fid,enabled,plantilla,tipologia,notification,user_created,user_changed,timestamp_created,timestamp_changed,template_file) VALUES (21,18,21,1,'# Generat per a:
# {{ firmware_name }}
#
# unsolclic version: v3.7
# obre una sessió telnet/ssh en el teu trasto i executa aquest script.
# Nota: Fes servir l''Status/Wireless survey per verificar que
# tens l''antena ben endollada i configurada. La dreta es probablement
# la que tens a la dreta si el mires des del davant (on hi han els
# leds). Si et cal, canvia el connector des de la configuració via
# anant a Wireless->Advanced Settings.
# Security notes:
# Once this script is executes, the router password for root/admin users is \"guifi\"
# You must change this password if you want to keep it secret. If you like to still
# be managed externally, you must install a trusted ssh key. Upon request, your setup
# might be asked for being inspected to check the Wireless Commons compliance.
# No firewall rules are allowed in the public network area.
# By being in client mode, the router has the firewall enabled to distinguish between
# private and public areas, and only SNMP, ssh and https 8080 ports are enabled
# for external administration. Everything else is closed, therefore you might
# have to open ports to share resources.
#
# {{ device_name }}
# Paràmetres globals de la xarxa
nvram set router_name=\"{{ device_name }}\"
nvram set wan_hostname=\"{{ device_name }}\"
nvram set wan_proto=\"static\"
nvram set wan_ipaddr=\"{{ ipv4_ip }}\"
nvram set wan_netmask=\"{{ ipv4_netmask }}\"
nvram set fullswitch=\"1\"
nvram set wan_dns=\"{{ zone_primary_dns }} {{ zone_secondary_dns }} {{ zone_ternary_dns }}\"
nvram set lan_domain=\"guifi.net\"
nvram set wan_domain=\"guifi.net\"
nvram set http_passwd=\"guifi\"
nvram set time_zone=\"+01 2 2\"
nvram set sv_localdns=\"{{ zone_primary_dns }}\"
nvram set wl_net_mode=\"b-only\"
nvram set wl0_net_mode=\"b-only\"
nvram set wl_afterburner=\"on\"
nvram set wl_frameburst=\"on\"
nvram set txpwr=\"{{ txpwr }}\"
nvram set txant=\"0\"
nvram set wl0_antdiv=\"0\"
nvram set wl_antdiv=\"0\"
nvram set block_wan=\"0\"
#
# Gestió
nvram set telnetd_enable=\"1\"
nvram set sshd_enable=\"1\"
nvram set sshd_passwd_auth=\"1\"
nvram set remote_management=\"1\"
nvram set remote_mgt_https=\"1\"
nvram set snmpd_enable=\"1\"
nvram set snmpd_sysname=\"guifi.net\"
nvram set snmpd_syscontact=\"guifi_at_guifi.net\"
nvram set boot_wait=\"on\"
# This is just a fake key. You must install a trusted key if you like to have you router managed externally
nvram set sshd_authorized_keys=\"
ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAIEAwWNX4942fQExw4Hph2M/sxOAWVE9PB1I4JnNyhoWuF9v\
id0XcU34kwWqBBlI+LjDErCQyaR4ysFgDX61V4kUuCKwBOMp+UGxhL648VTv5Qji/YwvIzt7nguUOZ5A\
GPISqsC0717hc0Aja1mvHkQqg9aXKznmszmyKZGhcm2+SU8= root@bandoler.guifi.net\
\"
nvram set http_enable=\"1\"
nvram set https_enable=\"1\"
#
# NTP Network time protocol
nvram set ntp_enable=\"1\"
nvram set ntp_server=\"{{ zone_primary_ntp }}\"
#
# Mode Client
nvram set wl_mode=\"sta\"
nvram set wl0_mode=\"sta\"
nvram set wl_ssid=\"guifi.net-{{ linkedto_ssid }}\"
nvram set wan_gateway=\"{{ ipv4_ipgateway }}\"
nvram set wl_macmode=\"disabled\"
nvram set wl0_macmode=\"disabled\"
nvram set wl_macmode1=\"disabled\"
nvram set wl0_macmode1=\"disabled\"
#
# Enrutament Gateway
nvram set wk_mode=\"gateway\"
nvram set dr_setting=\"0\"
nvram set route_default=\"1\"
nvram set dr_lan_rx=\"0\"
nvram set dr_lan_tx=\"0\"
nvram set dr_wan_rx=\"0\"
nvram set dr_wan_tx=\"0\"
nvram set dr_wan_tx=\"0\"
# Tallafocs activat
nvram set filter=\"on\"
nvram set rc_firewall=\"
/usr/sbin/iptables -I INPUT -p udp --dport 161 -j ACCEPT; /usr/sbin/iptables -I \
INPUT -p tcp --dport 22 -j ACCEPT\
\"
#
#
nvram set rc_startup=\"#!/bin/ash
#
# unsolclic: v3.7
# radio:  {{ dev.id }}-{{ dev.nick }}
#
#
/bin/sleep 3
bird-c/tmp/bird/bird.conf
/usr/sbin/wl shortslot_override 0
ifconfig eth1 -promisc -allmulti
ifconfig br0 -promisc -allmulti
ifconfig eth0 promisc\"
#
# Fi del script i re-iniciar
nvram commit
reboot
',0,'albertsarle@gmail.com',541,541,1329863091,1332286445,NULL);");

$items[] = update_sql("INSERT INTO {guifi_configuracioUnSolclic} (id,mid,fid,enabled,plantilla,tipologia,notification,user_created,user_changed,timestamp_created,timestamp_changed,template_file) VALUES (24,31,14,1,'{% macro bgp_peer(id, host_name, ipv4, disabled) %}
/ routing bgp peer
:foreach i in [find name={{ host_name }}] do={/routing bgp peer remove $i;}
add name=\"{{ host_name }}\" instance=default remote-address={{ ipv4 }} remote-as={{ id }} \
multihop=no route-reflect=no ttl=default in-filter=ebgp-in out-filter=ebgp-out disabled={{ disabled }}{% endmacro %}
{% macro ospf_interface(iname, netid, maskbits, ospf_name , ospf_zone, ospf_id, disabled) %}
/ routing ospf interface
:foreach i in [/routing ospf interface find interface={{ iname }}] do={/routing ospf interface remove $i;}
add interface={{ iname }}
/ routing ospf network
:foreach i in [/routing ospf network find network={{ netid }}/{{ maskbits }}] do={/routing ospf network remove $i;}
add network={{ netid }}/{{ maskbits }} area={{ ospf_name }} disabled={{ disabled }}{% endmacro %}
# Generat per a:
# {{ firmware_name }}
:log info \"Unsolclic for {{ dev.id }}-{{ dev.nick }} going to be executed.\"
#
# Configuration for {{ firmware_description }}
# Trasto: {{  dev.id  }}-{{ dev.nick }}
#
# Methods to upload/execute this script:
# 1.-As a script. Upload this output as a script either with:
# &nbsp;&nbsp;&nbsp;&nbsp;a.Winbox (with Linux, wine required)
# &nbsp;&nbsp;&nbsp;&nbsp;b.Terminal (telnet, ssh...)
# &nbsp;&nbsp;&nbsp;Then execute the script with:
# &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;>&nbsp;/system script run script_name
# 2.-Fitxer importat:
# &nbsp;&nbsp;&nbsp;&nbsp;Desa aquesta \"sortida\" a un fitxer, després puja''l al router
# &nbsp;&nbsp;&nbsp;&nbsp;fent servir FTP amb un nom de l''estil \"script_name.rsc\".
# &nbsp;&nbsp;&nbsp;&nbsp;(note, l''extensió \".rsc\" es un requisit)
# &nbsp;&nbsp;&nbsp;&nbsp;Executa el fitxer importat amb la comanda:
# &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;>&nbsp;/import script_name
# 3.-Telnet copia i enganxar:
# &nbsp;&nbsp;&nbsp;&nbsp;Open a terminal session, and cut&paste this output
# &nbsp;&nbsp;&nbsp;&nbsp;directly on the terminal input.
#
# Notes:
# -routing-test package is required if you use RouterOSv2.9 , be sure you have it enabled at system packages
# -wlans should be enabled manually, be sure to set the correct antenna (a or b)
# &nbsp;&nbsp;according in how did you connect the cable to the miniPCI. Keep the
# &nbsp;&nbsp;power at the minimum possible and check the channel.
# -The script doesn''t reset the router, you might have to do it manually
# -You must have write access to the router
# -MAC access (winbox, MAC telnet...) method is recommended
# &nbsp;&nbsp;(the script reconfigures some IP addresses, so communication can be lost)
# -No changes are done in user passwords on the device
# -A Read Only guest account with no password will be created to allow guest access
# &nbsp;&nbsp;to the router with no danger of damage but able to see the config.
# -Be sure that all packages are activated.
# -Don''t run the script from telnet and being connected through an IP connection at
# &nbsp;&nbsp;the wLan/Lan interface: This interface will be destroyed during the script.
#
/ system identity set name={{ dev.nick }}
#
# DNS (client &#038;  server cache) zone: {{ zone_id }}
{% if not zone_secondary_dns is null  %}
/ip dns set primary-dns={{ zone_primary_dns }} secondary-dns={{ zone_secondary_dns }} allow-remote-requests=yes
{% else %}
/ip dns set primary-dns={{ zone_primary_dns }} allow-remote-requests=yes
{% endif %}
:delay 1
#
# NTP (client &#038; server cache) zone:  {{ zone_id }}
{% if zone_secondary_ntp %}
/system ntp client set enabled=yes mode=unicast primary-ntp={{ zone_primary_ntp }} secondary-ntp={{ zone_secondary_ntp }}
{% else %}
/system ntp client set enabled=yes mode=unicast primary-ntp={{ zone_primary_ntp }}
{% endif %}
:delay 1
#
# Bandwidth-server
/ tool bandwidth-server set enabled=yes authenticate=no allocate-udp-ports-from=2000
#
# SNMP
/snmp set contact=\"{{ snmp_contact }}\" enabled=yes location=\"{{ node_name|replace({'' '': ''''})  }}\"
#
# Guest user
/user
:foreach i in [find group=read] do={/user remove $i;}
add name=\"guest\" group=read address=0.0.0.0/0 comment=\"\" disabled=no
#
# Graphing
/tool graphing interface add
{% if dev.logserver %}
# Ip for ServerLogs
/system logging
:foreach i in [/system logging find action=remote]
do={/system logging remove $i }
:foreach i in [/system logging action find name=guifi]
do=[/system logging action remove $i]
/system logging action add name={{ dev.nick }} target=remote remote={{ dev.logserver }}:514 src-address={{ dev.radios[0].ipv4}}
/system logging add action=guifi_remot topics=critical
/system logging add action=guifi_remot topics=account
{% endif %}
{% if dev.mode != ''client'' %}
# Remove current wLan/Lan bridge if exists
:foreach i in [/interface bridge find name=wLan/Lan] \
do={:foreach i in [/interface bridge port find bridge=wLan/Lan] \
do={/interface bridge port remove $i; \
:foreach i in [/ip address find interface=wLan/Lan] \
do={/ip address remove $i;};};
/interface bridge remove $i;}
# Construct main bridge on wlan1 &#038; ether1
/ interface bridge
add name=\"wLan/Lan\"
/ interface bridge port
add interface=ether1 bridge=wLan/Lan
add interface=wlan1 bridge=wLan/Lan
{% endif %}
{% if dev.radios %}
:delay 1
#
{# la declarem aqui perque sino no hi puc accedir fora del foreach radio #}
{% set ospf_routerid = ''ospf_routerid'' %}
{% for radio_id, radio in dev.radios %}
# Radio#: {{ radio.radiodev_counter }} {{ radio.ssid }}
{% spaceless %}
/interface wireless set wlan{{ radio.radiodev_counter+1 }} name=\"wlan{{ radio.radiodev_counter+1 }}\" \
radio-name=\"{{ radio.ssid }}\" mode={{ radio.mode }}-bridge ssid=\"guifi.net-{{ radio.ssid }}\" \
{% if radio.mode == ''ap'' %}
   {% set mode = ''ap-bridge'' %}
    {% if radio.channel < 5000 %}
      {% set band = ''2.4ghz-b'' %}
    {% else %}
      {% set band = ''5ghz'' %}
    {% endif %}
{% elseif (radio.mode == ''client'' or radio.mode == ''clientrouted'') %}
   {% set mode = ''station'' %}
    {% if radio.channel != 5000 %}
      {% set band = ''2.4ghz-b'' %}
    {% else %}
      {% set band = ''5ghz'' %}
    {% endif %}
{% endif %}
{% if radio.protocol == ''802.11n'' and radio.channel > 5000 %}
  {% set band = ''5ghz'' %}
{% endif %}
band=\"{{ band }}\" \
frequency-mode=regulatory-domain country=spain antenna-gain={{ radio.antenna_gain }} \
    {% set channel = radio.channel %}
    {% if radio.channel != 0 and radio.channel != 5000 %}
      {% if radio.channel < 20 %}
        {% set channel = 2407 + (radio.channel * 5) %}
      {% endif %}
frequency={{ channel }} \
    {% endif %}
    {% if ((radio.1.band == ''5ghz'' or ''5ghz-a'') and (channel == 5000 )) or
         ((radio.1.band == ''2.4ghz-b'' or ''2ghz-b'') and (channel == 0 )) %}
 dfs-mode=radar-detect \
    {% else %}
 dfs-mode=none \
    {% endif %}
    {% if radio.antenna_mode =='''' %}
 wds-mode=static wds-default-bridge=none wds-default-cost=100 \
    {% else %}
      {% if radio.antenna_mode != ''Main''%}
         {% set antenna_mode = ''ant-b'' %}
      {% else %}
         {% set antenna_mode = ''ant-a'' %}
      {% endif %}
 antenna-mode={{ antenna_mode }} wds-mode=static wds-default-bridge=none wds-default-cost=100 \
    {% endif %}
 wds-cost-range=50-150 wds-ignore-ssid=yes hide-ssid=no
    {% for interface_id, interface in radio.interfaces %}
:delay 1
# Type: {{ interface.interface_type }}
      {% if interface.interface_type == ''wds/p2p'' %}
# Remove all existing wds interfaces
:foreach i in [/interface wireless wds find master-interface=wlan{{ radio.radiodev_counter+1 }}] \
do={:foreach n in [/interface wireless wds get $i name] \
do={:foreach inum in [/ip address find interface=$n] \
do={/ip address remove $inum;};}; \
/interface wireless wds remove $i;}
        {% if interface.ipv4 %}
          {% for ipv4_id,ipv4 in interface.ipv4 %}
                    {% if ipv4.links %}
                      {% for link_id, link in ipv4.links %}
                        {% if link.flag == ''Working'' or link.flag == ''Testing'' or link.flag == ''Building'' %}
                           {% set disabled = ''no'' %}
                        {% else %}
                           {% set disabled = ''yes'' %}
                        {% endif %}
                        {% set wds_name = ''wds_''. link.interface.ipv4.host_name %}
                        {% if not link.interface.mac %}
                          {% set link_mac = ''FF:FF:FF:FF:FF:FF'' %}
                        {% else %}
                          {% set link_mac = link.interface.mac %}
                        {% endif %}
/ interface wireless wds
add name=\"wds_{{ link.interface.ipv4.host_name }}\" master-interface=wlan{{ radio_id+1 }} wds-address={{ link_mac }} disabled={{ disabled }}
/ ip address add address={{ ipv4.ipv4 }}/{{ ipv4.maskbits }} network={{ ipv4.netid }} broadcast={{ ipv4.broadcast }} interface=wds_{{ link.interface.ipv4.host_name }} disabled={{ disabled }} comment=\"wds_{{ link.interface.ipv4.host_name }}\"
                        {% if link.routing == ''OSPF'' %}
                          {{ _self.ospf_interface(''wds_'' ~ link.interface.ipv4.host_name , ipv4.netid , ipv4.maskbits , ospf_name , ospf_zone, ospf_id, ''no'') }}
                          {{ _self.bgp_peer(link.device_id, link.interface.ipv4.host_name, link.interface.ipv4.ipv4, ''yes'') }}
                        {% else %}
                          {{ _self.ospf_interface(''wds_'' ~ link.interface.ipv4.host_name , ipv4.netid , ipv4.maskbits , ospf_name , ospf_zone, ospf_id, ''yes'') }}
                          {{ _self.bgp_peer(link.device_id, link.interface.ipv4.host_name, link.interface.ipv4.ipv4, ''no'') }}
                        {% endif %}
                      {% endfor %}
                    {% endif %}
          {% endfor %}
        {% endif %}
#
      {% else %}
          {# // wLan, wLan/Lan, Hotspot or client #}
          {% if interface.ipv4 %}
             {% for ipv4_id,ipv4 in interface.ipv4 %}
                {# aixo a l''original no es ben be aixi #}
                {% set ospf_routerid = ipv4.ipv4 %}
                {% if interface.interface_type == ''wLan/Lan'' %}
                  {% set iname = interface.interface_type %}
                  {% set ospf_routerid = ipv4.ipv4 %}
                {% else  %}
                  {% set radioindex = radio_id+1 %}
                  {% set iname = ''wlan'' ~ radioindex %}
                {% endif %}
/ip address
                {% if interface.interface_type == ''Wan''%}
:foreach i in [find interface={{ iname }}] do={remove $i}
                {% endif  %}
:foreach i in [find address=\"{{ ipv4.ipv4 }}/{{ ipv4.maskbits }}\"] do={remove $i}
/ ip address add address={{ ipv4.ipv4 }}/{{ ipv4.maskbits }} network={{ ipv4.netid }} broadcast={{ ipv4.broadcast }} interface={{ iname }} disabled=no
/ routing bgp network
:foreach i in [/routing bgp network find network={{ ipv4.netid }}/{{ ipv4.maskbits }}] do={/routing bgp network remove $i;}
add network={{ ipv4.netid }}/{{ ipv4.maskbits }} disabled=no
                {% if dev.mode != ''client'' %}
/ routing ospf interface
:foreach i in [/routing ospf interface find interface={{ iname }}] do={/routing ospf interface remove $i;}
add interface={{ iname }}
/ routing ospf network
:foreach i in [/routing ospf network find network={{ ipv4.netid }}/{{ ipv4.maskbits }}] do={/routing ospf network remove $i;}
add network={{ ipv4.netid }}/{{ ipv4.maskbits }} area={%if ipv4.ospf_name== '''' %} backbone{% else %}{{ ipv4.ospf_name }}{% endif %} disabled=no
                {% else %}
/ routing ospf interface
:foreach i in [/routing ospf interface find interface={{ iname }}] do={/routing ospf interface remove $i;}
add interface={{ iname }}
/ routing ospf network
:foreach i in [/routing ospf network find network={{ ipv4.netid }}/{{ ipv4.maskbits }}] do={/routing ospf network remove $i;}
add network={{ ipv4.netid }}/{{ ipv4.maskbits }} area={{ ipv4.ospf_name }} disabled=yes
                {% endif %}
                {% if interface.interface_type == ''HotSpot'' %}
#
# HotSpot
/interface wireless
:foreach i in [find name=hotspot{{ radio.id+1 }}] do={remove $i}
add name=\"hotspot{{ radio.id+1 }}\" arp=enabled master-interface=wlan{{ radio.id+1 }} ssid=\"guifi.net-{{ hotspot_ssid}}\" disabled=\"no\"
/ip address'');
:foreach i in [find address=\"192.168.{{ radio.id+100 }}.1/24\"] do={remove $i}
/ip address add address=192.168.{{ radio.id+100 }}.1/24 interface=hotspot{{ radio.id+1 }} disabled=no
/ip pool
:foreach i in [find name=hs-pool-{{ radio.id+100 }}] do={remove $i}
add name=\"hs-pool-{{ radio.id+100 }}\" ranges=192.168.{{ radio.id+100 }}.2-192.168.{{ radio.id+100 }}.254
/ip dhcp-server
:foreach i in [find name=hs-dhcp-{{ radio.id+100 }}] do={remove $i}
add name=\"hs-dhcp-{{ radio.id+100 }}\" interface=hotspot{{ radio.id+1 }} lease-time=1h address-pool=hs-pool-{{ radio.id+100 }} bootp-support=static authoritative=after-2sec-delay disabled=no
/ip dhcp-server network
:foreach i in [find address=\"192.168.{{ radio.id+100 }}.0/24\"] do={remove $i}
add address=192.168.{{ radio.id+100 }}.0/24 gateway=192.168.{{ radio.id+100 }}.1 domain=guifi.net comment=dhcp-{{ radio.id }}
/ip hotspot profile
:foreach i in [find name=hsprof{{ radio.id+1 }}] do={remove $i}
add name=\"hsprof{{ radio.id }}\" hotspot-address=192.168.{{ radio.id+100 }}.1 dns-name=\"guests.guifi.net\" html-directory=hotspot smtp-server=0.0.0.0 login-by=http-pap,trial split-user-domain=no trial-uptime=30m/1d trial-user-profile=default use-radius=no
/ip hotspot user profile
set default name=\"default\" advertise-url=http://guifi.net/trespassos/
/ip hotspot
:foreach i in [find name=hotspot{{ radio.id+1 }}] do={remove $i}
add name=\"hotspot{{ radio.id+1 }}\" interface=hotspot{{ radio.id+1 }} address-pool=hs-pool-{{ radio.id+100 }} profile=hsprof{{ radio.id+1 }} idle-timeout=5m keepalive-timeout=none addresses-per-mac=2 disabled=no
end of HotSpot
                {% endif %} {# end hotspot #}
:delay 1
                {% if interface.interface_type != ''HotSpot'' and interface.interface_type != ''Wan'' %}
                  {% if mode == ''ap-bridge'' %}
                    {% set maxip = ip2long(ipv4.netstart) +1  %}
                    {% if maxip +5 >  ip2long(ipv4.netend) -5 %}
                      {% set maxip = ip2long(ipv4.netend) %}
                      {% set dhcpDisabled = ''yes'' %}
                    {% else %}
                      {% set maxip = maxip +5 %}
                      {% set dhcpDisabled = ''no'' %}
                    {% endif %}
#
# DHCP
:foreach i in [/ip pool find name=dhcp-{{ iname }}] do={/ip pool remove $i;}
/ip pool add name=dhcp-{{ iname }} ranges={{ long2ip(maxip) }}-{{ ipv4.netend }}
:foreach i in [/ip dhcp-server find name=dhcp-{{ iname }}] do={/ip dhcp-server remove $i;}
/ip dhcp-server add name=dhcp-{{ iname }} interface={{ iname }} address-pool=dhcp-{{ iname }} disabled={{ dhcpDisabled }}
:foreach i in [/ip dhcp-server network find address=\"{{ ipv4.netid }}/{{ ipv4.maskbits }}\"] do={/ip dhcp-server network remove $i;}
/ip dhcp-server network add address={{ ipv4.netid }}/{{ ipv4.maskbits }} gateway={{ ipv4.netstart }} domain=guifi.net comment=dhcp-{{ iname }}
/ip dhcp-server lease
:foreach i in [find comment=\"\"] do={remove $i;}
:delay 1
                    {% if ipv4.links %}
                      {% for link_id, link in ipv4.links %}
                        {% if link.interface.ipv4.ipv4 %}
                          {% set maxip = link.interface.ipv4.ipv4 +1  %}
                        {% endif %}
                        {% if not link.interface.mac %}
                          {% set rmac = ''ff:ff:ff:ff:ff:ff''  %}
                        {% else %}
                          {% set rmac = link.interface.mac  %}
                        {% endif %}
add address={{ link.interface.ipv4.ipv4 }} mac-address={{ rmac }} client-id={{ link.interface.ipv4.host_name }} server=dhcp-{{ iname }}
                      {% endfor %}
                      #
                    {% endif %}
                  {% endif %}
                {% endif %}
             {% endfor %}
          {% endif  %}
      {% endif  %}
    {% endfor %}
{% endspaceless %}

:delay 1
#
  {% endfor %} {# end for radio #}
{% endif %}
{% if firewall %}
{% endif %}
# Routed device
#
# {{ t(''Other cable connections'') }}
{% if dev.interfaces %}
  {% for interface_i, interface in dev.interfaces %}
    {% if interface.interface_type == ''vlan'' %}
        {% set iname = ''wLan/Lan'' %}
    {% elseif interface.interface_type == ''vlan2'' %}
        {% set iname = ''ether2'' %}
    {% elseif interface.interface_type == ''vlan3'' %}
        {% set iname = ''ether3'' %}
    {% elseif interface.interface_type == ''vlan4'' %}
        {% set iname = ''wLan/Lan'' %}
    {% elseif interface.interface_type == ''Wan'' %}
        {% set iname = ''wLan/Lan'' %}
    {% else %}
        {% set iname = interface.interface_type  %}
    {% endif %}
  {% endfor %}
{% endif  %}
#
# Internal addresses NAT
:foreach i in [/ip firewall nat find src-address=\"172.16.0.0/12\"] do={/ip firewall nat remove $i;}
:foreach i in [/ip firewall nat find src-address=\"192.168.0.0/16\"] do={/ip firewall nat remove $i;}
/ip firewall nat
add chain=srcnat src-address=\"192.168.0.0/16\" dst-address=!192.168.0.0/16 action=src-nat to-addresses={{ ospf_routerid }} comment=\"\" disabled=no
add chain=srcnat src-address=\"172.16.0.0/12\" dst-address=!172.16.0.0/12 protocol=!ospf action=src-nat to-addresses={{ ospf_routerid }} comment=\"\" disabled=no
#
# Enrutament BGP
# BGP & OSPF Filters
:foreach i in [/routing filter find chain=ospf-in] do={/routing filter remove $i;}
:foreach i in [/routing filter find chain=ospf-out] do={/routing filter remove $i;}
:foreach i in [/routing filter find chain=ebgp-in] do={/routing filter remove $i;}
:foreach i in [/routing filter find chain=ebgp-out] do={/routing filter remove $i;}
/ routing filter
add action=discard chain=ebgp-in comment=\"1. Discard insert non 10.x routes from BGP peer\" disabled=no invert-match=no prefix=!10.0.0.0/8 prefix-length=!8-32
add action=discard chain=ebgp-out comment=\"2. Discard send non 10.x routes to BGP peer\" disabled=no invert-match=no prefix=!10.0.0.0/8 prefix-length=!8-32
add action=accept chain=ospf-in comment=\"3. Accept insert 10.x routes from OSPF neighbor\" disabled=no invert-match=no prefix=10.0.0.0/8 prefix-length=8-32
add action=accept chain=ospf-in comment=\"4. Accept insert 172.x routes from OSPF neighbor\" disabled=no invert-match=no prefix=172.16.0.0/12 prefix-length=8-32
add action=discard chain=ospf-in comment=\"5. Discard insert non 10.x and 172.x from OSPF neighbor\" disabled=no invert-match=no
add action=accept chain=ospf-out comment=\"6. Allow send 10.x routes to OSPF neighbor\" disabled=no invert-match=no prefix=10.0.0.0/8 prefix-length=8-32
add action=accept chain=ospf-out comment=\"7. Allow send 172.x routes to OSPF neighbor\" disabled=no invert-match=no prefix=172.16.0.0/12 prefix-length=8-32
add action=discard chain=ospf-out comment=\"8. Discard send non 10.x and 172.x to OSPF neighbor\" disabled=no invert-match=no
#
# {{ t(''BGP instance'') }}
/ routing bgp instance
set default name=\"default\" as={{ dev.id }} router-id={{ ospf_routerid }} \
redistribute-connected=no redistribute-static=no redistribute-rip=no \
redistribute-ospf=yes redistribute-other-bgp=yes out-filter=ebgp-out \
client-to-client-reflection=yes comment=\"\" disabled=no
#
# {{ t(''OSPF Routing'') }}
/routing ospf instance set default name=default router-id={{ ospf_routerid }} comment=\"\" disabled=no distribute-default=never \
redistribute-bgp=as-type-1 redistribute-connected=no redistribute-other-ospf=no redistribute-rip=no redistribute-static=no in-filter=ospf-in out-filter=ospf-out
#
:log info \"Unsolclic for {{ dev.id}}-{{ dev.nick }} executed.\"
/
',0,'miquelmartos@guifi.net',541,541,1330459031,1333305903,'routerOS4.0.twig');");


$items[] = update_sql("INSERT INTO {guifi_configuracioUnSolclic} (id,mid,fid,enabled,plantilla,tipologia,notification,user_created,user_changed,timestamp_created,timestamp_changed,template_file) VALUES (25,31,19,1,'# Generat per a:
# {{ firmware_name }}
:log info \"Unsolclic for {{ dev.id }}-{{ dev.nick }} going to be executed.\"
#
# Configuration for {{ firmware_name }}
# Trasto: {{  dev.id  }}-{{ dev.nick }}
#
# Methods to upload/execute this script:
# 1.-As a script. Upload this output as a script either with:
# &nbsp;&nbsp;&nbsp;&nbsp;a.Winbox (with Linux, wine required)
# &nbsp;&nbsp;&nbsp;&nbsp;b.Terminal (telnet, ssh...)
# &nbsp;&nbsp;&nbsp;Then execute the script with:
# &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;>&nbsp;/system script run script_name
# 2.-Fitxer importat:
# &nbsp;&nbsp;&nbsp;&nbsp;Desa aquesta \"sortida\" a un fitxer, després puja''l al router
# &nbsp;&nbsp;&nbsp;&nbsp;fent servir FTP amb un nom de l''estil \"script_name.rsc\".
# &nbsp;&nbsp;&nbsp;&nbsp;(note, l''extensió \".rsc\" es un requisit)
# &nbsp;&nbsp;&nbsp;&nbsp;Executa el fitxer importat amb la comanda:
# &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;>&nbsp;/import script_name
# 3.-Telnet copia i enganxar:
# &nbsp;&nbsp;&nbsp;&nbsp;Open a terminal session, and cut&paste this output
# &nbsp;&nbsp;&nbsp;&nbsp;directly on the terminal input.
#
# Notes:
# -routing-test package is required if you use RouterOSv2.9 , be sure you have it enabled at system packages
# -wlans should be enabled manually, be sure to set the correct antenna (a or b)
# &nbsp;&nbsp;according in how did you connect the cable to the miniPCI. Keep the
# &nbsp;&nbsp;power at the minimum possible and check the channel.
# -The script doesn''t reset the router, you might have to do it manually
# -You must have write access to the router
# -MAC access (winbox, MAC telnet...) method is recommended
# &nbsp;&nbsp;(the script reconfigures some IP addresses, so communication can be lost)
# -No changes are done in user passwords on the device
# -A Read Only guest account with no password will be created to allow guest access
# &nbsp;&nbsp;to the router with no danger of damage but able to see the config.
# -Be sure that all packages are activated.
# -Don''t run the script from telnet and being connected through an IP connection at
# &nbsp;&nbsp;the wLan/Lan interface: This interface will be destroyed during the script.
#
/ system identity set name={{ dev.nick }}
#
# DNS (client  &#038; server cache) zone: {{ zone_id }}
{% if zone_primary_dns %}
{% if zone_secondary_dns %}
/ip dns set  servers={{ zone_primary_dns }},{{ zone_secondary_dns }} allow-remote-requests=yes
{% else %}
/ip dns set  servers={{ zone_primary_dns }} allow-remote-requests=yes
{% endif %}
{% endif %}
:delay 1
#
# NTP (client &#038; server cache) zone:  {{ zone_id }}
{% if zone_primary_ntp %}
{% if zone_secondary_ntp %}
/system ntp client set enabled=yes mode=unicast primary-ntp={{zone_primary_ntp }} secondary-ntp={{ zone_secondary_ntp }}
{% else %}
/system ntp client set enabled=yes mode=unicast primary-ntp={{ zone_primary_ntp }}
{% endif %}
{% endif %}
:delay 1
#
# Bandwidth-server
/ tool bandwidth-server set enabled=yes authenticate=no allocate-udp-ports-from=2000
#
# SNMP
/snmp set contact=\"{{ snmp_contact }}\" enabled=yes location=\"{{ dev.node_nick }}\"
#
# Guest user
/user
:foreach i in [find group=read] do={/user remove $i;}
add name=\"guest\" group=read address=0.0.0.0/0 comment=\"\" disabled=no
#
# Graphing
/tool graphing interface add
{% if dev.logserver %}
# Ip for ServerLogs
/system logging
:foreach i in [/system logging find action=remote]
do={/system logging remove $i }
:foreach i in [/system logging action find name=guifi]
do=[/system logging action remove $i]
/system logging action add name={{ dev.nick }} target=remote remote={{ dev.logserver }}:514 src-address={{ dev.radios[0].ipv4}}
/system logging add action=guifi_remot topics=critical
/system logging add action=guifi_remot topics=account
{% endif %}
{% if dev.mode != ''client'' %}
# Remove current wLan/Lan bridge if exists
:foreach i in [/interface bridge find name=wLan/Lan] \
do={:foreach i in [/interface bridge port find bridge=wLan/Lan] \
do={/interface bridge port remove $i; \
:foreach i in [/ip address find interface=wLan/Lan] \
do={/ip address remove $i;};};
/interface bridge remove $i;}
# Construct main bridge on wlan1 &#038; ether1
/ interface bridge
add name=\"wLan/Lan\"
/ interface bridge port
add interface=ether1 bridge=wLan/Lan
add interface=wlan1 bridge=wLan/Lan
{% endif %}
{% if dev.radios %}
:delay 1
{# la declarem aqui perque sino no hi puc accedir fora del foreach radio #}
{% set ospf_routerid = ''ospf_routerid'' %}
{% for radio_id, radio in dev.radios %}
    {% if radio.mode == ''ap'' %}
       {% set mode = ''ap-bridge'' %}
        {% if radio.channel < 5000 %}
          {% set band = ''2ghz-b'' %}
        {% else %}
          {% set band = ''5ghz-a'' %}
        {% endif %}
        {% set channel_width = '' channel-width=20mhz'' %}
    {% elseif (radio.mode == ''client'' or radio.mode == ''clientrouted'') %}
       {% set mode = ''station'' %}
        {% if radio.channel != 5000 %}
          {% set band = ''2ghz-b'' %}
        {% else %}
          {% set band = ''5ghz-a'' %}
          {# aqui falten coses del mirotik-routerOS.inc.php linia 219 #}
          {% set firewall = true %}
        {% endif %}
        {% if radio.protocol == ''802.11n'' and radio.channel > 5000 %}
          {% set band = ''5ghz-a'' %}
        {% endif %}
    {% endif %}
#
# Radio#: {{ radio.radiodev_counter }} {{ radio.ssid }}
/interface wireless set wlan{{ radio.radiodev_counter+1 }} name=\"wlan{{ radio.radiodev_counter+1 }}\" \
radio-name=\"{{ radio.ssid }}\" mode={{ radio.mode }}-bridge ssid=\"guifi.net-{{ radio.ssid }}\" \
band=\"{{ band }}\"{{ channel_width }}  \
frequency-mode=regulatory-domain country=spain antenna-gain={{ radio.antenna_gain }} \
    {% set channel = radio.channel %}
    {% if radio.channel != 0 and radio.channel != 5000 %}
      {% if radio.channel < 20 %}
        {% set channel = 2407 + (radio.channel * 5) %}
      {% endif %}
frequency={{ channel }} \
    {% endif %}
    {% if ((radio.1.band == ''5ghz'' or ''5ghz-a'') and (channel == 5000 )) or
         ((radio.1.band == ''2ghz-b'' or ''2ghz-b'') and (channel == 0 )) %}
dfs-mode=radar-detect \
    {% else %}
dfs-mode=none \
    {% endif %}
    {% if radio.antenna_mode =='''' %}
wds-mode=static wds-default-bridge=none wds-default-cost=100 \
    {% else %}
      {% if radio.antenna_mode != ''Main''%}
         {% set antenna_mode = ''ant-b'' %}
      {% else %}
         {% set antenna_mode = ''ant-a'' %}
      {% endif %}
antenna-mode={{ antenna_mode }} wds-mode=static wds-default-bridge=none wds-default-cost=100 \
    {% endif %}
wds-cost-range=50-150 wds-ignore-ssid=yes hide-ssid=no
    {%if radio.interfaces%}
        {% for interface_id, interface in radio.interfaces %}
        :delay 1
        # Type: {{ interface.interface_type }}
            {% if interface.interface_type == ''wds/p2p'' %}
            # Remove all existing wds interfaces
            :foreach i in [/interface wireless wds find master-interface=wlan{{ radio.radiodev_counter+1 }}] \
            do={:foreach n in [/interface wireless wds get $i name] \
            do={:foreach inum in [/ip address find interface=$n] \
            do={/ip address remove $inum;};}; \
            /interface wireless wds remove $i;}
                    {% if interface.ipv4 %}
                      {% for ipv4_id,ipv4 in interface.ipv4 %}
                                {% if ipv4.links %}
                                  {% for link_id, link in ipv4.links %}
                                    {% if link.flag == ''Working'' or link.flag == ''Testing'' or link.flag == ''Building'' %}
                                       {% set disabled = ''no'' %}
                                    {% else %}
                                       {% set disabled = ''yes'' %}
                                    {% endif %}
                                    {% set wds_name = ''wds_''. link.interface.ipv4.host_name %}
                                    {% if not link.interface.mac %}
                                      {% set link_mac = ''FF:FF:FF:FF:FF:FF'' %}
                                    {% else %}
                                      {% set link_mac = link.interface.mac %}
                                    {% endif %}
                                    / interface wireless wds
                                    add name=\"wds_{{ link.interface.ipv4.host_name }}\" master-interface=wlan{{ radio_id+1 }} wds-address={{ link_mac }} disabled={{ disabled }}
                                    / ip address add address={{ ipv4.ipv4 }}/{{ ipv4.maskbits }} network={{ ipv4.netid }} broadcast={{ ipv4.broadcast }} interface=wds_{{ link.interface.ipv4.host_name }} disabled={{ disabled }} comment=\"wds_{{ link.interface.ipv4.host_name }}\"
                                    {% if link.routing == ''OSPF'' %}
                                      {{ _self.ospf_interface(''wds_'' ~ link.interface.ipv4.host_name , ipv4.netid , ipv4.maskbits , ospf_name , ospf_zone, ospf_id, ''no'') }}
                                      {{ _self.bgp_peer(link.device_id, link.interface.ipv4.host_name, link.interface.ipv4.ipv4, ''yes'') }}
                                    {% else %}
                                      {{ _self.ospf_interface(''wds_'' ~ link.interface.ipv4.host_name , ipv4.netid , ipv4.maskbits , ospf_name , ospf_zone, ospf_id, ''yes'') }}
                                      {{ _self.bgp_peer(link.device_id, link.interface.ipv4.host_name, link.interface.ipv4.ipv4, ''no'') }}
                                    {% endif %}
                                  {% endfor %}
                                {% endif %}
                      {% endfor %}{# aqui anava el 3b d''abans #}
                    {% endif %}
                {% else %}
                      {# // wLan, wLan/Lan, Hotspot or client #}
                      {% if interface.ipv4 %}
                         {% for ipv4_id,ipv4 in interface.ipv4 %}
                            {# aixo a l''original no es ben be aixi #}
                            {% if interface.interface_type == ''wLan/Lan'' %}
                              {% set iname = interface.interface_type %}
                              {% set ospf_routerid = ipv4.ipv4 %}
                            {% else  %}
                              {% set radioindex = radio_id+1 %}
                              {% set iname = ''wlan'' ~ radioindex %}
                            {% endif %}
                            /ip address
                            {% if interface.interface_type == ''Wan''%}
                                :foreach i in [find interface={{ iname }}] do={remove $i}
                            {% endif  %}
                            :foreach i in [find address=\"{{ ipv4.ipv4 }}/{{ ipv4.maskbits }}\"] do={remove $i}
                            / ip address add address={{ ipv4.ipv4 }}/{{ ipv4.maskbits }} network={{ ipv4.netid }} broadcast={{ ipv4.broadcast }} interface={{ iname }} disabled=no
                            / routing bgp network
                            :foreach i in [/routing bgp network find network={{ ipv4.netid }}/{{ ipv4.maskbits }}] do={/routing bgp network remove $i;}
                            add network={{ ipv4.netid }}/{{ ipv4.maskbits }} disabled=no
                            {% if dev.mode != ''client'' %}
                                / routing ospf interface
                                :foreach i in [/routing ospf interface find interface={{ iname }}] do={/routing ospf interface remove $i;}
                                add interface={{ iname }}
                                / routing ospf network
                                :foreach i in [/routing ospf network find network={{ ipv4.netid }}/{{ ipv4.maskbits }}] do={/routing ospf network remove $i;}
                                add network={{ ipv4.netid }}/{{ ipv4.maskbits }} area={%if ipv4.ospf_name=='''' %} backbone{% else %}{{ ipv4.ospf_name }}{% endif %} disabled=no
                            {% else %}
                                / routing ospf interface
                                :foreach i in [/routing ospf interface find interface={{ iname }}] do={/routing ospf interface remove $i;}
                                add interface={{ iname }}
                                / routing ospf network
                                :foreach i in [/routing ospf network find network={{ ipv4.netid }}/{{ ipv4.maskbits }}] do={/routing ospf network remove $i;}
                                add network={{ ipv4.netid }}/{{ ipv4.maskbits }} area={{ ipv4.ospf_name }} disabled=yes
                            {% endif %}
                            {% if interface.interface_type == ''HotSpot'' %}
                                {{ _self.hotspot_code(radio, hotspot_ssid) }}
                            {% endif %}
                            :delay 1
                            {% if interface.interface_type != ''HotSpot'' and interface.interface_type != ''Wan'' %}
                              {% if mode == ''ap-bridge'' %}
                                {% set maxip = ip2long(ipv4.netstart) +1  %}
                                {% if maxip +5 >  ip2long(ipv4.netend) -5 %}
                                  {% set maxip = ip2long(ipv4.netend) %}
                                  {% set dhcpDisabled = ''yes'' %}
                                {% else %}
                                  {% set maxip = maxip +5 %}
                                  {% set dhcpDisabled = ''no'' %}
                                {% endif %}
                                #
                                # DHCP
                                :foreach i in [/ip pool find name=dhcp-{{ iname }}] do={/ip pool remove $i;}
                                /ip pool add name=dhcp-{{ iname }} ranges={{ long2ip(maxip) }}-{{ ipv4.netend }}
                                :foreach i in [/ip dhcp-server find name=dhcp-{{ iname }}] do={/ip dhcp-server remove $i;}
                                /ip dhcp-server add name=dhcp-{{ iname }} interface={{ iname }} address-pool=dhcp-{{ iname }} disabled={{ dhcpDisabled }}
                                :foreach i in [/ip dhcp-server network find address=\"{{ ipv4.netid }}/{{ ipv4.maskbits }}\"] do={/ip dhcp-server network remove $i;}
                                /ip dhcp-server network add address={{ ipv4.netid }}/{{ ipv4.maskbits }} gateway={{ ipv4.netstart }} domain=guifi.net comment=dhcp-{{ iname }}
                                /ip dhcp-server lease
                                :foreach i in [find comment=\"\"] do={remove $i;}
                                :delay 1
                                {% if ipv4.links %}
                                  {% for link_id, link in ipv4.links %}
                                    {% if link.interface.ipv4.ipv4 %}
                                      {% set maxip = link.interface.ipv4.ipv4 +1  %}
                                    {% endif %}
                                    {% if not link.interface.mac %}
                                      {% set rmac = ''ff:ff:ff:ff:ff:ff''  %}
                                    {% else %}
                                      {% set rmac = link.interface.mac  %}
                                    {% endif %}
                                    add address={{ link.interface.ipv4.ipv4 }} mac-address={{ rmac }} client-id={{ link.interface.ipv4.host_name }} server=dhcp-{{ iname }}
                                  {% endfor %}
                                {% endif %}
                              {% endif %}
                            {% endif %}{# es aqui on poso un # i arreglo un i em carrego un altre!!! #}
                         {% endfor %}
                      {% endif  %}
            {% endif  %}{# FINAL IF ''wds/p2p#}
#
        {% endfor %}
    {% endif  %}
:delay 1
  {% endfor %} {# end for radio #}
{% endif %}
{% if firewall %}
{{ _self.firewall(link.interface.ipv4.ipv4, ''192.168.1.1'',''/24'', ''192.168.1.0'',''192.168.1.100'',''192.168.1.200'',zone_primary_dns,zone_secondary_dns,''wlan1'') }}
{% endif %}
#
# Routed device
#
# {{ t(''Other cable connections'') }}
{% if dev.interfaces %}
  {% for interface_i, interface in dev.interfaces %}
    {% if interface.interface_type == ''vlan'' %}
        {% set iname = ''wLan/Lan'' %}
    {% elseif interface.interface_type == ''vlan2'' %}
        {% set iname = ''ether2'' %}
    {% elseif interface.interface_type == ''vlan3'' %}
        {% set iname = ''ether3'' %}
    {% elseif interface.interface_type == ''vlan4'' %}
        {% set iname = ''wLan/Lan'' %}
    {% elseif interface.interface_type == ''Wan'' %}
        {% set iname = ''wLan/Lan'' %}
    {% else %}
        {% set iname = interface.interface_type  %}
    {% endif %}
  {% endfor %}
{% endif  %}
#
# {{ t(''Internal addresses NAT'') }}
:foreach i in [/ip firewall nat find src-address=\"172.16.0.0/12\"] do={/ip firewall nat remove $i;}
:foreach i in [/ip firewall nat find src-address=\"192.168.0.0/16\"] do={/ip firewall nat remove $i;}
/ip firewall nat
add chain=srcnat src-address=\"192.168.0.0/16\" dst-address=!192.168.0.0/16 action=src-nat to-addresses={{ ospf_routerid }} comment=\"\" disabled=no
add chain=srcnat src-address=\"172.16.0.0/12\" dst-address=!172.16.0.0/12 protocol=!ospf action=src-nat to-addresses={{ ospf_routerid }} comment=\"\" disabled=no
#
# {{ t(''BGP Routing'') }}
# BGP & OSPF Filters
:foreach i in [/routing filter find chain=ospf-in] do={/routing filter remove $i;}
:foreach i in [/routing filter find chain=ospf-out] do={/routing filter remove $i;}
:foreach i in [/routing filter find chain=ebgp-in] do={/routing filter remove $i;}
:foreach i in [/routing filter find chain=ebgp-out] do={/routing filter remove $i;}
/ routing filter
add action=discard chain=ebgp-in comment=\"1. Discard insert non 10.x routes from BGP peer\" disabled=no invert-match=no prefix=!10.0.0.0/8 prefix-length=!8-32
add action=discard chain=ebgp-out comment=\"2. Discard send non 10.x routes to BGP peer\" disabled=no invert-match=no prefix=!10.0.0.0/8 prefix-length=!8-32
add action=accept chain=ospf-in comment=\"3. Accept insert 10.x routes from OSPF neighbor\" disabled=no invert-match=no prefix=10.0.0.0/8 prefix-length=8-32
add action=accept chain=ospf-in comment=\"4. Accept insert 172.x routes from OSPF neighbor\" disabled=no invert-match=no prefix=172.16.0.0/12 prefix-length=8-32
add action=discard chain=ospf-in comment=\"5. Discard insert non 10.x and 172.x from OSPF neighbor\" disabled=no invert-match=no
add action=accept chain=ospf-out comment=\"6. Allow send 10.x routes to OSPF neighbor\" disabled=no invert-match=no prefix=10.0.0.0/8 prefix-length=8-32
add action=accept chain=ospf-out comment=\"7. Allow send 172.x routes to OSPF neighbor\" disabled=no invert-match=no prefix=172.16.0.0/12 prefix-length=8-32
add action=discard chain=ospf-out comment=\"8. Discard send non 10.x and 172.x to OSPF neighbor\" disabled=no invert-match=no
#
# {{ t(''BGP instance'') }}
/ routing bgp instance
set default name=\"default\" as={{ dev.id }} router-id={{ ospf_routerid }} \
redistribute-connected=no redistribute-static=no redistribute-rip=no \
redistribute-ospf=yes redistribute-other-bgp=yes out-filter=ebgp-out \
client-to-client-reflection=yes comment=\"\" disabled=no
#
# {{ t(''OSPF Routing'') }}
/routing ospf instance set default name=default router-id={{ ospf_routerid }} comment=\"\" disabled=no distribute-default=never \ 
redistribute-bgp=as-type-1 redistribute-connected=no redistribute-other-ospf=no redistribute-rip=no redistribute-static=no in-filter=ospf-in out-filter=ospf-out
#
:log info \"Unsolclic for {{ dev.id}}-{{ dev.nick }} executed.\"
/{% macro bgp_peer(id, host_name, ipv4, disabled) %}
/ routing bgp peer
:foreach i in [find name={{ host_name }}] do={/routing bgp peer remove $i;}
add name=\"{{ host_name }}\" instance=default remote-address={{ ipv4 }} remote-as={{ id }} \
multihop=no route-reflect=no ttl=default in-filter=ebgp-in out-filter=ebgp-out disabled={{ disabled }}{% endmacro %}
{% macro ospf_interface(iname, netid, maskbits, ospf_name , ospf_zone, ospf_id, disabled) %}
/ routing ospf interface
:foreach i in [/routing ospf interface find interface={{ iname }}] do={/routing ospf interface remove $i;}
add interface={{ iname }}
/ routing ospf network
:foreach i in [/routing ospf network find network={{ netid }}/{{ maskbits }}] do={/routing ospf network remove $i;}
add network={{ netid }}/{{ maskbits }} area={{ ospf_name }} disabled={{ disabled }}{% endmacro %}
{% macro firewall(ip) %}
#
# Device has firewall (setting up as CPE)
{# Setting gateway #}
/ip route add gateway={{ ip }}
{# Setting proxy-arp  #}
/interface ethernet set ether1 arp=proxy-arp
/ip address
{# Setting private network and DHCP  #}
:foreach i in [find address=\"{{ address }}/{{ netmask }}\"] do={remove $i}
/ip address add address={{ address }}/{{ netmask }} network={{ netwok }} broadcast={{ broadcast }} interface=ether1 comment=\"\" disabled=no
:delay 1
/ip pool
:foreach i in [find name=private] do={remove $i}
add name=\"private\" ranges={{ poolstart }}-{{ poolend }}
:delay 1
/ip dhcp-server
:foreach i in [find name=private] do={remove $i}
add name=\"private\" interface=ether1 lease-time=3d address-pool=private bootp-support=static authoritative=after-2sec-delay disabled=no
:delay 1
/ip dhcp-server network
:foreach i in [find] do={remove $i}
{% if secondary_dns %}
add address={{ network }}/{{ netmask }} gateway={{ address }} netmask={{ netmask }} dns-server={{ primary_dns }},{{ secondary_dns }} domain=\"guifi.net\" comment=\"\"
{% elseif primary_dns %}
add address={{ network }}/{{ netmask }} gateway={{ address }} netmask={{ netmask }} dns-server={{ primary_dns }} domain=\"guifi.net\" comment=\"\"
{% endif %}
:delay 1
{# be sure that there is no dhcp client requests since having a static ip  #}
/ip dhcp-client
:foreach i in [find] do={remove $i}
:delay 1
{# NAT private network  #}
/ip firewall nat
:foreach i in [find] do={remove $i}
:delay 1
add chain=srcnat out-interface={{ interface_name }} action=masquerade comment=\"\" disabled=no
{# Firewall enabled, allowing winbox, ssh and snmp  #}
/ip firewall filter
:foreach i in [find] do={remove $i}
add chain=input connection-state=established action=accept comment=\"Allow Established connections\" disabled=no
add chain=input protocol=udp action=accept comment=\"Allow UDP\" disabled=no
add chain=input src-address=\"{{ netwok }}/{{ netmask }}\" action=accept comment=\"Allow access to router from known network\" disabled=no
add chain=input protocol=tcp dst-port=22 action=accept comment=\"Allow remote ssh\" disabled=no
add chain=input protocol=udp dst-port=161 action=accept comment=\"Allow snmp\" disabled=no
add chain=input protocol=tcp dst-port=8291 action=accept comment=\"Allow remote winbox\" disabled=no
add chain=input protocol=icmp action=accept comment=\"Allow ping\" disabled=no
add chain=forward connection-state=established action=accept comment=\"Allow already established connections\" disabled=no
add chain=forward connection-state=related action=accept comment=\"Allow related connections\" disabled=no
add chain=forward src-address=\"{{ netwok }}/{{ netmask }}\" action=accept comment=\"Allow access to router from known network\" disabled=no
add chain=input protocol=tcp connection-state=invalid action=drop comment=\"\" disabled=no
add chain=forward protocol=tcp connection-state=invalid action=drop comment=\"Drop invalid connections\" disabled=no
add chain=forward action=drop comment=\"Drop anything else\" disabled=no
add chain=input action=drop comment=\"Drop anything else\" disabled=no
:delay 1
{# End of Unsolclic #}
#
:log info \"Unsolclic for  {{ dev.id }}-{{ dev.nick }} executed.\"
/
{# return;  #}
{% endmacro %}

{% macro hotspot_code(radio, hotspot_ssid) %}
#
# HotSpot
/interface wireless
:foreach i in [find name=hotspot{{ radio.id+1 }}] do={remove $i}
add name=\"hotspot{{ radio.id+1 }}\" arp=enabled master-interface=wlan{{ radio.id+1 }} ssid=\"guifi.net-{{ hotspot_ssid}}\" disabled=\"no\"
/ip address'');
:foreach i in [find address=\"192.168.{{ radio.id+100 }}.1/24\"] do={remove $i}
/ip address add address=192.168.{{ radio.id+100 }}.1/24 interface=hotspot{{ radio.id+1 }} disabled=no
/ip pool
:foreach i in [find name=hs-pool-{{ radio.id+100 }}] do={remove $i}
add name=\"hs-pool-{{ radio.id+100 }}\" ranges=192.168.{{ radio.id+100 }}.2-192.168.{{ radio.id+100 }}.254
/ip dhcp-server
:foreach i in [find name=hs-dhcp-{{ radio.id+100 }}] do={remove $i}
add name=\"hs-dhcp-{{ radio.id+100 }}\" interface=hotspot{{ radio.id+1 }} lease-time=1h address-pool=hs-pool-{{ radio.id+100 }} bootp-support=static authoritative=after-2sec-delay disabled=no
/ip dhcp-server network
:foreach i in [find address=\"192.168.{{ radio.id+100 }}.0/24\"] do={remove $i}
add address=192.168.{{ radio.id+100 }}.0/24 gateway=192.168.{{ radio.id+100 }}.1 domain=guifi.net comment=dhcp-{{ radio.id }}
/ip hotspot profile
:foreach i in [find name=hsprof{{ radio.id+1 }}] do={remove $i}
add name=\"hsprof{{ radio.id }}\" hotspot-address=192.168.{{ radio.id+100 }}.1 dns-name=\"guests.guifi.net\" html-directory=hotspot smtp-server=0.0.0.0 login-by=http-pap,trial split-user-domain=no trial-uptime=30m/1d trial-user-profile=default use-radius=no
/ip hotspot user profile
set default name=\"default\" advertise-url=http://guifi.net/trespassos/
/ip hotspot
:foreach i in [find name=hotspot{{ radio.id+1 }}] do={remove $i}
add name=\"hotspot{{ radio.id+1 }}\" interface=hotspot{{ radio.id+1 }} address-pool=hs-pool-{{ radio.id+100 }} profile=hsprof{{ radio.id+1 }} idle-timeout=5m keepalive-timeout=none addresses-per-mac=2 disabled=no
# end of HotSpot
{% endmacro %}',0,'miquelmartos@guifi.net',541,541,1331072361,1336814926,NULL);");
  
  
  // creació de la taula de Parametres dels UnSolclics
  $items[] = update_sql("CREATE TABLE IF NOT EXISTS `guifi_parametresConfiguracioUnsolclic` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pid` int(11) NOT NULL,
  `uscid` int(11) NOT NULL,
  `valor` varchar(255) NOT NULL,
  `dinamic` tinyint(1) unsigned zerofill NOT NULL DEFAULT '0',
  `notification` varchar(1024) NOT NULL,
  `user_created` mediumint(9) NOT NULL,
  `user_changed` mediumint(9) DEFAULT NULL,
  `timestamp_created` int(11) DEFAULT NULL,
  `timestamp_changed` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT='Parameters forUnSolclic Configurations'
  ");
  
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (1,1,1,'',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (2,2,1,'',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (3,3,1,'',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (4,4,1,'',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (5,5,1,'',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (6,6,1,'',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (7,7,1,'',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (8,8,1,'',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (9,9,19,'b',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (10,10,19,'11M',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (11,11,19,'6',0,'albertsarle@gmailcom',541,541,0,1332284043);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (12,12,19,'45',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (13,13,19,'2',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (14,14,19,'2',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (15,15,19,'disabled',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (16,16,19,'11',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (19,9,2,'b',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (18,18,1,'Main/Internal - Vertical',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (20,10,2,'11M',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (21,11,2,'6',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (22,12,2,'45',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (23,13,2,'2',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (24,14,2,'2',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (25,15,2,'disabled',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (26,16,2,'11',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (27,18,2,'Main/Internal - Vertical',0,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (125,22,6,'',1,'albert.sarle@gmail.com',541,NULL,1330123306,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (124,23,6,'',1,'albert.sarle@gmail.com',541,NULL,1330123306,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (33,1,19,'',1,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (34,2,19,'',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (57,4,33,'wan.gateway',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (35,3,19,'',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (36,4,19,'',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (37,5,19,'',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (38,6,19,'',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (39,8,19,'locnick',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (60,7,33,'devnick',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (59,6,33,'secondarydns',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (58,5,33,'primarydns',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (44,7,19,'',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (54,1,33,'wireless.1.ssid',1,'albertsarle@gmailcom',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (55,2,33,'wan.ipv4',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (56,3,33,'wan.netmask',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (61,8,33,'locnick',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (68,24,33,'',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (64,20,33,'firmware_name',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (65,21,33,'locnick',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (66,22,33,'devnick',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (67,23,33,'locnick',1,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (69,25,33,'28',0,'albertsarle@gmail.com',541,0,0,0);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (70,19,34,'',1,'albertsarle@gmail.com',541,NULL,1329333997,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (71,2,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (72,5,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (73,6,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (74,7,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (75,11,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (76,1,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (77,3,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (78,4,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (79,8,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (80,9,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (81,10,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (82,12,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (83,13,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (84,14,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (85,15,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (86,16,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (87,18,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (88,19,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (89,20,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (90,21,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (91,22,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (92,23,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (93,24,35,'',1,'albertsarle@gmail.com',541,NULL,1329501151,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (94,20,20,'',1,'albertsarle@gmail.com',541,NULL,1329862310,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (95,21,20,'',1,'albertsarle@gmail.com',541,NULL,1329862310,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (96,22,20,'',1,'albertsarle@gmail.com',541,NULL,1329862310,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (97,23,20,'',1,'albertsarle@gmail.com',541,NULL,1329862310,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (255,18,25,'',1,'albert.sarle@gmail.com',541,NULL,1331383109,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (105,21,23,'',1,'albertsarle@gmail.com',541,NULL,1329870861,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (104,20,23,'',1,'albertsarle@gmail.com',541,NULL,1329870861,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (256,23,25,'',1,'albert.sarle@gmail.com',541,NULL,1331383109,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (107,23,23,'',1,'albertsarle@gmail.com',541,NULL,1329870861,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (108,1,23,'',0,'albert.sarle@gmail.com',541,NULL,1329872883,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (109,1,20,'',1,'albert.sarle@gmail.com',541,NULL,1329872883,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (110,5,23,'',0,'albert.sarle@gmail.com',541,NULL,1329934265,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (111,5,20,'',1,'albert.sarle@gmail.com',541,NULL,1329934265,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (112,25,23,'',0,'albert.sarle@gmail.com',541,NULL,1329934265,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (113,25,20,'28',0,'albert.sarle@gmail.com',541,541,1329934265,1331676576);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (114,4,23,'',0,'albert.sarle@gmail.com',541,NULL,1329934265,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (115,4,20,'',1,'albert.sarle@gmail.com',541,NULL,1329934265,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (116,2,23,'',0,'albert.sarle@gmail.com',541,NULL,1329934265,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (117,2,20,'',1,'albert.sarle@gmail.com',541,NULL,1329934265,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (118,3,23,'',0,'albert.sarle@gmail.com',541,NULL,1329934265,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (119,3,20,'',1,'albert.sarle@gmail.com',541,NULL,1329934265,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (120,24,23,'',0,'albert.sarle@gmail.com',541,NULL,1329934265,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (121,24,20,'',1,'albert.sarle@gmail.com',541,NULL,1329934265,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (122,6,23,'',1,'albert.sarle@gmail.com',541,NULL,1329934756,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (123,6,20,'',1,'albert.sarle@gmail.com',541,NULL,1329934756,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (126,21,6,'',1,'albert.sarle@gmail.com',541,NULL,1330123306,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (127,20,6,'',1,'albert.sarle@gmail.com',541,NULL,1330123306,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (128,5,6,'',1,'albert.sarle@gmail.com',541,NULL,1330123306,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (129,6,6,'',1,'albert.sarle@gmail.com',541,NULL,1330123306,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (130,4,6,'',1,'albert.sarle@gmail.com',541,NULL,1330123306,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (131,2,6,'',1,'albert.sarle@gmail.com',541,NULL,1330123306,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (132,3,6,'',1,'albert.sarle@gmail.com',541,NULL,1330123306,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (133,1,6,'',1,'albert.sarle@gmail.com',541,NULL,1330123306,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (134,24,6,'',1,'albert.sarle@gmail.com',541,NULL,1330123306,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (135,8,6,'',1,'albert.sarle@gmail.com',541,NULL,1330124856,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (136,27,6,'',1,'albert.sarle@gmail.com',541,NULL,1330124856,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (137,28,6,'',1,'albert.sarle@gmail.com',541,NULL,1330126007,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (138,29,6,'',1,'albert.sarle@gmail.com',541,NULL,1330126611,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (139,32,6,'',1,'albert.sarle@gmail.com',541,NULL,1330126992,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (140,9,6,'',1,'albert.sarle@gmail.com',541,NULL,1330126992,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (141,30,6,'',1,'albert.sarle@gmail.com',541,NULL,1330126992,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (142,31,6,'',1,'albert.sarle@gmail.com',541,NULL,1330127476,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (143,23,24,'',1,'albert.sarle@gmail.com',541,NULL,1330459516,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (144,22,24,'',1,'albert.sarle@gmail.com',541,NULL,1330459516,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (145,21,24,'',1,'albert.sarle@gmail.com',541,NULL,1330459516,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (146,20,24,'',1,'albert.sarle@gmail.com',541,NULL,1330459516,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (147,8,24,'',1,'albert.sarle@gmail.com',541,NULL,1330459516,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (148,5,24,'',1,'albert.sarle@gmail.com',541,NULL,1330459516,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (149,32,24,'',1,'albert.sarle@gmail.com',541,NULL,1330459516,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (150,31,24,'',1,'albert.sarle@gmail.com',541,NULL,1330459516,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (151,9,24,'',1,'albert.sarle@gmail.com',541,NULL,1330459516,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (152,29,24,'',1,'albert.sarle@gmail.com',541,NULL,1330459516,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (153,30,24,'',1,'albert.sarle@gmail.com',541,NULL,1330459516,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (154,28,24,'',1,'albert.sarle@gmail.com',541,NULL,1330459516,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (155,6,24,'',1,'albert.sarle@gmail.com',541,NULL,1330459516,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (156,4,24,'',1,'albert.sarle@gmail.com',541,NULL,1330459516,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (157,2,24,'',1,'albert.sarle@gmail.com',541,NULL,1330459516,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (158,3,24,'',1,'albert.sarle@gmail.com',541,NULL,1330459516,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (159,27,24,'',1,'albert.sarle@gmail.com',541,NULL,1330459516,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (160,24,24,'',1,'albert.sarle@gmail.com',541,NULL,1330459516,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (161,2,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (162,5,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (163,6,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (164,7,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (165,11,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (166,1,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (167,3,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (168,4,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (169,8,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (170,9,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (171,10,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (172,12,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (173,13,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (174,14,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (175,15,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (176,16,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (177,18,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (178,19,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (179,20,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (180,21,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (181,22,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (182,23,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (183,24,29,'',1,'albertsarle@gmail.com',541,NULL,1331077406,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (282,4,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (281,28,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (280,30,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (279,29,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (278,9,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (277,31,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (276,32,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (275,8,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (274,24,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (273,27,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (272,6,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (271,34,25,'5ghz',0,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (270,33,25,'2ghz-b',0,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (269,5,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (268,20,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (267,21,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (266,7,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (265,22,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (264,36,25,'firmware_description',1,'albert.sarle@gmail.com',541,NULL,1331597808,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (263,36,6,'firmware_description',1,'albert.sarle@gmail.com',541,NULL,1331597801,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (262,35,25,'guifi@guifi.net',0,'albert.sarle@gmail.com',541,NULL,1331410776,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (261,35,6,'guifi@guifi.net',0,'albert.sarle@gmail.com',541,NULL,1331410764,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (260,35,24,'guifi@guifi.net',0,'albert.sarle@gmail.com',541,NULL,1331410598,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (258,33,24,'2.4ghz-b',0,'albert.sarle@gmail.com',541,541,1331410222,1331410432);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (232,2,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (233,5,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (234,6,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (235,7,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (236,11,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (237,1,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (238,3,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (239,4,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (240,8,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (241,9,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (242,10,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (243,12,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (244,13,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (245,14,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (246,15,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (247,16,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (248,18,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (249,19,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (250,20,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (251,21,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (252,22,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (253,23,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (254,24,30,'',1,'albertsarle@gmail.com',541,NULL,1331162924,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (259,34,24,'5ghz',0,'albert.sarle@gmail.com',541,NULL,1331410222,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (257,7,24,'',1,'albert.sarle@gmail.com',541,NULL,1331407815,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (283,2,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (284,3,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (285,1,25,'',1,'albert.sarle@gmail.com',541,NULL,1331677498,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (312,23,22,'aaaaa',1,'albert.sarle@gmail.com',541,NULL,1332284532,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (313,22,22,'',1,'albert.sarle@gmail.com',541,NULL,1332284532,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (288,21,22,'',1,'albert.sarle@gmail.com',541,NULL,1332271883,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (289,20,22,'',1,'albert.sarle@gmail.com',541,NULL,1332271883,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (290,5,22,'',1,'albert.sarle@gmail.com',541,NULL,1332271883,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (291,6,22,'',1,'albert.sarle@gmail.com',541,NULL,1332271883,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (292,35,22,'guifi@guifi.net',0,'albert.sarle@gmail.com',541,NULL,1332271883,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (293,25,22,'28',0,'albert.sarle@gmail.com',541,541,1332271883,1332272960);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (294,4,22,'',1,'albert.sarle@gmail.com',541,NULL,1332271883,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (295,2,22,'',1,'albert.sarle@gmail.com',541,NULL,1332271883,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (296,3,22,'',1,'albert.sarle@gmail.com',541,NULL,1332271883,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (297,1,22,'',1,'albert.sarle@gmail.com',541,NULL,1332271883,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (298,27,22,'',1,'albert.sarle@gmail.com',541,NULL,1332271883,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (299,24,22,'',1,'albert.sarle@gmail.com',541,NULL,1332271883,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (300,23,21,'aaaaa',1,'albert.sarle@gmail.com',541,NULL,1332272787,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (301,22,21,'',1,'albert.sarle@gmail.com',541,NULL,1332272787,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (302,21,21,'',1,'albert.sarle@gmail.com',541,NULL,1332272787,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (303,20,21,'',1,'albert.sarle@gmail.com',541,NULL,1332272787,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (304,5,21,'',1,'albert.sarle@gmail.com',541,NULL,1332272787,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (305,6,21,'',1,'albert.sarle@gmail.com',541,NULL,1332272787,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (306,25,21,'28',0,'albert.sarle@gmail.com',541,541,1332272787,1332273042);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (307,4,21,'',1,'albert.sarle@gmail.com',541,NULL,1332272787,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (308,2,21,'',1,'albert.sarle@gmail.com',541,NULL,1332272787,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (309,3,21,'',1,'albert.sarle@gmail.com',541,NULL,1332272787,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (310,1,21,'',1,'albert.sarle@gmail.com',541,NULL,1332272787,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (311,24,21,'',1,'albert.sarle@gmail.com',541,NULL,1332272787,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (314,39,23,'',1,'albert.sarle@gmail.com',541,NULL,1332286129,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (315,39,20,'',1,'albert.sarle@gmail.com',541,NULL,1332286129,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (316,39,22,'',1,'albert.sarle@gmail.com',541,NULL,1332286355,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (317,39,21,'',1,'albert.sarle@gmail.com',541,NULL,1332286488,NULL);");
  $items[] = update_sql("INSERT INTO {guifi_parametresConfiguracioUnsolclic} (id,pid,uscid,valor,dinamic,notification,user_created,user_changed,timestamp_created,timestamp_changed) VALUES (318,36,24,'firmware_description',1,'albert.sarle@gmail.com',541,NULL,1332454981,NULL);");  

  // claus foranies de la taula device a model i firmware 
  $items[] = update_sql("ALTER TABLE {guifi_devices} ADD COLUMN usc_id INT(11) NOT NULL  AFTER extra;");
  $items[] = update_sql("ALTER TABLE {guifi_devices} ADD COLUMN mid INT(11) NOT NULL  AFTER usc_id;");
  $items[] = update_sql("ALTER TABLE {guifi_devices} ADD COLUMN fid INT(11) NOT NULL  AFTER `mid`;");
  
  guifi_update_devices_fromExtraInfo();
  
  return $items;
}

function guifi_update_904() {
   $items = array();
  $items[] = update_sql("CREATE TABLE IF NOT EXISTS `guifi_configuracioUnSolclic` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `mid` int(11) NOT NULL,
  `fid` int(11) NOT NULL,
  `enabled` tinyint(1) unsigned zerofill DEFAULT '0',
  `plantilla` text,
  `tipologia` tinyint(1) unsigned zerofill NOT NULL DEFAULT '0',
  `notification` varchar(1024) NOT NULL,
  `user_created` mediumint(9) NOT NULL,
  `user_changed` mediumint(9) NOT NULL,
  `timestamp_created` int(11) NOT NULL,
  `timestamp_changed` int(11) NOT NULL,
  `template_file` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT='UnSolclic Configurations'
  ");


 $items[] = my_update_sql("INSERT INTO guifi_configuracioUnSolclic (id,mid,fid,enabled,plantilla,tipologia,notification,user_created,user_changed,timestamp_created,timestamp_changed,template_file) VALUES (19,25,13,1,'%s',0,'albertsarle@gmailcom',541,541,0,1336846001,NULL);",'wpasupplicant.status=disabled
wireless.1.ssid=guifi.net-{{ wireless1ssid }}
');
 
  return $items;
}


?>
